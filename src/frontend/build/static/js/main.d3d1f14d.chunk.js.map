{"version":3,"sources":["store/websocket/utility/processPkg.js","components/NavigationBar/Logo/Logo.js","components/NavigationBar/Menu/sharedComponents/Item/Item.js","components/NavigationBar/Menu/Home/Home.js","components/NavigationBar/Menu/sharedComponents/DropDown/DropDown.js","store/auth/actionTypes.js","ipconfig.js","global_config.js","utility/getSafeProperty.js","utility/getSafePropertyWithAlert.js","utility/handleError.js","components/NavigationBar/Menu/PeersChatMenu/websocket/globalVar.js","store/auth/actions.js","store/websocket/actionTypes.js","store/websocket/utility/webSocketEvents.js","utility/asyncDelay.js","store/websocket/actions.js","components/NavigationBar/Menu/Profile/Profile.js","components/NavigationBar/Menu/ProjectRepo/ProjectRepo.js","components/NavigationBar/Menu/sharedComponents/ExpandRight/ExpandRight.js","components/NavigationBar/Menu/Course/CourseMenu.js","components/NavigationBar/Menu/ContactUs/ContactUs.js","components/Content/PeersChat/Content/ChatView/Contact/Contact.js","components/Content/PeersChat/Content/ChatView/Group/Group.js","components/Content/PeersChat/Content/ChatView/DropDownList/DropDownList.js","components/Content/PeersChat/Content/ChatView/Panel/ContactCategorySel/ContactCategorySel.js","components/Content/PeersChat/Content/ChatView/Panel/Panel.js","store/websocket/webSocketState.js","components/NavigationBar/Menu/PeersChatMenu/websocket/global_webRTC.js","components/Content/PeersChat/Content/ChatView/ChatArea/ChatAreaContact/ChatAreaContact.js","components/Content/PeersChat/Content/ChatView/ChatArea/ChatAreaGroup/ChatAreaGroup.js","components/Content/PeersChat/Content/ChatView/ChatArea/ChatAreaMyGroup/ChatAreaMyGroup.js","components/Content/PeersChat/Content/ChatView/ChatArea/ChatArea.js","components/Content/PeersChat/Content/ChatView/SmallDeviceView/SmallDeviceView.js","components/Content/PeersChat/Content/ChatView/LargeDeviceView/LargeDeviceView.js","components/Content/PeersChat/Content/ChatView/ChatView.js","components/Content/PeersChat/PeersChat.js","components/NavigationBar/Menu/PeersChatMenu/PeersChatMenu.js","components/NavigationBar/Menu/Blog/Blog.js","components/NavigationBar/Menu/Gallery/Gallery.js","components/NavigationBar/Menu/MySubscription/MySubscription.js","components/NavigationBar/Menu/Menu.js","components/NavigationBar/NavigationBar.js","components/Footer/Footer.js","components/Content/VodPlayer/VodPlayer.js","components/Content/Home/Home.js","components/Content/Profile/Register.js","components/Content/Profile/Login.js","components/Content/CourseListView/OrderBy/OrderBy.js","components/Content/CourseListView/OrderBy/OrderByDropDownItem/OrderByDropDownItem.js","components/Content/Home/CourseCard/CourseCard.js","components/Content/CourseListView/ContentList/ContentList.js","components/Content/Home/CoursePreViewIframe/CoursePreViewDetail/CoursePreViewDetail.js","components/Content/Home/CoursePreViewIframe/CoursePreViewIframe.js","components/Content/CourseListView/PageIndexing/PageIndexing.js","components/Content/CourseListView/CourseListView.js","components/Content/CourseDetailView/CoursePlayWindowAndList/CoursePlayWindowAndList.js","components/Content/CourseDetailView/CourseIntro/CourseSection/CourseSection.js","components/Content/CourseDetailView/CourseIntro/CourseIntro.js","components/Content/CourseDetailView/Discussion/Discussion.js","components/Content/CourseDetailView/Assessment/Assessment.js","components/Content/CourseDetailView/CourseEvaluation/CourseEvaluation.js","components/Content/CourseDetailView/CourseDetailView.js","components/Content/Gallery/Gallery.js","components/Content/Blog/Blog.js","components/Content/Blog/component/kityformulaMenu.js","components/Content/Blog/component/kityformula.js","components/Content/Blog/NewBlog.js","components/Content/Gallery/SubCategory/SubCategory.js","components/Content/Gallery/ImageListView/ImageListView.js","components/Content/Gallery/ImageDetailView/ImageDetailView.js","components/Content/Blog/FollowMe.js","components/Content/Subscription/Subscription.js","components/Content/Subscription/NewSubscription.js","components/Content/ProjectRepo/ProjectRepo.js","components/Content/Router.js","App.js","reportWebVitals.js","store/utility.js","store/auth/reducer.js","store/websocket/reducer.js","store/store.js","index.js"],"names":["exports","proccessOuterLayerMsg","msg","socket_conn","TYPE_OUTER","data","TYPE_INNER","uuid4Key","PAYLOAD","localStorage","setItem","return_data","console","log","processInnerLayerMsg","DATA","Logo","props","className","style","color","htmlFor","for","fontSize","Item","to","itemName","Home","DropDown","type","id","menuName","ckeckboxID","children","AUTH_SET_LOGIN_STATUS","AUTH_SET_TOKEN_STATUS","AUTH_SAVE_MY_USERNAME","LOGIN_STATUS_LOGOUT","LOGIN_STATUS_SUCCEED","wsuri","my_wsuri","hostDomain","cloudServer","cloudServerPort","apiURL","endPoint","userEndPoint","itemEndPoint","foodEndPoint","blogURL","blogEndPoint","blog_newBlog_url","contactEndPoint","chatRoomEndPoint","messageEndPoint","subscriptionENdPoint","config_json","headers","getSafeProperty","fn","defaultVal","e","getSafePropertyWithAlert","getPropertyFunction","fileName","inSideFunctionName","propertyValue","undefined","handleError","error","functionName","response","message","err","alert","msgsContactObj","msgsContact","newMsgToggleSignalFn","newMsgReadyToggle","unReadMsgCnt","allContactObj","allContact","allGroupObj","allGroup","setAllGroup_CB","allChatroomObj","allChatroom","setAllChatroom_CB","selectedContactObj","selectedContact","webSocketUrl","hisID","setSelectedContact_CB","selectedGroupObj","selectedGroup","setSelectedGroup_CB","selectedChatroomObj","selectedChatroom","setSelectedChatroom_CB","me","myUserName","myUserID","userImage","authSetLoginStatus","status","actionTypes","authSaveMyUserName","name","userID","authCheckTokenVaidAction","dispatch","token","getItem","axios","post","JSON","stringify","then","res","isValid","querySet","username","catch","removeItem","authLogoutAction","WEBSOCKET_CREATE","WEBSOCKET_DESTROY","WEBSOCKET_NEWMESSAGE","WEBSOCKET_SET_ISEXPANDMENU","WEBSOCKET_SELECT_CONTACT","WEBSOCKET_SELECT_GROUP","WEBSOCKET_SET_CONTACTLIST","WEBRTC_SET_MEDIACALLSTATE","WEBRTC_SET_STREAM_REF","WEBSOCKET_SET_ISSHOWPANEL","webSocketEvents","sendHeartBeat2CloudServer","isHeartBeatReceived","websocketOnMessage","websocketOnOpen","websocketOnClose","websocketOnError","clearTimerEvents","sock_conn","pkg_obj","TO","DOMAIN","PORT","ID","FROM","send","a","ev","parse","cb_fn","reason","arrOfTimerIds","i","length","clearInterval","asyncDelay","timeInSec","Promise","resolve","reject","setTimeout","destroyWebsocketAction","websocketConn","selectContactAction","isGroupChat","isMyChatRoom","isContactChat","selectContact","selectGroupAction","selectGroup","setIsExpandChatMenuAction","isExpandMenu","setIsExpandChatMenu","setNewMsgToggleAction","setNewMsgToggle","setWebRTCmediaCallStateAction","mediaCallState","setWebRTCmediaCallState","setWebRTCstreamRefAction","localStreamRef","remoteStreamRef","localStream_ref","remoteStream_ref","setContactListAction","allContactList_keyIsIpId","setContactList","setIsShowPanelAction","isShowPanel","setIsShowPanel","connect","state","loginStatus","auth","onClick","preventDefault","handleLogout","ProjectRepo","ExpandRight","CourseMenu","ContactUs","Contact","src","profileImg","Group","Name","DropDownList","cb","ContactCategorySel","useState","showMenu","setShowMenu","display","login_status","isTokenValid","websocket","selectedChatRoom","selectMyChatRoomAction","selectedMyChatRoom","selectChatRoom","socketUrl","image","category_id","categoryArrayIndex","token2AccessHim","tokenAssigned2Him","newContact","setNewContact","joinGroup","setJoinGroup","roomName","createGroup","setCreateGroup","isAddContactShown","setIsAddContactShown","isAddGroupShown","setIsAddGroupShown","isCreateGroupShown","setIsCreateGroupShown","contactCategory","setContactCategory","groupArray","setGroupArray","chatRoomArray","setChatRoomArray","sbDeCnt","setSbDeCnt","contactCategoryMenuControl","setContactCategoryMenuControl","selectedCategory","setSelectedCategory","newCategoryName","setNewCategoryName","useEffect","handleSelectContact2Chat","handleSelectGroup2Chat","handleSelectMyGroup2Chat","getContactCategoryItemList","funcName","get","push","getContactListByCategory","index","url","contactArray","getGroupItemList","getMyChatRoomList","handleAddNewContactRequest","formDataObj","handleOnChangeAddNewContact","target","value","handleOnChangeAddNewGroup","handleOnChangeCreateGroup","handleOnExpandContactListSection","actionType","handleOnExpandGroupList","handleOnExpandMyChatRoomList","handleOpenMenuCallBack","handleAddNewGroupRequest","handleCreateNewGroupRequest","placeholder","alt","onSubmit","autoComplete","onChange","map","category","handleSelectCategoryToNewContact","item","contact","contact_index","group","WEBSOCKET_MEDIACALL_STATE_IDLE","WEBSOCKET_MEDIACALL_STATE_INVIDEOCALL","WEBSOCKET_MEDIACALL_STATE_INVOICECALL","WEBSOCKET_MEDIACALL_STATE_MEDIACALLRECEIVED","closeCall","webRTC_inst_obj","webRTC_inst","whoAmI","ontrack","onnicecandidate","oniceconnectionstatechange","onsignalingstatechange","onicegatheringstatechange","onnotificationneeded","getTransceivers","forEach","transceiver","stop","localStream","getTracks","track","remoteStream","close","createPeerConnection","RTCPeerConnection","iceServers","urls","onicecandidate","handleICECandidateEvent","handleTrackEvent","onnegotiationneeded","handleNegotiationNeededEvent","handleICEConnectionStateChangeEvent","handleICEGatheringStateChangeEvent","handleSignalingStateChangeEvent","localVideoCom_ref","remoteVideoCom_ref","mediaCallStateTypes","sendMsg","type_inner","payload","webSocketReadyState","readyState","event","candidate","IceCandidate","RTCIceCandidate","myIceCandidate","streams","current","srcObject","createOffer","offer","setLocalDescription","iceConnectionState","signalingState","toggleSignal","textEditable","inputeditableRef","useRef","sayUsayMe","messageAreaRef","messageDirection","keydownHandler","keyCode","ctrlKey","handleSendMessage","document","addEventListener","removeEventListener","innerHTML","msgArrayOfTheContact","webSocketState","msgArrayReversed","divMsgWrapper","createElement","divMsg","appendChild","hasOwnProperty","contact_id","user_id","his_webSocketUrl","query","params","offset","pageLen","unReadMsgArray","slice","reverse","fetechUnreadMsg_contact","fetchLastNMsg_contact","handleGetUserMediaError","onClickMakeVideoCall","onClickMakeMeidaCall","isVideoTrue","mediaConstraints","navigator","mediaDevices","getUserMedia","addTrack","onClickMakeAudioCall","handleDenyCall","media_area_video","ref","autoPlay","media_area_txt","href","contentEditable","onInput","ChatAreaGroup","setProfileImg","profileName","setProfileName","setSayUsayMe","width","height","ChatAreaMyGroup","MyChatRoom","selectedChatArea","LargeDeviceView","ChatView","chatView","window","innerWidth","windowWidth","setWindowWidth","getWindowSize","chatContent","isInVideoCall","setIsExpandMenu","setIsIncomingCall","toggleChatMenu","setUpWebsocke","WebSocket","onmessage","onopen","onerror","onclose","newContactMsgUpdateCB","getAllContactList","allContactList","URL","ProccessOuterLayerMsg","CATEGORY","processInnerLayerMsg_CONTACT","processInnerLayerMsg_GROUP","processInnerLayerMsg_CHATROOM","numOfUnreadMsg","onReceiveOffer","answer","onReceiveAnswer","onReceiveRemoteIceCandidate","incomingContact","remote_desc","RTCSessionDescription","setRemoteDescription","pollingResult","createAnswer","addIceCandidate","Blog","Gallery","MySubscription","Menu","setToggleChatMenu","handleOnClick2ToggleChatMenu","NavigationBar","Footer","VodPlayer","videoRef","playerWrapperRef","playerWidth","setPlayerWidth","playerHeight","setPlayerHeight","clientWidth","clientHeight","m3u8url","Hls_config","autoStartLoad","startPosition","debug","capLevelOnFPSDrop","capLevelToPlayerSize","defaultAudioCodec","initialLiveManifestSize","maxBufferLength","maxMaxBufferLength","maxBufferSize","maxBufferHole","highBufferWatchdogPeriod","nudgeOffset","nudgeMaxRetry","maxFragLookUpTolerance","liveSyncDurationCount","liveMaxLatencyDurationCount","Infinity","liveDurationInfinity","liveBackBufferLength","enableWorker","enableSoftwareAES","manifestLoadingTimeOut","manifestLoadingMaxRetry","manifestLoadingRetryDelay","manifestLoadingMaxRetryTimeout","startLevel","levelLoadingTimeOut","levelLoadingMaxRetry","levelLoadingRetryDelay","levelLoadingMaxRetryTimeout","fragLoadingTimeOut","fragLoadingMaxRetry","fragLoadingRetryDelay","fragLoadingMaxRetryTimeout","startFragPrefetch","testBandwidth","progressive","lowLatencyMode","fpsDroppedMonitoringPeriod","fpsDroppedMonitoringThreshold","appendErrorMaxRetry","enableWebVTT","enableIMSC1","enableCEA708Captions","stretchShortVideoTrack","maxAudioFramesDrift","forceKeyFrameOnDiscontinuity","abrEwmaFastLive","abrEwmaSlowLive","abrEwmaFastVoD","abrEwmaSlowVoD","abrEwmaDefaultEstimate","abrBandWidthFactor","abrBandWidthUpFactor","abrMaxWithRealBitrate","maxStarvationDelay","maxLoadingDelay","minAutoBitrate","emeEnabled","widevineLicenseUrl","drmSystemOptions","hls","Hls","isSupported","detachMedia","attachMedia","on","Events","MEDIA_ATTACHED","loadSource","FRAG_PARSED","play","ERROR","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","destroy","canPlayType","updatePlayerSize","controls","preload","playVideo","setPlayVideo","keyCnt","handleClick2Play","videoPlayerWindow","viewBox","xmlns","class","fill","fill-rule","d","Register","userName","email","password","passwordRepeat","isSuper","User","setUser","handleOnChange","repeat_password","isSuccess","history","authLoginAction","OrderBy","showMenuCallBack","OrderByDropDownItem","CourseCard","useHistory","gotoCoursePage","course_img","title","brief_intro","ContentList","Courses","click4more","openRecommendedCourseDetailIframeCallBack","CoursePreViewDetail","CourseArray","setCourseArray","SelectedId","setSelectedId","imageThumbNailsRef","reachRightEnd","previousValuesForScrollLeft0","previousValuesForScrollLeft1","previousValuesForScrollLeft2","videoInftroOfCourse","incrementToGlobal","b","tempValue","Number","imageIdSelted","ImageArrayLength","profile_image","addEventListener2Component","addEventListener2ImgeDetail","selectedCourseArrayIndex","removeEventListenerFromComponent","removeEventListener2ImgeDetail","width2Set","scrollWidth","scrollLeft","handlePlayerWinderResized","componentHeight","offsetHeight","componentWidth","offsetWidth","handleOnWheel","handleSwitchImgOnWheel","deltaY","scrollY","pathname","myparams","course_id","SelectedId_val","handleOnclickToSelect","borderStyle","borderWidth","borderColor","CoursePreViewIframe","handleOnClickClose","PageIndexing","pageItems","TotalPageNum","CourseListView","searchKeyWords","setSearchKeyWords","selectedId","selectedCourseArray","setSelectedCourseArray","isCourseIframeShown","setIsCourseIframeShown","setSelectedCourseArrayIndex","categories","category_name","price","duration","course_intro_video","handleFilterCourseList","courseIframe","selectedArrayId","CoursePlayWindowAndList","videoBlogOfTeacher","CourseSection","isExpandSection","setIsExpandSection","isExpandAll","section","sectionName","durationInfo","sectionItems","preview","itemDuration","CourseIntro","setIsExpandAll","Discussion","Assessment","CourseEvaluation","CourseDetailView","showIntroPage","setShowIntroPage","showDiscussionPage","setShowDiscussionPage","showEvaluationPage","setShowEvaluationPage","showAssessmentPage","setShowAssessmentPage","selectedPage","backgroundColor","albumRef","scrollBarPosition","ImageList","Travel","taiwan","singapore","jeju","india","malaysia","PlacesArray","PlaceName","CoverImage","Link","AlbumName","ImageArray","DataArray","AlbumList","Album","total_width","imageWidth","Math","ceil","blogList","setBlogList","action","blogWrapperDiv","timeAndTitleDiv","dateP","dateSpan","datetime","Date","createdAt","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","titleP","contentDiv","content","getElementsByClassName","KityformulaMenu","editors","$elem","WangEditor","$","conf","editor","inputIFrameId","random","btnOkId","tabs","i18next","t","tpl","events","selector","latex","getElementById","contentWindow","kfe","execCommand","replace","txt","append","createKityformula","Panel","this","create","PanelMenu","setTitle","setEditor","editorData","setEditorData","menus","extend","config","concat","uploadImgShowBase64","uploadImgMaxLength","zIndex","onchange","newHtml","SubCategory","getSafe","items2Render","ItemArray","setItemArray","CategoryName","setCategoryName","setImageList","categoryItemsRef","rootRef","location","match","Place","ImageListView","setImageArray","setPlaceName","place","ImageDetailView","imageDetailRef","imageId","Subscription","subscriptionUrlList","setSubscriptionUrlList","thumbnailTextArray","setThumbnailTextArray","api_url_array","api_url","axiosGetArray","newPromise","method","all","spread","textArray","obj","imageList","page_url","text","errors","atag","NewSubscription","setApi_url","Router","path","exact","component","NewBlog","FollowMe","Login","scrollDirectionUp","setScrollDirectionUp","lastScrollTop","st","pageYOffset","documentElement","scrollTop","position","paddingTop","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","updateObject","oldObject","updatedProperties","initialState","sharedReducer","auth_set_login_status","auth_set_token_status","reducer","creacteWS","destroyWS","newData","setMediaCallState","setStreamRef","rootReducer","combineReducers","authReducer","webSocketReducer","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.d3d1f14d.chunk.js","sourcesContent":["\nconst processInnerLayerMsg = (data, socket_conn) => {\n\n    switch (data.TYPE_INNER) {\n\n        case 'API' : \n            /*{\n                TYPE_INNER : 'API' \n                PAYLOAD : {\n                    uuid4Key : 'xxxooo',\n                    return_data     : {\n                            res :  ,\n                            err :  ,\n                    }\n                }\n            }\n            */\n                // if key uuid4Key exist, save data.PAYLOAD.data = {res : , err: } in localhost \n            const uuid4Key = data.PAYLOAD.uuid4Key ;\n            localStorage.setItem(uuid4Key,data.PAYLOAD.return_data) \n\n            break ;\n\n        default : \n                console.log(\"data.TYPE_INNER not found\")\n    }\n\n}\n\nconst proccessOuterLayerMsg = ( msg, socket_conn) => {\n\n    switch (msg.TYPE_OUTER) {\n\n        case 'MSG' :\n            processInnerLayerMsg(msg.DATA, socket_conn)\n            break ;\n        \n        case 'HEARTBEAT' : \n\n            break ;\n\n        default : \n            console.log('TYPE_OUTER not found')\n\n    }\n\n}\n\n\nexports.proccessOuterLayerMsg = proccessOuterLayerMsg ;\n\n\n\n","import React from 'react'\nimport MenuIcon from '@material-ui/icons/Menu';\nimport './Logo.css'\n\nfunction Logo(props) {\n    return (\n        <div className=\"logoRoot\">\n                <div className=\"spanWrapper\">\n                    <span style={{color:\"green\"}}>De</span>\n                    <span style={{color:\"red\"}}>Censor</span>\n                    <span style={{color:\"green\"}}>Media</span>\n                </div>\n                \n                <label className=\"menuTag\" htmlFor={props.for}> \n                    <MenuIcon fontSize='large' />\n                </label>\n        </div>\n    )\n}\n\nexport default Logo\n","import React from 'react'\nimport './Item.css'\nimport {Link} from 'react-router-dom'\n\nfunction Item(props) {\n    return (\n        <div className='itemRoot'>\n            <Link to={props.to} >\n                <span style={props.style} >{props.itemName}</span>\n            </Link>\n        </div>\n    )\n}\n\nexport default Item\n","import React from 'react'\nimport './Home.css'\n\nimport Item from '../sharedComponents/Item/Item'\n\nfunction Home() {\n    return (\n        <div className='homeMenuRoot'>\n            <Item style={{color:'black'}} to='/' itemName='Home'/>\n        </div>\n    )\n}\n\nexport default Home\n","import React from 'react'\nimport './DropDown.css'\n\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport {Link} from 'react-router-dom'\n\nfunction DropDown(props) {\n    return (\n        <div className='dropDownRoot'>\n\n            <input type='checkbox' id={props.menuName + props.ckeckboxID} />\n\n            <div className='aTagAndIcon'>\n                <Link to={props.to} style={props.style}>\n                    <span>{props.menuName}</span>\n                </Link>\n                <label className='iconWrapper' htmlFor={props.menuName + props.ckeckboxID}>\n                    <ExpandMoreIcon style={{ color: 'rgb(100,100,100)', fontSize: \"20px\" }} />\n                </label>\n            </div>\n\n            <div className='menuContent'>\n                {props.children}\n            </div>\n        </div>\n    )\n}\n\nexport default DropDown\n","export const AUTH_SET_LOGIN_STATUS = \"AUTH_SET_LOGIN_STATUS\";\nexport const AUTH_SET_TOKEN_STATUS = \"AUTH_SET_TOKEN_STATUS\";\nexport const AUTH_SAVE_MY_USERNAME = \"AUTH_SAVE_MY_USERNAME\";\n\nexport const LOGIN_STATUS_LOGOUT   = \"LOGOUT\" ;\nexport const LOGIN_STATUS_LOADING  = \"LOADING\";\nexport const LOGIN_STATUS_SUCCEED  = \"SUCCEED\"; \n\n\n\n","const deploy = true ;\n\nexport const wsuri = deploy === true ?    \"wss://decensormedia.org/websocket\" : \"ws://localhost:6464\" ;\nexport const my_wsuri = deploy === true ? \"wss://decensormedia.org/websocket\" : \"ws://localhost:6464\" ;\n// export const wsuri = \"ws://localhost:6464\";\n\nexport const hostDomain = (deploy === true) ? 'https://decensormedia.org' : 'http://localhost' ;\nexport const hostIP = (deploy === true ) ? '96.45.184.199' : 'localhost' ;\nexport const hostPort = (deploy === true ) ? '6464' : '6464' ;\n\n\nexport const cloudServer = deploy === true ? 'https://decensormedia.org' : 'http://localhost' ;\nexport const cloudServerPort = deploy === true ? '6464' : '6464' ;\n\nconst apiURL = \"/api\";\n\n\nconst userURL = \"/user\";\nconst endPoint = (deploy === true) ? `${hostDomain}${apiURL}` : `${hostDomain}:${hostPort}${apiURL}`;\n// const endPoint = `${hostDomain}:${hostPort}${apiURL}`;\nexport const userEndPoint = `${endPoint}${userURL}`\n// export const user_register_url = `${userEndPoint}/register/?action=registration`;\nexport const user_login_url = `${userEndPoint}/login`;\nexport const user_logout_url = `${userEndPoint}/logout`;\nexport const user_validate_token_url = token => `${userEndPoint}/validatetoken/?token=${token}`;\nexport const user_detail_rul = id => `${userEndPoint}/${id}`;\n\n// item \nconst itemURL = \"/item\";\nexport const itemEndPoint = `${endPoint}${itemURL}` ;\nexport const item_add_new_image_url = `${itemEndPoint}/image` ;\nexport const item_get_item_by_id = (itemId) => `${itemEndPoint}/${itemId}` ;\nexport const item_cart_url = token => `${itemEndPoint}/cart/?token=${token}` ;\n\n// address \nconst addressURL = \"/address\" ;\nexport const addressEndPoint = `${endPoint}${addressURL}` ;\nexport const address_url = token => `${addressEndPoint}/?token=${token}` ;\n\n// order \nconst orderURL = \"/order\" ;\nexport const orderEndPoint = `${endPoint}${orderURL}` ;\nexport const order_w_token_url = token => `${orderEndPoint}/?token=${token}` ;\nexport const get_order_detail_url = (token,order_id) => `${orderEndPoint}/?token=${token}&order_id=${order_id}` ;\n\n// food \nconst foodURL = \"/food\" ;\nexport const foodEndPoint = `${endPoint}${foodURL}` ;\nexport const food_add_new_category = (token) => `${foodEndPoint}/addnewcategory/?token=${token}` ;\nexport const food_insert_new_food = (token) => `${foodEndPoint}/insertnewfood/?token=${token}` ;\nexport const food_get_category_list = `${foodEndPoint}/getcategorylist` ;\nexport const food_add_new_image_url = `${foodEndPoint}/image` ;\n\n// blog \nconst blogURL = \"/blog\"\nexport const blogEndPoint = `${endPoint}${blogURL}` ;\nexport const blog_newBlog_url = `${endPoint}${blogURL}`;\n\n// Contact \nconst contactURL = \"/contact\"\nexport const contactEndPoint = `${endPoint}${contactURL}` ;\n\n// ChatRoom\nconst ChatRoomURL = \"/chatroom\"\nexport const chatRoomEndPoint = `${endPoint}${ChatRoomURL}` ;\n\nconst MessageURL = \"/message\"\nexport const messageEndPoint = `${endPoint}${MessageURL}`\n\n\n// subscription\nconst SubscriptionURL = \"/subscription\"\nexport const subscriptionENdPoint = `${endPoint}${SubscriptionURL}`\n\n\n\n\n","export const debug_ = false ;\n\n// axios settings \nexport const config_json = {\n    headers: { \n      'Content-Type': 'application/json', \n    },\n  }\n\nexport const config_multipart = {\n    headers: { \n        'Content-Type': 'multipart/form-data', \n      },\n}","/**\n * \n * @param {*} fn \n * @param {*} defaultVal \n * \n * example :\n * const insertId = getSafeProperty(()=>data.res.insertId, 'undefined')\n    if (insertId  == 'undefined') {\n        alert('registeration failed, inserId is undefined')\n    }\n */\n\nfunction getSafeProperty(fn, defaultVal) {\n    try {\n        return fn();\n    } catch (e) {\n        return defaultVal;\n    }\n}\n\nexport default getSafeProperty\n","import getSafeProperty from './getSafeProperty'\nconst isdebug = false\n\n/**\n *  example : getSafePropertyWithAlert(()=>object.property, \"filename.js\", \"functionName()\",\"please add more information\" )\n * \n * @param {*} getPropertyFunction \n * @param {*} expressionString \n * @param {*} fileName \n * @param {*} inSideFunctionName \n * @param {*} extra_msg \n */\nconst getSafePropertyWithAlert = (getPropertyFunction,fileName,inSideFunctionName,extra_msg=\"\") => {\n\n\n    if(typeof getPropertyFunction !== 'function')\n    {\n        if (isdebug === true){\n            alert(`@ file ${fileName}, inside function :${inSideFunctionName} getSafePropertyWithAlert, 1st parameter: getPropertyFunction is not a function, please check the code`)\n        }\n        \n        return ;\n    }\n\n    const propertyValue = getSafeProperty(getPropertyFunction, undefined)\n    if (propertyValue  == undefined) {\n        if (isdebug === true){\n            alert(`@ file ${fileName}, inside function :${inSideFunctionName} getSafePropertyWithAlert,  ${String(getPropertyFunction)}  is undefined, ${extra_msg}`)\n        }\n        return ;\n    }\n\n    return propertyValue\n}\n\nexport default getSafePropertyWithAlert\n","\nimport getSafeProperty from './getSafeProperty'\n\nconst isDebug = false \n\nconst handleError = (error,fileName,functionName) => {\n\n    const response = getSafeProperty(()=>error['response'], undefined)\n    if (response === undefined ){\n        if (isDebug === true ){\n            alert(`@${fileName} ${functionName}, response undefined `)\n        }\n        return \n    }\n\n    const data = getSafeProperty(()=>response['data'], undefined)\n    if (data === undefined){\n        if (isDebug === true ){\n            alert(`@${fileName} ${functionName}, response.data undefined `)\n        }\n        return\n    }\n    const status = getSafeProperty(()=>response['status'], undefined)\n    if (status === undefined){\n        if (isDebug === true ){\n            alert(`@${fileName} ${functionName}, response.status undefined `)\n        }\n        return\n    }\n    const headers = getSafeProperty(()=>response['headers'], undefined)\n    if (headers === undefined){\n        if (isDebug === true ){\n            alert(`@${fileName} ${functionName}, response.headers undefined `)\n        }\n        return\n    }\n    const message = getSafeProperty(()=>response.data['message'], undefined) \n    if (message === undefined ){\n        if (isDebug === true ){\n            alert(`@${fileName} ${functionName}, response.data.message undefined `)\n        }\n        return\n    }\n    const err = getSafeProperty(()=>response.data['error'], undefined) \n    if (err === undefined ){\n        if (isDebug === true ){\n            alert(`@${fileName} ${functionName}, response.data.error undefined `)\n        }\n        return\n    }\n\n    if (isDebug === true){\n        alert(`@${fileName} ${functionName}, error type : ` +  err + '  , ' +  message)\n    } else {\n        alert(`error type : ` +  err + '  , message: ' +  message)\n    }\n    \n\n}\n\n\nexport default handleError\n","/**\n * 用這種土方法的好處就是避開在註冊回調函數時，props傳入的變量無法更新的問題。\n * 回調函數傳入的變量的值，如果不是全局變量，一直就是開始記憶的值，這點要留意。\n * \n * rules to follow when changing the values in the global objects. \n * \n * when values are shared with component functions, should only invoke callback function from a component where this object are initialized.\n * 1. change the value in the store first\n * 2. then use useEffect to watch the state of the value,whenever it changes, in useEffect function change the value in the global object according to \n * the state of the value in the store. do not change the value in the global object directly.thus the other components which watch the state of the variable \n * can take action accordingly.\n * \n */\n\n\n/**\n * \n * msgsContact data layout : \n * msgsContact = {\n *          url+id : {\n *                      sent : [sentArray],\n *                      rcvd : [rcvdArray]\n *                  }\n * }\n * \n * unReadMsgCnt: {\n        url+id : cnt\n    }\n * \n */\nexport const msgsContactObj = {\n    msgsContact : {\n\n    },\n    newMsgToggleSignalFn : null,\n    newMsgReadyToggle : false,\n    unReadMsgCnt: {\n\n    }\n}\n\n/**\n * \n * msgsGroup data layout : \n * msgsGroup = {\n *          url+id : {\n *                      sent : [sentArray],\n *                      rcvd : [rcvdArray]\n *                  }\n * }\n * \n * rcvdArray[i] data layout : {\n *      sender_url: xxx ,\n *      sender_id : xxx ,\n *      msgbody   : lalalalal\n * }\n * \n */\nexport const msgsGroup = {\n\n}\n\n\n/**\n * \n * msgsChatRoom data layout : \n * msgsChatRoom = {\n *          url+id : {\n *                      sent : [sentArray],\n *                      rcvd : [rcvdArray]\n *                  }\n * }\n * \n * sentArray[i] data layout : {\n *      sender_url: xxx ,\n *      sender_id : xxx ,\n *      msgbody   : lalalalal\n * }\n * \n */\nexport const msgsChatRoom = {\n\n}\n\n\n\n/**\n * \n * allContactObj.allContact = {\n *  url+id : contact \n * }\n * \n */\nexport const allContactObj = {\n    allContact : {} ,\n}\n\nexport const allGroupObj = {\n    allGroup : null ,\n    setAllGroup_CB : null \n}\n\nexport const allChatroomObj = {\n    allChatroom : null ,\n    setAllChatroom_CB : null \n}\n\nexport const selectedContactObj = {\n    selectedContact : {\n        webSocketUrl: null,\n        hisID : null             \n    },\n    setSelectedContact_CB : null,\n}\n\nexport const selectedGroupObj = {\n    selectedGroup : null,\n    setSelectedGroup_CB : null,\n}\n\nexport const selectedChatroomObj = {\n    selectedChatroom : null,\n    setSelectedChatroom_CB : null,\n}\n\nexport const me = {\n    myUserName : null,\n    myUserID : null ,\n    userImage: null \n}\n\n\n/**\n * \n *  createPeerConnection() {\n      if (this.newPeerConnection){\n          console.log(\"PeerConnection exist, can't not create again\");\n          return;\n      }\n      this.newPeerConnection = new RTCPeerConnection({\n          iceServers: [     // Information about ICE servers - Use your own!\n              {\n                  urls : 'stun:stun.l.google.com:19302'\n              }\n          ]\n      });\n\n      this.newPeerConnection.onicecandidate = this.handleICECandidateEvent;\n      this.newPeerConnection.ontrack = this.handleTrackEvent;\n      this.newPeerConnection.onnegotiationneeded = this.handleNegotiationNeededEvent;\n      this.newPeerConnection.onremovetrack = this.handleRemoveTrackEvent;\n      this.newPeerConnection.oniceconnectionstatechange = this.handleICEConnectionStateChangeEvent;\n      this.newPeerConnection.onicegatheringstatechange = this.handleICEGatheringStateChangeEvent;\n      this.newPeerConnection.onsignalingstatechange = this.handleSignalingStateChangeEvent;\n    },\n    isInCall : indicating if the user is in the call with his contact,and takes no more incall untill he finish the current one\n * \n */\n\n// export const webRTC_global = {\n\n//     webRTC_peerConnection  : null ,\n//     localStream : null ,\n//     remoteStream : null ,\n//     isInCall : false,\n//     setIsIncallStoreAction_cb : '',\n//     isCallAccepted : false,\n//     isCallDenied : false,\n//     setIsCallAcceptedOrDenied_cb : '',\n\n//     /**\n//      * incoming_msg : which contains the offer message\n//      * processAnswerTheCall_cbfn : when press answer the call in component file ChatAreaContact.js,this function is invoked \n//      *                              which will invoke the function processingOffer in component file PeersChatMenu.js\n//      * in short: the purpose of these three global signals is to avoid passing signals and callback function thru props from / to \n//      * the long internal path between a parant component and child component.\n//      * 这三个全局信号和回调函数的目的，是为了避免信号在子组件和父组件之间的深层传递。如果只是隔着一代，信号传递还ok，隔着太多的其他子父组件，信号来回传递过程\n//      * 太过于复杂。要更新的部分也随之增多，不如直接用全局变量，无需触发其他无关组件的更新.\n//      * when and where these values are assigned : \n//      * 1. processAnswerTheCall_cbfn is initialized with the function pointer :processingOffer at the time when parent component PeersChatMenu.js\n//      *              is created. \n//      * 3. incomming_msg: same as above\n//      *\n//      * \n//      * \n//      * \n//      */\n\n//     incoming_msg : '',\n//     socket_conn : '',\n//     myUserName : '' ,\n//     processAnswerTheCall_cbfn : '',\n\n//     /**\n//      *  用于从子组件ChatAreaContact.js传递remoteStream_ref和localStream_ref到父组件PeersChatMenu.js\n//      *  于ChatAreaContact.js子组件创建时赋值\n//      *  used to pass values of remoteStream_ref and localStream_ref from child component ChatAreaContact.js to parent component PeersChatMenu.js\n//      *  assigned value at the creation of child component \n//      */\n//     localStreamRef : null ,\n//     remoteStreamRef : null,\n\n\n// }\n\nexport const auth_Global = {\n    checkTokenValidOrNot_async : null , // check if token still valid,initialized in file App.js,it will delete the token and logout if not valid, \n                                        // then use a promise and timeout logic to poll the loginStatus signal (status) in store,and then execute the \n                                        // next line of code that follows \n    loginStatus : false \n}\n\n \n\n\n","import axios from \"axios\";\nimport * as actionTypes from './actionTypes'\nimport {\n        userEndPoint,\n        } from \"../../ipconfig\"\nimport {config_json} from '../../global_config'\nimport getSafeProperty from '../../utility/getSafeProperty'\nimport getSafePropertyWithAlert from '../../utility/getSafePropertyWithAlert'\nimport handleError from '../../utility/handleError'\nimport {me} from '../../components/NavigationBar/Menu/PeersChatMenu/websocket/globalVar'\n\nconst fileName = \"auth/actions.js\"\n\nconst authSetLoginStatus = (status) => {\n\n    return {\n        type: actionTypes.AUTH_SET_LOGIN_STATUS ,\n        data: {\n            status: status,\n        }\n    };\n}\n\n\nconst authSaveMyUserName = (name,userID,userImage) => {\n    return {\n        type: actionTypes.AUTH_SAVE_MY_USERNAME ,\n        data: {\n            myUserName: name,\n            userID    : userID,\n            userImage : userImage   \n        }\n    }; \n}\n\n\nexport const authCheckTokenVaidAction = () => {\n\n    const functionName = \"authCheckTokenVaidAction\"\n\n    return dispatch => {\n\n        const token = localStorage.getItem('token')\n\n        if (!token) {\n            return ;\n        }\n\n\n        const formDataObj = {\n\n        }\n\n        axios\n            .post(`${userEndPoint}/?action=validate&token=${token}`,\n                                        JSON.stringify(formDataObj),\n                                        config_json  \n                                        )\n            .then( res => {\n             \n                const isValid = getSafeProperty(()=>res.data.isValid, undefined)\n\n                if ( isValid === true) {\n\n                    const myUserName = getSafePropertyWithAlert(()=>res.data.querySet[0].username,fileName,functionName,\"\")\n                    const myUserID = getSafePropertyWithAlert(()=>res.data.querySet[0].userID,fileName,functionName,\"\")\n                    const userImage = getSafePropertyWithAlert(()=>res.data.querySet[0].userImage,fileName,functionName,\"\")\n                    \n                    dispatch(authSaveMyUserName(myUserName,myUserID,userImage))       // 注意出場順序，little bug\n                    me.myUserID = myUserID\n                    me.myUserName = myUserName\n                    me.userImage = userImage\n                    dispatch(authSetLoginStatus(actionTypes.LOGIN_STATUS_SUCCEED))\n\n                } else {\n                    dispatch(authSetLoginStatus(actionTypes.LOGIN_STATUS_LOGOUT))\n                }\n            })\n            .catch (error => {\n                localStorage.removeItem('token')\n                handleError(error,fileName,functionName)\n                dispatch(authSetLoginStatus(actionTypes.LOGIN_STATUS_LOGOUT)) \n            })\n    }\n}\n\n\nexport const authLogoutAction = () => {\n    const functionName = \"authLogoutAction\"\n\n    return dispatch => {\n\n        const token = localStorage.getItem('token');\n\n        console.log(token)\n\n        if (!token) {\n            dispatch(authSetLoginStatus(actionTypes.LOGIN_STATUS_LOGOUT))\n            return ;\n        }\n\n        const formDataObj = {\n\n        }\n\n        axios\n            .post(`${userEndPoint}/?action=logout&token=${token}`,\n                        JSON.stringify(formDataObj),\n                        config_json  \n                        )\n            .then( res => {\n                \n                    localStorage.removeItem('token')\n                    me.myUserID = null\n                    me.myUserName = null\n                    me.userImage = null \n\n                    dispatch(authSaveMyUserName(null,null,null))\n                    dispatch(authSetLoginStatus(actionTypes.LOGIN_STATUS_LOGOUT))\n                \n            })\n            .catch (error => {\n                me.myUserID = null\n                me.myUserName = null\n                me.userImage = null \n\n                dispatch(authSaveMyUserName(null,null,null))\n                localStorage.removeItem('token')\n                \n                dispatch(authSetLoginStatus(actionTypes.LOGIN_STATUS_LOGOUT))\n                handleError(error,fileName,functionName)\n            })\n    }\n}\n\n\nexport const authLoginAction = (userName,password) => {\n\n    return dispatch => { \n            const formDataObj = {\n                username : userName ,\n                password : password,\n            }\n\n            const functionName = \"authLoginAction\"\n            \n            dispatch(authSetLoginStatus(actionTypes.LOGIN_STATUS_LOADING))\n\n            console.log(userEndPoint)\n\n            axios\n                .post(`${userEndPoint}/?action=login`,\n                        JSON.stringify(formDataObj),\n                        config_json  \n                    )\n                .then( res => {\n                    /**\n                     data = {\n                                querySet : {\n                                    username : username\n                                },\n                                error : ['Bad request'],\n                                statusCode : httpStatus.BadRequest,\n                                message : ['action not found in query object'],\n                                atributes: {}\n                            }\n                    */\n\n                    const data = getSafePropertyWithAlert(()=>res.data,fileName,functionName)\n                    const isSuccess =  getSafePropertyWithAlert(()=>data.isSuccess,fileName,functionName)\n                    const token =  getSafePropertyWithAlert(()=>data.token,fileName,functionName)\n\n                    if (isSuccess === true ){\n                        // to do : set login status to be success \n                        localStorage.setItem('token',token)\n\n                        const myUserName = getSafePropertyWithAlert(()=>data.querySet[0].username,fileName,functionName)\n                        const myUserID = getSafePropertyWithAlert(()=>data.querySet[0].userID,fileName,functionName)\n                        const userImage = getSafePropertyWithAlert(()=>data.querySet[0].userImage,fileName,functionName)\n                        \n                        me.myUserID = myUserID\n                        me.myUserName = myUserName\n                        me.userImage = userImage \n\n\n                        dispatch(authSaveMyUserName(myUserName,myUserID,userImage))\n\n                        dispatch(authSetLoginStatus(actionTypes.LOGIN_STATUS_SUCCEED))\n                        \n                    }\n                    \n                })\n                .catch(error => {\n                    dispatch(authSetLoginStatus(actionTypes.LOGIN_STATUS_LOGOUT))\n                    handleError(error,fileName,functionName)\n                })\n\n     }\n}\n\n\n\n\n","export const WEBSOCKET_CREATE = \"WEBSOCKET_CREATE\";\nexport const WEBSOCKET_DESTROY = \"WEBSOCKET_DESTROY\";\n\nexport const WEBSOCKET_NEWMESSAGE = \"WEBSOCKET_NEWMESSAGE\";\n\nexport const WEBSOCKET_SET_ISEXPANDMENU = \"WEBSOCKET_SET_ISEXPANDMENU\" ;\n\nexport const WEBSOCKET_SELECT_CONTACT = \"WEBSOCKET_SELECT_CONTACT\";\nexport const WEBSOCKET_SELECT_GROUP = \"WEBSOCKET_SELECT_GROUP\";\nexport const WEBSOCKET_SELECT_MYCHATROOM = \"WEBSOCKET_SELECT_MYCHATROOM\" ;\n\nexport const WEBSOCKET_SET_CONTACTLIST  = \"WEBSOCKET_SET_CONTACTLIST\";\n\n\nexport const WEBRTC_ISINMEDIACALL = \"WEBRTC_ISINMEDIACALL\"\n\nexport const WEBRTC_ISCALLACCEPTED = \"WEBRTC_ISCALLACCEPTED\"\n\nexport const WEBRTC_SET_MEDIACALLSTATE = \"WEBRTC_SET_MEDIACALLSTATE\"\n\nexport const WEBRTC_SET_STREAM_REF = \"WEBRTC_SET_STREAM_REF\"\n\nexport const WEBSOCKET_SET_ISSHOWPANEL = 'WEBSOCKET_SET_ISSHOWPANEL'\n\n","import { authResetStateAction } from '../actions';\nimport {\n        wsuri,\n        cloudServer,\n        cloudServerPort\n    } from \"../../../ipconfig\"\n\nimport {proccessOuterLayerMsg} from './processPkg'\n\nconst webSocketEvents = {\n    sendHeartBeat2CloudServer : null,\n    isHeartBeatReceived : null ,\n    websocketOnMessage: null,\n    websocketOnOpen: null,\n    websocketOnClose: null,\n    websocketOnError : null,\n    clearTimerEvents : null\n}\n\n    /**\n     * public protocol \n     *     ___________________________________________ ___________\n     *    |      FROM     |  TO      |     DATA       |TYPE_OUTER |       \n     *    |_______________|__________|________________|___________|\n     *                               /                 \\\n     *                              /                   \\\n     *                             /_____________________\\\n     *                            |TYPE_INNER| PAYLOAD   |\n     *                            |__________|___________|\n     * \n     * \n     * \n     *  sock_conn.send(JSON.stringify({\n            \"TO\" : {\n                \"DOMAIN\" : \"the domain name or IP of contact\",\n                \"PORT\"   : \"the PORT of contact's cloud server \",\n                \"ID\"     : \"the ID of the contact on his cloud server,the destination domain may contain serveral family members\",  \n            },\n            \"FROM\" : {\n                \"DOMAIN\" : \"the domain name or IP of sender\",\n                \"PORT\"   : \"the PORT of sender's cloud server \",\n                \"ID\"     : \"the ID of the sender on his cloud server,the source domain may contain serveral family members\", \n            },\n            \"TYPE_OUTER\" : \"HEARTBEAT\"\n            \"DATA\" : {\n                \"TYPE_INNER\"   : \"HEARTBEAT\",\n                \"PAYLOAD\":  \"I miss you\" \n            }\n        }))\n     * \n     */\n\n    /**\n     * \n        onclose: ((this: WebSocket, ev: CloseEvent) => any) | null;\n        onerror: ((this: WebSocket, ev: Event) => any) | null;\n        onmessage: ((this: WebSocket, ev: MessageEvent) => any) | null;\n        onopen: ((this: WebSocket, ev: Event) => any) | null;\n     * \n     */\n\nwebSocketEvents.sendHeartBeat2CloudServer = (sock_conn) => {\n\n        const pkg_obj = {\n\n            TO   : {\n                        DOMAIN : cloudServer,\n                        PORT : cloudServerPort,\n                        ID :  'cloudserver',  // to cloud server itself, private protocol \n                    },\n            FROM : {\n                        DOMAIN : cloudServer,     // do not use homeserver's ip, because it is behind NAT,fill in cloudServer DOMAIN, \n                                            // indicate it is a private protocol \n                        PORT : cloudServerPort,\n                        ID :  'frontEndDevice',  // from home server, private protocol \n                    },\n            TYPE_OUTER : 'HEARTBEAT' ,\n            DATA : {\n                        TYPE_INNER : 'HEARTBEAT',\n                        PAYLOAD    : 'I miss you' \n                    }\n\n        }\n\n        sock_conn.send(JSON.stringify(pkg_obj))\n\n    }\n\n\nwebSocketEvents.isHeartBeatReceived = async () => {\n\n    // 1. if HeartBeat not received after a certain amount of time, means the connection between server and frontend lost\n    // close the existing websocket connection and create a new one \n\n        // if (heartBeat.getHeartBeatCnt() == 0) {\n        //     // reinitialized socket connection to cloud server as client \n        //     console.log('did not recieve heartbeat from cloud server, reinitializing websocket connection to cloud...')\n        //     sock_conn.close()\n        //     sock_conn = await initWebSocket(server, `${cloudServer}:${cloudServerPort}`)\n        // } else {\n        //     heartBeat.clearHeartBeatCnt();\n        // }\n    }\n\n// onmessage: ((this: WebSocket, ev: MessageEvent) => any) | null;\nwebSocketEvents.websocketOnMessage = (sock_conn, ev) => { \n\n    const msg = JSON.parse(ev.data)\n    // console.log(msg)\n\n    // switch(msg.DATA.TYPE) {\n    //     case 'HEARTBEAT' : \n\n    //         break ;\n    //     case 'RESPONSE' :  // response data from homeserver for get,post,put,delete, save the data in localstorage for 10s\n    //         const key = msg.DATA.PAYLOAD.KEY ;\n    //         const data = msg.DATA.PAYLOAD.DATA ;\n\n    //         localStorage.setItem(key,data)\n    //         const timerId = setTimeout(()=>{\n    //             clearTimeout(timerId);\n    //             localStorage.removeItem(key);\n    //         }, 10000) ; // 10s \n        \n    // }\n\n    /**\n     * public protocol \n     *     ___________________________________________ ___________\n     *    |      FROM     |  TO      |     DATA       |TYPE_OUTER |       \n     *    |_______________|__________|________________|___________|\n     *                               /                 \\\n     *                              /                   \\\n     *                             /_____________________\\\n     *                            |TYPE_INNER| PAYLOAD   |\n     *                            |__________|___________|\n     * \n     * \n     * \n     * socket_conn.send(JSON.stringify({\n            \"TO\" : {\n                \"URL\"    : \"websocket url+port\",\n                \"ID\"     : \"the ID of the contact on his cloud server,the destination domain may contain serveral family members\",  \n            },\n            \"FROM\" : {\n                \"URL\"    : \"websocket url+port\",\n                \"ID\"     : \"the ID of the sender on his cloud server,the source domain may contain serveral family members\", \n            },\n            \"TYPE_OUTER\" : \"HEARTBEAT\"\n            \"DATA\" : {\n                \"TYPE_INNER\"   : \"HEARTBEAT\",\n                \"PAYLOAD\":  \"IMU\" \n            }\n        }))\n    * */\n\n    proccessOuterLayerMsg( msg, sock_conn)\n\n}\n\nwebSocketEvents.websocketOnOpen = async(sock_conn, e) => {\n\n    console.log(\"on open, connection established\")\n\n    const to = {\n        DOMAIN : cloudServer,\n        PORT : cloudServerPort,\n        ID :  'cloudserver',  \n    };\n\n    const from = {\n        DOMAIN : cloudServer,    \n        PORT : cloudServerPort,\n        ID :  'frontEndDevice',  \n    };\n\n}\n\nwebSocketEvents.websocketOnError = (sock_conn, e,cb_fn) => {\n    console.log(e)\n    alert(`websocketOnError : ${e.reason}`)\n    return cb_fn\n}\n\nwebSocketEvents.websocketOnClose = (sock_conn, e,cb_fn) =>  {\n    console.log('disconnected from signaling server', e);\n    alert(`websocketOnClose : ${e.reason}`)\n    return cb_fn()\n}\n\nwebSocketEvents.clearTimerEvents = (arrOfTimerIds) => {\n\n    for (let i=0; i<arrOfTimerIds.length ; i++){\n        clearInterval(arrOfTimerIds[i])\n    }\n}\n\nexport default webSocketEvents\n\n","\n\n/**\n * \n * @param {*} timeInSec : T in seconds\n * \n * @param {*} return : not return value\n */\nconst asyncDelay = async (timeInSec) => {\n\n    return new Promise ((resolve,reject)=>{\n        return setTimeout(()=>{\n\n            return resolve() ;\n            \n        }, timeInSec * 1000 )\n    })\n\n}\n\nexport  default asyncDelay \n\n","import * as actionTypes from './actionTypes'\n\nimport {config_json} from '../../global_config'\nimport {\n    wsuri,\n} from \"../../ipconfig\"\n\nimport webSocketEvents from './utility/webSocketEvents'\nimport asyncDelay from '../../utility/asyncDelay';\n\nconst createWebsocket = (websocketConn) => {\n    return {\n      type: actionTypes.WEBSOCKET_CREATE ,\n      data: {\n        websocketConn : websocketConn\n      }\n    };\n};\n\nconst destroyWebsocket = () => {\n    return {\n      type: actionTypes.WEBSOCKET_DESTROY ,\n      data: {\n        websocketConn : null\n      }\n    };\n};\n\nconst selectContact = (selectedContact) => {\n\n  return {\n    type: actionTypes.WEBSOCKET_SELECT_CONTACT ,\n    data: {\n      isGroupChat : false,\n      isMyChatRoom : false,\n      isContactChat: true,\n      selectedContact : selectedContact\n    }\n  }\n\n}\n\nconst selectGroup = (selectedGroup) => {\n\n  return {\n    type: actionTypes.WEBSOCKET_SELECT_GROUP ,\n    data: {\n      isGroupChat : true,\n      isMyChatRoom : false ,\n      isContactChat: false,\n      selectedGroup : selectedGroup\n    }\n  }\n\n}\n\nconst selectChatRoom = (selectedChatRoom) => {\n\n  return { \n    type: actionTypes.WEBSOCKET_SELECT_MYCHATROOM ,\n    data: {\n      isGroupChat : false,\n      isMyChatRoom : true ,\n      isContactChat: false ,\n      selectedChatRoom : selectedChatRoom\n    }\n  }\n\n} \n\n\nconst setIsExpandChatMenu = (isExpandMenu) => {\n  return { \n    type: actionTypes.WEBSOCKET_SET_ISEXPANDMENU ,\n    data: {\n      isExpandMenu : isExpandMenu,\n    }\n  }\n}\n\nconst setNewMsgToggle = (newMsgReadyToggle) => {\n  return {\n    type : actionTypes.WEBSOCKET_NEWMESSAGE ,\n    data: {\n      newMsgReadyToggle: newMsgReadyToggle\n    }\n  }\n}\n\nconst setWebRTCmediaCallState = (mediaCallState) => {\n\n  return {\n    type : actionTypes.WEBRTC_SET_MEDIACALLSTATE ,\n    data: {\n      mediaCallState: mediaCallState\n    }\n  }\n}\n\nconst setWebRTCstreamRef = (localStream_ref , remoteStream_ref) => {\n  return {\n    type : actionTypes.WEBRTC_SET_STREAM_REF ,\n    data: {\n      localStream_ref  : localStream_ref,\n      remoteStream_ref : remoteStream_ref\n    }\n  }\n}\n\nconst setContactList = (allContactList_keyIsIpId) => {\n  return {\n    type : actionTypes.WEBSOCKET_SET_CONTACTLIST ,\n    data: {\n      allContactList_keyIsIpId : allContactList_keyIsIpId\n    }\n  }\n}\n\nconst setIsShowPanel = (isShowPanel) => {\n\n  return {\n    type : actionTypes.WEBSOCKET_SET_ISSHOWPANEL ,\n    data: {\n      isShowPanel : isShowPanel\n    }\n  }\n\n}\n\nexport const saveWebsocketConn2StoreAction =  (websocketConn) => {\n\n    return dispatch => {\n        dispatch(createWebsocket(websocketConn));\n    }\n\n}\n\nexport const destroyWebsocketAction = () => {\n    return dispatch => {\n        dispatch(destroyWebsocket());\n    }\n}\n\n\nexport const selectContactAction = (selectedContact) => {\n\n  return dispatch => {\n    dispatch(selectContact(selectedContact));\n  }\n\n}\n\nexport const selectGroupAction = (selectedGroup) => {\n\n  return dispatch => {\n    dispatch(selectGroup(selectedGroup));\n  }\n\n}\n\nexport const selectMyChatRoomAction = (selectedChatRoom) => {\n\n  return dispatch => {\n    dispatch(selectChatRoom(selectedChatRoom));\n  }\n\n}\n\nexport const setIsExpandChatMenuAction = (isExpandMenu) => {\n\n  return dispatch => {\n    dispatch(setIsExpandChatMenu(isExpandMenu));\n  }\n\n}\n\nexport const setNewMsgToggleAction = (newMsgReadyToggle) => {\n  return dispatch => {\n    dispatch(setNewMsgToggle(newMsgReadyToggle))\n  }\n}\n\nexport const setWebRTCmediaCallStateAction = (mediaCallState) => {\n  return dispatch => {\n    dispatch(setWebRTCmediaCallState(mediaCallState))\n  }\n}\n\nexport const setWebRTCstreamRefAction = (localStreamRef,remoteStreamRef) => {\n  return dispatch => {\n    dispatch(setWebRTCstreamRef(localStreamRef,remoteStreamRef))\n  }\n}\n\nexport const setContactListAction = (allContactList_keyIsIpId) => {\n  return dispatch => {\n    dispatch(setContactList(allContactList_keyIsIpId))\n  }\n}\n\nexport const setIsShowPanelAction = (isShowPanel) => {\n  return dispatch => {\n    dispatch(setIsShowPanel(isShowPanel))\n  }\n}\n\n\n\n\n","import React,{useState, useEffect} from 'react'\nimport './Profile.css'\n\nimport Item from '../sharedComponents/Item/Item'\nimport DropDown from '../sharedComponents/DropDown/DropDown'\nimport * as actionTypes from '../../../../store/auth/actionTypes'\nimport { connect } from 'react-redux';\nimport { \n    authCheckTokenVaidAction,\n    authLogoutAction\n    } from '../../../../store/auth/actions'\n\nimport {\n    destroyWebsocketAction\n        } from '../../../../store/websocket/actions'\n\nfunction Profile(props) {\n\n    const handleLogout = (e) => {\n        e.preventDefault();\n        props.authLogoutAction();\n    }\n\n    let children = '' ;\n\n\n    // useEffect(() => {\n        \n    //     alert(`loginStatus in profile ${props.loginStatus} ---in useEffect`)\n        \n    //     return () => {\n            \n    //     }\n    // }, [props.loginStatus])\n\n\n    if (props.loginStatus === actionTypes.LOGIN_STATUS_SUCCEED) {\n        children = (<DropDown menuName='Account' style={{color:'black'}} to='#'> \n                        <div className='logout item' onClick={(e)=>{handleLogout(e)}}>\n                            <Item style={{color:'white'}} to='/profile/login' itemName='logout'/>\n                        </div>\n                    </DropDown>)\n    } else {\n        children = (<DropDown menuName='Account' style={{color:'black'}} to='#'> \n                        <div className='login item'>\n                            <Item style={{color:'white'}} to='/profile/login' itemName='login'/>\n                        </div>\n                        <div className='register item'>\n                            <Item style={{color:'white'}} to='/profile/register' itemName='registration'/>\n                        </div>\n                    </DropDown>)\n    }\n\n    return (\n        <div className='profileMenuRoot'>\n            {children}\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        loginStatus: state.auth.status,\n    };\n  };\n  \n  const mapDispatchToProps = dispatch => {\n    return {\n        authCheckTokenVaidAction: () => dispatch(authCheckTokenVaidAction()),\n        authLogoutAction: () => dispatch(authLogoutAction()),\n    };\n  };\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n) (Profile)","import React from 'react'\nimport './ProjectRepo.css'\n\nimport Item from '../sharedComponents/Item/Item'\n\nfunction ProjectRepo() {\n    return (\n        <div className='projectRepoRoot'>\n            <Item style={{color:'black'}} to='/project' itemName='Project'/>\n        </div>\n    )\n}\n\nexport default ProjectRepo\n","import React from 'react'\nimport './ExpandRight.css'\n\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport {Link} from 'react-router-dom'\n\nfunction ExpandRight(props) {\n    return (\n        <div className='expandRightRoot'>\n\n            <input type='checkbox' id={props.menuName + props.ckeckboxID} />\n\n            <div className='aTagAndIcon'>\n                <Link to={props.to}>\n                    <span>{props.menuName}</span>\n                </Link>\n                <label className='iconWrapper' htmlFor={props.menuName + props.ckeckboxID}>\n                    <NavigateNextIcon style={{ color: 'rgb(220,220,220)', fontSize: \"20px\" }} />\n                </label>\n            </div>\n\n            <div className='menuContent'>\n                {props.children}\n            </div>\n        </div>\n    )\n}\n\nexport default ExpandRight\n","import React from 'react'\nimport './CourseMenu.css'\nimport DropDown from '../sharedComponents/DropDown/DropDown'\nimport Item from '../sharedComponents/Item/Item'\nimport ExpandRight from '../sharedComponents/ExpandRight/ExpandRight'\n\n\n\nfunction CourseMenu() {\n    return (\n        <div className='CourseMenuRoot'>\n            <DropDown menuName='Courses' style={{color:'black'}} to='/course'>\n                <div className='expand item'>\n                    <ExpandRight menuName='IT' style={{color:'white'}} to='/course'>\n                        <div className='blog item'>\n                            <Item style={{color:'white'}} to='/course' itemName='Javacript'/>\n                        </div>\n                        <div className='newblog item'>\n                            <Item style={{color:'white'}} to='/course' itemName='C Language'/>\n                        </div>\n                        <div className='newblog item'>\n                            <Item style={{color:'white'}} to='/course' itemName='Python'/>\n                        </div>\n                    </ExpandRight>\n                </div>\n                <div className='expand item'>\n                    <ExpandRight menuName='robotics' style={{color:'white'}} to='/course'>\n                        <div className='blog item'>\n                            <Item style={{color:'white'}} to='/course' itemName='slam'/>\n                        </div>\n                        <div className='newblog item'>\n                            <Item style={{color:'white'}} to='/course' itemName='visual slam'/>\n                        </div>\n                        <div className='newblog item'>\n                            <Item style={{color:'white'}} to='/course' itemName='VR'/>\n                        </div>\n                        <div className='newblog item'>\n                            <Item style={{color:'white'}} to='/course' itemName='AR'/>\n                        </div>\n                    </ExpandRight>\n                </div>\n                <div className='expand item'>\n                    <ExpandRight menuName='美術設計' style={{color:'white'}} to='/course'>\n                        <div className='blog item'>\n                            <Item style={{color:'white'}} to='/course' itemName='素描'/>\n                        </div>\n                        <div className='blog item'>\n                            <Item style={{color:'white'}} to='/course' itemName='山水'/>\n                        </div>\n                        <div className='blog item'>\n                            <Item style={{color:'white'}} to='/course' itemName='花鳥'/>\n                        </div>\n                    </ExpandRight>\n                </div>\n                <div className='blog item'>\n                    <Item style={{color:'white'}} to='/course' itemName='音樂'/>\n                </div>\n            </DropDown>\n        </div>\n    )\n}\n\nexport default CourseMenu\n","import React from 'react'\nimport './ContactUs.css'\n\nimport Item from '../sharedComponents/Item/Item'\n\nfunction ContactUs() {\n    return (\n        <div className='ContactUsMenuRoot'>\n            <Item style={{color:'black'}} to='/#' itemName='contact us'/>\n        </div>\n    )\n}\n\nexport default ContactUs\n","import React from 'react'\nimport './Contact.css'\n\nfunction Contact(props) {\n    return (\n        <div className='contactRoot'>\n            <div className='contactImageWrapper'>\n                <img src= {props.profileImg} />\n            </div>\n            <div className='nameAndNotification'>\n                <p className='name'>\n                    <span>{props.name}</span>\n                </p>\n                <p className='unReadMsgCnt'>\n                    <span>{props.unReadMsgCnt}</span>\n                </p>\n            </div>\n        </div>\n    )\n}\n\nexport default Contact\n","import React from 'react'\nimport './Group.css'\n\nfunction Group(props) {\n    return (\n        <div className='groupRoot'>\n            <div className='groupImageWrapper'>\n                <img src= {props.profileImg}  />\n            </div>\n            <div className='nameAndNotification'>\n                <p className='groupName'>{props.Name}</p>\n                <p className='notification'>{props.unReadMsgCnt}</p>\n            </div>\n        </div>\n    )\n}\n\nexport default Group\n","import React from 'react'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport './DropDownList.css'\n\nfunction DropDownList(props) {\n    return (\n        <div className='dropDownListRoot' >\n            <input type='checkbox' id={props.menuName + props.ckeckboxID} />\n\n            <div className='aTagAndIcon' >\n                <p className='aTag' style={props.style}>\n                    <span>{props.menuName}</span>\n                </p>\n                <label className='iconWrapper' htmlFor={props.menuName + props.ckeckboxID} style={props.style} onClick={props.cb}>\n                    <ExpandMoreIcon style={{ color: 'white', fontSize: \"20px\" }} />\n                </label>\n            </div>\n\n            <div className='menuContent' >\n                {props.children}\n            </div>\n        </div>\n    )\n}\n\nexport default DropDownList\n","import React,{useState} from 'react'\nimport './ContactCategorySel.css'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\n\nfunction ContactCategorySel(props) {\n\n    const [showMenu,setShowMenu] = useState(false)\n\n    /**\n     *  control dropdown menu via clicking at icon \n     */\n    const handleShowCategoryMenuOnClick = () => {\n        setShowMenu(!showMenu)\n    } \n\n    return (\n        <div className=\"contactCategorySelRoot\">\n            <div className='aTagAndIcon'>\n                <a  style={props.style}>\n                    <span>{props.menuName}</span>\n                </a>\n                <div className='iconWrapper'  onClick={handleShowCategoryMenuOnClick} >\n                    <ExpandMoreIcon style={{ color: 'black', fontSize: \"20px\" }} />\n                </div>\n            </div>\n\n            <div className='menuContent' style={{display: showMenu==true? 'block' : 'none'}} >\n                {props.children}\n            </div>\n        </div>\n    )\n}\n\nexport default ContactCategorySel\n","import React,{useState,useEffect} from 'react'\nimport Contact from '../Contact/Contact'\nimport Group  from '../Group/Group'\nimport './Panel.css'\nimport DropDownList from '../DropDownList/DropDownList'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport axios from 'axios'\nimport {contactEndPoint,\n        chatRoomEndPoint,\n        hostIP,\n        wsuri,\n        my_wsuri,\n        hostDomain\n    } from '../../../../../../ipconfig'\nimport {config_json} from '../../../../../../global_config'\nimport getSafeProperty from '../../../../../../utility/getSafeProperty'\nimport handleError from '../../../../../../utility/handleError'\nimport { connect } from 'react-redux';\nimport { \n    authCheckTokenVaidAction,\n    authLogoutAction\n    } from '../../../../../../store/auth/actions'\n\nimport { \n    selectContactAction,\n    selectGroupAction,\n    selectMyChatRoomAction,\n    setContactListAction,\n    setIsShowPanelAction\n    } from '../../../../../../store/websocket/actions'\n    \nimport * as actionType  from '../../../../../../store/auth/actionTypes'\nimport asyncDelay from '../../../../../../utility/asyncDelay'\nimport ContactCategorySel from './ContactCategorySel/ContactCategorySel'\nimport getSafePropertyWithAlert from '../../../../../../utility/getSafePropertyWithAlert'\nimport AddIcon from '@material-ui/icons/Add';\n\nimport {\n    selectedContactObj,\n    selectedGroupObj,\n    selectedChatroomObj,      \n    allContactObj,\n    allGroupObj,\n    allChatroomObj,\n    me      \n} from '../../../../../NavigationBar/Menu/PeersChatMenu/websocket/globalVar'\n\n\nfunction Panel(props) {\n\n    const fileName = \"Panel.js\"\n\n\n    const [newContact,setNewContact] = useState({\n                                            socketUrl: wsuri,\n                                            id:  'HanMeiMei',\n                                            name  :  \"韓梅梅\",\n                                            image  : \"meihua.png\",\n                                            category_id: 0 ,\n                                            categoryArrayIndex: '',\n                                            token2AccessHim : '',\n                                            tokenAssigned2Him : ''\n                                        })\n\n    const [joinGroup,setJoinGroup] = useState({\n                                            socketUrl: wsuri,\n                                            id:  'MeiGroup',\n                                            name  :  \"韓梅梅\",\n                                            image  : \"meihua.png\",\n                                        })\n\n    const [createGroup,setCreateGroup] = useState({\n                                            roomName:  'MeiGroup',\n                                            image  : \"meihua.png\",\n                                        })\n\n    const [isAddContactShown,setIsAddContactShown] = useState(false)\n    const [isAddGroupShown,setIsAddGroupShown] = useState(false)\n    const [isCreateGroupShown,setIsCreateGroupShown] = useState(false)\n    const [contactCategory,setContactCategory] = useState([])\n    const [groupArray,setGroupArray] = useState([])\n    const [chatRoomArray,setChatRoomArray] = useState([])\n    const [sbDeCnt,setSbDeCnt] = useState(1)  // since React does not detect deep copied data(like loong long long array) status, need a \n                                              // signal to force the re-render,just pass it to an irrelivent html variable like (key+some number)\n                                              // so when the html variable changes states,it will automatically triger a re-render\n    const [contactCategoryMenuControl,setContactCategoryMenuControl] = useState([])  // each array item decides whether the corresponding category to be unfold or not\n    const [selectedCategory,setSelectedCategory] = useState()\n    const [newCategoryName,setNewCategoryName] = useState()\n\n\n\n    /**\n     * *****************************************************************************************************\n     *   initilization at component creationg\n     * \n     * *****************************************************************************************************\n     */\n    useEffect(() => {\n        \n        // setup the callback functions to assign value to the global object values \n        selectedContactObj.setSelectedContact_CB = handleSelectContact2Chat\n        selectedGroupObj.setSelectedGroup_CB = handleSelectGroup2Chat\n        selectedChatroomObj.setSelectedChatroom_CB = handleSelectMyGroup2Chat\n\n        // all contact, all group, all chatroom global object, set callback function\n        allGroupObj['setAllGroup_CB'] = setAllGroup_CB \n        allChatroomObj['setAllChatroom_CB'] = setAllChatroom_CB \n\n        // webRTC_global\n        // webRTC_global.setIsIncallStoreAction_cb = props.setisInMediaCallAction \n\n        // get all contact list from backend \n        // getAllContactList();\n        \n        return () => {\n            \n        }\n    }, [])\n    \n\n    /**\n     * \n     *  const allContactObj = {\n            allContact : null ,\n            setAllContact_CB : null \n        }\n     *  sectAllContact_CB \n     */\n\n    /**\n     * \n     *  const allContactObj = {\n            allContact : null ,\n            setAllContact_CB : null \n        }\n     *  sectAllContact_CB \n     */\n\n    const setAllGroup_CB = (allGroup) => {\n        allGroupObj.allGroup = allGroup\n    }\n\n    /**\n     * \n     *  const allContactObj = {\n            allContact : null ,\n            setAllContact_CB : null \n        }\n     *  sectAllContact_CB \n     */\n\n    const setAllChatroom_CB = (allChatroom) => {\n        allChatroomObj.allChatroom = allChatroom\n    }\n    \n    /**\n     * *****************************************************************************************************\n     *   getContactCategoryItemList : get the contact category array\n     * *****************************************************************************************************\n     */\n    const getContactCategoryItemList = () => {\n        const funcName = getContactCategoryItemList.name\n\n        axios\n        .get(`${contactEndPoint}/category`,\n                config_json  \n            )\n        .then( res => {\n            const querySet = getSafePropertyWithAlert(()=>res.data.querySet,fileName,funcName)\n\n            for(let i=0; i<querySet.length; i++){\n                contactCategoryMenuControl.push(false)\n            }\n            setContactCategoryMenuControl(contactCategoryMenuControl)\n            \n            setContactCategory(querySet)\n\n            const querySetLen = getSafePropertyWithAlert(()=>querySet.length,fileName,funcName)\n            if (querySetLen != 0) {\n                const selectedCategory = getSafePropertyWithAlert(()=>querySet[0],fileName,funcName)\n                setSelectedCategory(selectedCategory.name)\n                // intially set selected category to be the first one in the list \n                newContact.categoryArrayIndex = 0 \n                newContact.category_id = selectedCategory.id\n                setNewContact(newContact)\n            }\n\n        })\n        .catch(error => {\n\n            handleError(error,fileName,funcName,\"getContactCategoryItemList\",props.authLogoutAction)\n            \n        })\n\n    }\n\n\n    /**\n     * *****************************************************************************************************\n     *   getContactListByCategory  : get contact array from backend server for the selected category\n     * \n     * @param { * contactCategory[index], this is needed for updating the Array accordingly,contactCategory[index].contactArray = querySet } index   \n     * @param {* category_id = contactCategory[index].id } category_id \n     * \n     *\n     * *****************************************************************************************************\n     */\n    const getContactListByCategory = (index, category_id)  => {\n\n        const funcName = \"getContactListByCategory\"\n\n        const token = localStorage.getItem('token')\n        const url = `${contactEndPoint}/?token=${token}&category_id=${category_id}`\n\n        axios\n        .get(url,\n                config_json  \n            )\n        .then( res => {\n\n            const querySet = getSafeProperty(()=>res.data.querySet, undefined)\n            if (querySet  == undefined) {\n                alert('@Panel.js getItemList , querySet is undefined')\n            }\n\n            contactCategory[index].contactArray = querySet\n            setContactCategory(contactCategory)\n\n        })\n        .catch(error => {\n\n            handleError(error,\"Panel.js\",\"getContactCategoryItemList\",props.authLogoutAction)\n        })\n    }\n\n    \n\n     /**\n     * *****************************************************************************************************\n     *   getGroupItemList : get the group list from backend server\n     * \n     * *****************************************************************************************************\n     */\n    const getGroupItemList = () => {\n        const token = localStorage.getItem('token')\n        axios\n        .get(`${contactEndPoint}/group?token=${token}`,\n                config_json  \n            )\n        .then( res => {\n            const querySet = getSafeProperty(()=>res.data.querySet, undefined)\n            if (querySet  == undefined) {\n                alert('@Panel.js getGroupItemList , querySet is undefined')\n            }\n            // console.log(\"getGroupItemList = \", querySet)\n            setGroupArray(querySet)\n\n        })\n        .catch(error => {\n\n            handleError(error,\"Panel.js\",\"getGroupItemList\",props.authLogoutAction)\n            \n        })\n\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   getMyChatRoomList : get my chat room list from backend server\n     * \n     * *****************************************************************************************************\n     */\n    const getMyChatRoomList = () => {\n\n        const functionName = \"getMyChatRoomList\"\n\n        const token = localStorage.getItem('token')\n        axios\n        .get(`${chatRoomEndPoint}?token=${token}`,\n                config_json  \n            )\n        .then( res => {\n            const querySet = getSafeProperty(()=>res.data.querySet, undefined)\n            if (querySet  == undefined) {\n                alert(`@${fileName}, ${functionName} querySet is undefined`)\n            }\n            setChatRoomArray(querySet)\n\n        })\n        .catch(error => {\n\n            handleError(error,fileName,functionName)\n            \n        })\n\n    }\n     /**\n     * *****************************************************************************************************\n     *   handleAddNewContactRequest : add new contact to backend server\n     * \n     * *****************************************************************************************************\n     */\n    const handleAddNewContactRequest = async (e) => {\n        e.preventDefault();\n\n        const functionName = \"handleAddNewContactRequest\"\n\n        console.log(fileName, functionName,\"newContact = \",newContact)\n\n        props.authCheckTokenVaidAction()\n        const token = localStorage.getItem('token')\n\n        const formDataObj = {\n            name : newContact.name,\n            hisID : newContact.id ,\n            webSocketUrl : newContact.socketUrl,\n            image : newContact.image,\n            category_id : newContact.category_id,\n            tokenAssigned2Him : newContact.tokenAssigned2Him,\n            token2AccessHim : newContact.token2AccessHim\n        }\n\n        console.log(fileName, functionName,\"formDataObj = \",formDataObj)\n\n        axios\n        .post(`${contactEndPoint}?token=${token}`,\n                                    JSON.stringify(formDataObj),\n                                    config_json  \n                                    )\n        .then( res => {\n            // if no error return, update the new category list \n            getContactListByCategory(newContact.categoryArrayIndex,newContact.category_id)\n        })\n        .catch(error => {\n            handleError(error,fileName,functionName,props.authLogoutAction)\n        })\n\n        await asyncDelay(0.3)\n        if (sbDeCnt > 2000){\n            setSbDeCnt(1000)\n        } else {\n            setSbDeCnt(sbDeCnt + 1)\n        }\n\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleOnChangeAddNewContact : handles the input form data onchange when trying to add new contact\n     * \n     * *****************************************************************************************************\n     */\n    const handleOnChangeAddNewContact = (e) => {\n        e.preventDefault()\n        const name = e.target.name ;\n        const value = e.target.value ;\n        setNewContact( {...newContact , ...{[name] : value}})\n    }\n    \n    /**\n     * *****************************************************************************************************\n     *   handleOnChangeAddNewGroup : handles the input form data onchange when trying to add new group\n     * \n     * *****************************************************************************************************\n     */\n    const handleOnChangeAddNewGroup = (e) => {\n        e.preventDefault()\n        const name = e.target.name ;\n        const value = e.target.value ;\n        setJoinGroup( {...joinGroup , ...{[name] : value}})\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleOnChangeAddNewGroup : handles the input form data onchange when trying to add new group\n     * \n     * *****************************************************************************************************\n     */\n    const handleOnChangeCreateGroup = (e) => {\n        e.preventDefault()\n        const name = e.target.name ;\n        const value = e.target.value ;\n        setCreateGroup( {...createGroup , ...{[name] : value}})\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleOnClickShowAddContact : controls the drop down menu of adding new contact\n     * \n     * *****************************************************************************************************\n     */\n    const handleOnClickShowAddContact = () => {\n        setIsAddContactShown(!isAddContactShown)\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleOnExpandContactListSection : when click on the expand icon, fetech contact category list from backend server ,\n     *   similar to fetching contact data of certain category, await for 0.3sec, and update key of html to force \n     *   re-render when data is ready\n     * \n     * *****************************************************************************************************\n     */\n    const handleOnExpandContactListSection = async () => {\n\n        if (props.login_status == actionType.LOGIN_STATUS_SUCCEED){\n            // validate if token still valid, keep it as an usual routine before requesting private data from backend. \n            props.authCheckTokenVaidAction() \n            getContactCategoryItemList()\n\n            await asyncDelay(0.3)\n\n            if (sbDeCnt > 2000){\n                setSbDeCnt(1)\n            } else {\n                setSbDeCnt(sbDeCnt + 1)\n            }\n        } else {\n            \n        }\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleOnExpandGroupList : when click on the expand icon, fetech group list from backend server ,\n     *   similar to fetching contact data of certain category, await for 0.3sec, and update key of html to force \n     *   re-render when data is ready\n     * \n     * *****************************************************************************************************\n     */\n    const handleOnExpandGroupList = async () => {\n\n        if (props.login_status == actionType.LOGIN_STATUS_SUCCEED){\n            // validate if token still valid, keep it as an usual routine before requesting private data from backend. \n            props.authCheckTokenVaidAction() \n            getGroupItemList()\n\n            await asyncDelay(0.3)\n\n            if (sbDeCnt > 2000){\n                setSbDeCnt(1000)\n            } else {\n                setSbDeCnt(sbDeCnt + 1)\n            }\n        } else {\n            setGroupArray([])\n        }\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleOnExpandMyChatRoomList : \n     * *****************************************************************************************************\n     */\n    const handleOnExpandMyChatRoomList = async () => {\n\n        if (props.login_status == actionType.LOGIN_STATUS_SUCCEED){\n            // validate if token still valid, keep it as an usual routine before requesting private data from backend. \n            props.authCheckTokenVaidAction() \n            getMyChatRoomList()\n\n            await asyncDelay(0.3)\n\n            if (sbDeCnt > 2000){\n                setSbDeCnt(1000)\n            } else {\n                setSbDeCnt(sbDeCnt + 1)\n            }\n        } else {\n            setChatRoomArray([])\n        }\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleOnClickShowAddGroup : controls the drop down menu of adding new group\n     * \n     * *****************************************************************************************************\n     */\n    const handleOnClickShowAddGroup = () => {\n        setIsAddGroupShown(!isAddGroupShown)\n\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleOnClickShowCreateGroup : controls the drop down menu of adding new group\n     * \n     * *****************************************************************************************************\n     */\n    const handleOnClickShowCreateGroup = () => {\n        setIsCreateGroupShown(!isCreateGroupShown)\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleOpenMenuCallBack : click to open the contact list under the selected category\n     * \n     * @param {*} index \n     * @param {*} category_id \n     * \n     * *****************************************************************************************************\n     */\n    const handleOpenMenuCallBack = async (index,category_id) => {\n\n        console.log(index,category_id)\n\n        contactCategoryMenuControl[index] = !contactCategoryMenuControl[index] // unfold or fold the selected category\n        setContactCategoryMenuControl(contactCategoryMenuControl)\n\n        if (props.login_status == actionType.LOGIN_STATUS_SUCCEED){\n            // validate if token still valid, keep it as an usual routine before requesting private data from backend. \n            props.authCheckTokenVaidAction() \n\n            getContactListByCategory(index, category_id)  // get the contact list under the clicked category\n\n            await asyncDelay(0.3);  // wait 0.3s, since currently I don't know how to trigger allback function \n                                    // after the state has changed\n                                    // 感覺像是一個bug，大的數據改變之後怎麼去啓動回調函數？\n                                    // \n                                    /**    問題： \n                                     *      contactCategory[index].contactArray = querySet\n                                     * \n                                     *     // useEffect(() => {\n\n                                            //     console.log(\"contactCategory , change detected .....\")\n\n                                            //     return () => {\n                                                    \n                                            //     }\n                                            // }, [contactCategory])\n\n                                            不懂內部觸發機制，contactCategory[index].contactArray這種深層拷貝的數據變化似乎是比較難用簡單的\n                                            數據對比來做回調函數的觸發，本身大量數據對比就是一個很好時間的過程。沒有程序的中斷機制，這應該是一個javascrip無法\n                                            解決的問題？？？？！\n\n                                            這裏採用一種瞎折騰的方式，先等一點時間，0.3s,然後再用計數器的方式，改變html的key的值，強迫它重新render。如此，強迫rener時\n                                            數據應該就更新完成了。\n                                     */\n\n            if (sbDeCnt > 2000){\n                setSbDeCnt(1)\n            } else {\n                setSbDeCnt(sbDeCnt + 1)\n            }\n\n        }\n\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleSelectCategoryToNewContact  : select the category name for a new contact \n     * \n     * @param { * category model in database: id, name } category   \n     * @param { * index in the category Array for this category selected  } index \n     * \n     *\n     * *****************************************************************************************************\n     */\n    const handleSelectCategoryToNewContact = (category,index) => {\n\n        console.log(category, index)\n        \n        setSelectedCategory(category.name)\n        newContact.categoryArrayIndex = index \n        newContact.category_id = category.id\n        setNewContact(newContact)\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleAddNewCategoryOnInputChange \n     * \n     * *****************************************************************************************************\n     */\n    const handleAddNewCategoryOnInputChange = (e) => {\n        e.preventDefault()\n        const value = e.target.value ;\n        setNewCategoryName(value)\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleSubmitAddNewContactCategoryToserver \n     * \n     * *****************************************************************************************************\n     */\n    const handleSubmitAddNewContactCategoryToserver = () => {\n        const functionName = \"handleSubmitAddNewContactCategoryToserver\"\n\n        props.authCheckTokenVaidAction()\n        const token = localStorage.getItem('token')\n\n        const formDataObj = {\n            name : newCategoryName\n        }\n\n        axios\n        .post(`${contactEndPoint}/category?token=${token}`,\n                                    JSON.stringify(formDataObj),\n                                    config_json  \n                                    )\n        .then( res => {\n            // if no error return, update the new category list \n            getContactCategoryItemList()\n        })\n        .catch(error => {\n            handleError(error,fileName,functionName,props.authLogoutAction)\n        })\n\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleAddNewGroupRequest \n     * \n     * *****************************************************************************************************\n     */\n    const handleAddNewGroupRequest = async (e) => {\n        e.preventDefault();\n\n        const functionName = \"handleAddNewGroupRequest\"\n\n        props.authCheckTokenVaidAction()\n        const token = localStorage.getItem('token')\n\n        const formDataObj = {\n            name : joinGroup.name,\n            hisID : joinGroup.id ,\n            webSocketUrl : joinGroup.socketUrl,\n            image : joinGroup.image,\n        }\n\n        axios\n        .post(`${contactEndPoint}/group?token=${token}`,\n                                    JSON.stringify(formDataObj),\n                                    config_json  \n                                    )\n        .then( res => {\n            // if no error return, update the new category list \n            getGroupItemList()\n        })\n        .catch(error => {\n            handleError(error,fileName,functionName,props.authLogoutAction)\n        })\n\n        await asyncDelay(0.3)\n        if (sbDeCnt > 2000){\n            setSbDeCnt(1000)\n        } else {\n            setSbDeCnt(sbDeCnt + 1)\n        }\n    }\n\n\n    /**\n     * *****************************************************************************************************\n     *   handleCreateNewGroupRequest \n     * \n     * *****************************************************************************************************\n     */\n    const handleCreateNewGroupRequest = async (e) => {\n        e.preventDefault();\n\n        const functionName = \"handleCreateNewGroupRequest\"\n\n        props.authCheckTokenVaidAction()\n        const token = localStorage.getItem('token')\n\n        const formDataObj = {\n            roomName : createGroup.roomName,\n            image    : createGroup.image,\n        }\n\n        axios\n        .post(`${chatRoomEndPoint}/?token=${token}`,\n                                    JSON.stringify(formDataObj),\n                                    config_json  \n                                    )\n        .then( res => {\n            // if no error return, update the new category list \n            getMyChatRoomList()\n        })\n        .catch(error => {\n            handleError(error,fileName,functionName,props.authLogoutAction)\n        })\n\n        await asyncDelay(0.3)\n        if (sbDeCnt > 2000){\n            setSbDeCnt(1000)\n        } else {\n            setSbDeCnt(sbDeCnt + 1)\n        }\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleSelectContact2Chat:  select the contact to chat with, set the selected contact so in other \n     *   view can change the view accordingly  \n     * \n     * *****************************************************************************************************\n     */\n\n    const handleSelectContact2Chat = (selectedContact) => {\n        selectedContactObj.selectedContact = selectedContact\n        props.selectContactAction(selectedContact)\n        props.setIsShowPanelAction(false) // show chat view instead of panel of contact and group list\n    }\n\n    /**\n     * *****************************************************************************************************\n     *   handleSelectGroup2Chat:  select the group to chat with, set the selected contact so in other \n     *   view can change the view accordingly  \n     * \n     * *****************************************************************************************************\n     */\n    const handleSelectGroup2Chat = (selectedGroup) => {\n        props.selectGroupAction(selectedGroup)\n        props.setIsShowPanelAction(false) // show chat view instead of panel of contact and group list\n    }\n\n    useEffect(() => {\n        selectedContactObj.selectedGroup = props.selectedGroup // assign to global variable for websocket function to get access to\n        return () => {\n            \n        }\n    }, [props.selectedGroup])\n\n\n    /**\n     * *****************************************************************************************************\n     *   handleSelectMyGroup2Chat:  select the chatroom I have create to chat with, set the selected contact so in other \n     *   view can change the view accordingly  \n     * \n     * *****************************************************************************************************\n     */\n    const handleSelectMyGroup2Chat = (selectedChatRoom) => {\n        props.selectMyChatRoomAction(selectedChatRoom)\n        props.setIsShowPanelAction(false) // show chat view instead of panel of contact and group list\n    }\n\n    useEffect(() => {\n        selectedContactObj.selectedChatRoom = props.selectedChatRoom // assign to global variable for websocket function to get access to\n        return () => {\n            \n        }\n    }, [props.selectedChatRoom])\n\n\n    /**\n     * *****************************************************************************************************\n     *   update the new massage notification icon when new message comes in\n     * \n     * *****************************************************************************************************\n     */\n    useEffect(() => {\n        \n        return () => {\n            \n        }\n    }, [props.newMsgReadyToggle])\n\n\n    return (\n\n        <div className='panelRoot'>\n            <input className='searchBar' type='text' placeholder='Search' />\n            <div className=\"whoAmI\">\n                <div className=\"myImageWrapper\">\n                    {<img src={me.userImage} alt=\"\" />}\n                </div>\n                <p className=\"userName\"> {me.myUserName} </p>\n            </div>\n\n            <div className='contactListWrapper'>\n                <DropDownList menuName='Contact' style={{color:'white'}} cb={handleOnExpandContactListSection}>\n                    {/* ***********************************  add new contact ******************************* */}\n                    <div className='addNewContact categoryWrapper'>\n                        <div className='titleNicon'>\n                            <p className='title'><span>add contact</span></p>\n                            <div className='iconWrapper' onClick={handleOnClickShowAddContact}>\n                                <ExpandMoreIcon style={{ color: 'white', fontSize: \"20px\" }} />\n                            </div>\n                        </div>\n                        <form \n                            className='dropDownContent' \n                            onSubmit={handleAddNewContactRequest} \n                            autoComplete=\"off\"\n                            style={{display: isAddContactShown == true ? 'block':'none'}}\n                        >\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>ws url</span>\n                                </div>\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={newContact.socketUrl} \n                                        name='socketUrl' \n                                        placeholder='the socketURL'\n                                        onChange = {handleOnChangeAddNewContact}\n                                    />\n                                </div> \n                            </div>\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>ID</span>\n                                </div>\n\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={newContact.id} \n                                        name='id' \n                                        placeholder='name or ID'\n                                        onChange = {handleOnChangeAddNewContact}\n                                    />\n                                </div>\n                            </div>\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>name</span>\n                                </div>\n\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={newContact.name} \n                                        name='name' \n                                        placeholder='name'\n                                        onChange = {handleOnChangeAddNewContact}\n                                    />\n                                </div>\n                            </div>\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>image</span>\n                                </div>\n\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={newContact.image} \n                                        name='image' \n                                        placeholder='image url of newContact'\n                                        onChange = {handleOnChangeAddNewContact}\n                                    />\n                                </div>\n                            </div>\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>token1</span>\n                                </div>\n\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={newContact.token2AccessHim} \n                                        name='token2AccessHim' \n                                        placeholder='token to access contact'\n                                        onChange = {handleOnChangeAddNewContact}\n                                    />\n                                </div>\n                            </div>\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>token2</span>\n                                </div>\n\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={newContact.tokenAssigned2Him} \n                                        name='tokenAssigned2Him' \n                                        placeholder='token given to contact'\n                                        onChange = {handleOnChangeAddNewContact}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* *******************  select category or add new category to a new contact ********************** */}\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>category</span>\n                                </div>\n                                <div className='inputWrapper'>\n                                    <ContactCategorySel \n                                        menuName = {selectedCategory}\n                                    >\n                                        {\n                                            contactCategory.map((category,index)=>(\n                                                <p className=\"contactCategorySel_item\" \n                                                    key={index}\n                                                    onClick = {()=>(handleSelectCategoryToNewContact(category,index))}\n                                                >\n                                                    <span>{category.name}</span>\n                                                </p>\n                                            ))\n                                        }\n                                        <div className=\"addNewCategory contactCategorySel_item\">\n                                            <div className='addNewCategoryInputWrapper'>\n                                                <input \n                                                    type='text' \n                                                    value={newCategoryName} \n                                                    name='newCategoryName' \n                                                    placeholder='input a new category'\n                                                    onChange = {handleAddNewCategoryOnInputChange}\n                                                />\n                                            </div>\n                                            <div className=\"AddiconWrapper\" onClick={handleSubmitAddNewContactCategoryToserver}>\n                                                <AddIcon style={{ color: 'white', fontSize: \"20px\" }} />\n                                            </div>\n                                        </div>\n                                    </ContactCategorySel>\n                                </div>\n                            </div>\n\n                            <div className='submitBottonWrapper'>\n                                <input type='submit' value='add' />\n                            </div>\n                        </form>\n                    </div>\n                    \n                    {/* **********************************  Contact list  ********************************* */}\n                    {\n                        contactCategory.map((item,index) => (\n                                                                <div className='categoryWrapper' key={index} >\n                                                                    <div className=\"nameNicoWrapper\">\n                                                                        <p className='menuName' style={{color:'white'}}><span>{item.name}</span></p>\n                                                                        <div className='iconWrapper' onClick = {()=>(handleOpenMenuCallBack(index,item.id))}>\n                                                                            <ExpandMoreIcon style={{ color: 'white', fontSize: \"20px\" }} />\n                                                                        </div>\n                                                                    </div>\n                                                                    <div className=\"dropDownClick\" style={{display: contactCategoryMenuControl[index] == false? 'none' : 'block'}} >\n                                                                        {\n                                                                            item.contactArray.map((contact,contact_index) => (\n                                                                            <div className='contact' key={contact_index + sbDeCnt } onClick={()=>{handleSelectContact2Chat(contact)}}>\n                                                                                <Contact \n                                                                                    profileImg= {contact.image} \n                                                                                    name={contact.name} \n                                                                                    unReadMsgCnt = {10}\n                                                                                />\n                                                                            </div>))\n                                                                        }\n                                                                    </div>\n                                                                </div>)\n                                                            )\n                    }\n                </DropDownList>\n            </div>\n\n            {/*  *************************************************  group   ****************************************************  */}\n\n            {/* **************** join group ******************** */}\n            <div className='groupListWrapper contactListWrapper' >\n                <DropDownList menuName='Group' style={{color:'white'}} cb={handleOnExpandGroupList}>\n                    <div className='addNewContact categoryWrapper'>\n                        <div className='titleNicon'>\n                            <p className='title'><span>join group</span></p>\n                            <div className='iconWrapper' onClick={handleOnClickShowAddGroup}>\n                                <ExpandMoreIcon style={{ color: 'white', fontSize: \"20px\" }} />\n                            </div>\n                        </div>\n                        <form \n                            className='dropDownContent' \n                            onSubmit={handleAddNewGroupRequest} \n                            autoComplete=\"off\"\n                            style={{display: isAddGroupShown == true ? 'block':'none'}}\n                        >\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>ws url</span>\n                                </div>\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={joinGroup.socketUrl} \n                                        name='url' \n                                        onChange = {handleOnChangeAddNewGroup}\n                                    />\n                                </div> \n                            </div>\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>ID</span>\n                                </div>\n\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={joinGroup.id} \n                                        name='id' \n                                        placeholder='name or ID'\n                                        onChange = {handleOnChangeAddNewGroup}\n                                    />\n                                </div>\n                            </div>\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>name</span>\n                                </div>\n\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={joinGroup.name} \n                                        name='name' \n                                        placeholder='name'\n                                        onChange = {handleOnChangeAddNewGroup}\n                                    />\n                                </div>\n                            </div>\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>image</span>\n                                </div>\n\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={joinGroup.image} \n                                        name='image' \n                                        placeholder='image url of group'\n                                        onChange = {handleOnChangeAddNewGroup}\n                                    />\n                                </div>\n                            </div>\n                    \n                            <div className='submitBottonWrapper'>\n                                <input type='submit' value='add' />\n                            </div>\n                        </form>\n                    </div>\n\n                    {/* **************************************  Group list  **************************************** */}\n\n                    {\n                        groupArray.map((group,index)=>(\n                            <div className='group' key={index + sbDeCnt} onClick = {() => handleSelectGroup2Chat(group)} >\n                                <Group profileImg= {group.image}\n                                    Name= {group.name}\n                                    unReadMsgCnt='10'\n                                />\n                            </div>\n                        ))\n                    }\n\n\n                    \n                    \n                </DropDownList>\n            </div>\n        \n            {/* **************** my chat room ******************** */}\n            <div className='groupListWrapper contactListWrapper' >\n                <DropDownList menuName='MyGroup' style={{color:'white'}} cb={handleOnExpandMyChatRoomList}>\n                    {/* **************** create my chat room ******************** */}\n                    <div className='addNewContact categoryWrapper'>\n                        <div className='titleNicon'>\n                            <p className='title'><span> create group</span></p>\n                            <div className='iconWrapper' onClick={handleOnClickShowCreateGroup}>\n                                <ExpandMoreIcon style={{ color: 'white', fontSize: \"20px\" }} />\n                            </div>\n                        </div>\n                        <form \n                            className='dropDownContent' \n                            onSubmit={handleCreateNewGroupRequest} \n                            autoComplete=\"off\"\n                            style={{display: isCreateGroupShown == true ? 'block':'none'}}\n                        >\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>name</span>\n                                </div>\n\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={createGroup.roomName} \n                                        name='roomName' \n                                        placeholder='room name'\n                                        onChange = {handleOnChangeCreateGroup}\n                                    />\n                                </div>\n                            </div>\n                            <div className='wrapper'>\n                                <div className='title'>\n                                    <span>image</span>\n                                </div>\n\n                                <div className='inputWrapper'>\n                                    <input \n                                        type='text' \n                                        value={createGroup.image} \n                                        name='image' \n                                        placeholder='image'\n                                        onChange = {handleOnChangeCreateGroup}\n                                    />\n                                </div>\n                            </div>\n                    \n                            <div className='submitBottonWrapper'>\n                                <input type='submit' value='create' />\n                            </div>\n                        </form>\n                    </div>\n \n                    {/* ************************************** my Group list  **************************************** */}\n\n                    {\n                        chatRoomArray.map((group,index)=>(\n                            <div className='group' key={index + sbDeCnt} onClick = {() => handleSelectMyGroup2Chat(group)} >\n                                <Group profileImg= {group.image}\n                                    Name= {group.roomName}\n                                    unReadMsgCnt='10'\n                                />\n                            </div>\n                        ))\n                    }\n\n                </DropDownList>\n            </div>\n        \n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        login_status: state.auth.status ,\n        isTokenValid: state.auth.isTokenValid,\n        newMsgReadyToggle : state.websocket.newMsgReadyToggle,\n        selectedContact   : state.websocket.selectedContact,\n        selectedChatRoom  : state.websocket.selectedChatRoom,\n        selectedGroup     : state.websocket.selectedGroup\n    };\n};\n  \n  \nconst mapDispatchToProps = dispatch => {\n    return {\n        authCheckTokenVaidAction: () => dispatch(authCheckTokenVaidAction()),\n        authLogoutAction: () => dispatch(authLogoutAction()),\n        selectContactAction: (selectedContact) => dispatch(selectContactAction(selectedContact)),\n        selectGroupAction: (selectedGroup) => dispatch(selectGroupAction(selectedGroup)),\n        selectMyChatRoomAction : (selectedMyChatRoom) => dispatch(selectMyChatRoomAction(selectedMyChatRoom)),\n        setContactListAction : (allContactList_keyIsIpId) =>  dispatch(setContactListAction(allContactList_keyIsIpId)),\n        setIsShowPanelAction : (isShowPanel) => dispatch(setIsShowPanelAction(isShowPanel))\n    };\n  };\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n) (Panel)\n\n","export const WEBSOCKET_MEDIACALL_STATE_IDLE = \"idle\"\nexport const WEBSOCKET_MEDIACALL_STATE_INVIDEOCALL = \"inVideoCall\"\nexport const WEBSOCKET_MEDIACALL_STATE_INVOICECALL = \"inVoiceCall\"\nexport const WEBSOCKET_MEDIACALL_STATE_MEDIACALLRECEIVED = \"mediaCallReceived\"\n\n","/**\n * 用此方法的原因：\n * useEffect 中无法使用 await来等待一条程序执行完，\n * 在比较深层的父子组件中传递callback函数比较麻烦\n */\nimport getSafePropertyWithAlert from './../../../../../utility/getSafePropertyWithAlert'\nimport {\n    selectedContactObj,\n    me,\n} from './globalVar'\nimport {my_wsuri} from '../../../../../ipconfig'\nimport * as mediaCallStateTypes from '../../../../../store/websocket/webSocketState'\n\nconst fileName = 'global_webRTC.js'\n\n\nconst closeCall = async () => {\n\n    console.log(\"Closing the call\");\n\n    // Close the RTCPeerConnection\n\n    if (webRTC_inst_obj.webRTC_inst) {\n\n        console.log(\"closing webRTC_inst ...\")\n        webRTC_inst_obj.whoAmI = ''\n\n      // Disconnect all our event listeners; we don't want stray events\n      // to interfere with the hangup while it's ongoing.\n\n      webRTC_inst_obj.webRTC_inst.ontrack = null;\n      webRTC_inst_obj.webRTC_inst.onnicecandidate = null;\n      webRTC_inst_obj.webRTC_inst.oniceconnectionstatechange = null;\n      webRTC_inst_obj.webRTC_inst.onsignalingstatechange = null;\n      webRTC_inst_obj.webRTC_inst.onicegatheringstatechange = null;\n      webRTC_inst_obj.webRTC_inst.onnotificationneeded = null;\n\n      // Stop all transceivers on the connection\n\n      webRTC_inst_obj.webRTC_inst.getTransceivers().forEach(transceiver => {\n        transceiver.stop();\n      });\n      console.log(\"Transceivers closed ...\")\n\n      // Stop the webcam preview as well by pausing the <video>\n      // element, then stopping each of the getUserMedia() tracks\n      // on it.\n\n      if(webRTC_inst_obj.localStream){\n        webRTC_inst_obj.localStream.getTracks().forEach(track => {\n            track.stop();\n          });\n      }\n\n      console.log(\"local stream closed ...\")\n\n      if(webRTC_inst_obj.remoteStream){\n        webRTC_inst_obj.remoteStream.getTracks().forEach(track => {\n            track.stop();\n          });\n      }\n\n      console.log(\"remote stream closed ...\")\n\n      // Close the peer connection\n      webRTC_inst_obj.webRTC_inst.close();\n      webRTC_inst_obj.webRTC_inst = null;\n      webRTC_inst_obj.localStream = null;\n      webRTC_inst_obj.remoteStream = null;\n      \n    }\n\n  }\n\nconst createPeerConnection = async () => {\n\n    await closeCall()\n    \n    const webRTC_inst = new RTCPeerConnection({\n        iceServers: [     // Information about ICE servers - Use your own!\n            {\n                urls : 'stun:stun.l.google.com:19302'\n            }\n        ]\n    });\n\n\n    webRTC_inst.onicecandidate = handleICECandidateEvent\n    webRTC_inst.ontrack = handleTrackEvent;\n    webRTC_inst.onnegotiationneeded = handleNegotiationNeededEvent;\n    webRTC_inst.oniceconnectionstatechange = handleICEConnectionStateChangeEvent;\n    webRTC_inst.onicegatheringstatechange = handleICEGatheringStateChangeEvent;\n    webRTC_inst.onsignalingstatechange = handleSignalingStateChangeEvent;\n\n    webRTC_inst_obj.webRTC_inst = webRTC_inst \n}\n\n\nexport const webRTC_inst_obj = {\n\n    webRTC_inst : '',\n    socket_conn : '',\n    localStream : '',\n    remoteStream : '',\n    localVideoCom_ref : '',\n    remoteVideoCom_ref : '',\n    closeCall          :  closeCall ,\n    whoAmI             : '' ,  // 'caller' / 'callee', only assign value at click call or at receiving offer\n    mediaCallState     : mediaCallStateTypes.WEBSOCKET_MEDIACALL_STATE_IDLE ,\n\n    // methods \n    createPeerConnection : createPeerConnection,\n\n}\n\nconst sendMsg = async (type_inner,payload) => {\n    // 注意此處是被註冊的回調函數調用的，所以要記住，裡面的變量如果不是全局變量，都是註冊時傳遞的值，不會實時改變\n    // 因爲js沒有指針一說，所以要用全局變量的土法子來傳遞值。不要用props.socket_conn之類的信號，註冊時都是空。\n    const functionName = \"sendMsg(payload)\"\n\n    if (!payload){\n        alert(\"empty input detected\")\n        return\n    }\n\n    const selectedContact = selectedContactObj.selectedContact \n\n    if (!webRTC_inst_obj.socket_conn) {\n        alert(`in ${fileName},function ${functionName}, websocketConn is empty, please connect to server via websocket`)\n        return\n    }\n\n    let webSocketReadyState = getSafePropertyWithAlert(()=>webRTC_inst_obj.socket_conn.readyState,fileName,functionName,'')\n    console.log(webSocketReadyState)\n    /**\n                Value\t     State\t                   Description\n                0\t         CONNECTING\t               Socket has been created. The connection is not yet open.\n                1\t         OPEN\t                   The connection is open and ready to communicate.\n                2\t         CLOSING\t               The connection is in the process of closing.\n                3\t         CLOSED\t                   The connection is closed or couldn't be opened.\n    */\n    // if (webSocketReadyState != 1){\n    //     alert(\"refresh the page to connect to server again\")\n    //     webRTC_inst_obj.socket_conn.close()\n    //     webRTC_inst_obj.socket_conn = ''\n    //     // distroy websocket to make sure websocketConn is null,otherwise cannot create a new one,logic lock!!!\n\n    //     return\n    // }\n\n    console.log(`selectedContact.webSocketUrl = ${selectedContact.webSocketUrl}, selectedContact.hisID = ${selectedContact.hisID}  `)\n    console.log(`selectedContact.webSocketUrl = ${selectedContact.webSocketUrl}, selectedContact.hisID = ${selectedContact.hisID}  `)\n\n    webRTC_inst_obj.socket_conn.send(JSON.stringify({\n        TO : {\n            \"URL\"    :  selectedContact.webSocketUrl,  // the websocket url+port to connect to \n            \"ID\"     : `${selectedContact.hisID}`,       // his id or unique name on his server \n        },\n        FROM : {\n            \"URL\"    : my_wsuri,\n            \"ID\"     : me.myUserName , \n            \"CATEGORY\": \"CONTACT\"\n        },\n        TYPE_OUTER : \"MSG\" ,\n        DATA : {    // data can be encrypted from peerDevice-to-peerDevice\n            \"TYPE_INNER\"   : type_inner,  \n            \"PAYLOAD\":  payload \n        }\n    }))\n}\n\n\nconst handleICECandidateEvent = (event) => {\n\n    if (event.candidate) {\n        /**\n         * receive candidate from the Ice server\n         * send the local ice candidate to remote peer \n         */\n        const IceCandidate = new RTCIceCandidate(event.candidate);\n        console.log(\"handleICECandidateEvent, receive local icecandidates, and send it to remote peer\")\n\n        webRTC_inst_obj.myIceCandidate = IceCandidate \n\n        sendMsg('candidate',IceCandidate)  \n    \n    }\n\n}\n\n\nconst handleTrackEvent = (event) =>  {\n    console.log(\"****** handleTrackEvent.......\")\n    /**\n     * When new tracks are added to the RTCPeerConnection— \n     * either by calling its addTrack() method or \n     * because of renegotiation of the stream's format\n     */\n    console.log (\"*******************************************************\")\n    console.log (\"*******************************************************\")\n    console.log (\"******* got new stream from remote peer\",event.streams[0])\n    console.log (\"*******************************************************\")\n    console.log (\"*******************************************************\")\n\n    // get remote stream display on html page\n    // this.$refs.remoteCamRef.srcObject = event.streams[0]  ;\n\n    // this.remoteStream = event.streams[0];\n    // this.updateRemoteStream = !this.updateRemoteStream;\n    webRTC_inst_obj.remoteVideoCom_ref.current.srcObject = event.streams[0] ;\n    webRTC_inst_obj.remoteStream = event.streams[0]\n\n    // add remote stream to html element \n\n}\n\n\nconst handleNegotiationNeededEvent = async () => {\n\n    /**\n     * Once the caller has created its  RTCPeerConnection, \n     * created a media stream, and added its tracks to the connection as \n     * shown in Starting a call, the browser will deliver a negotiationneeded\n     *  event to the RTCPeerConnection to indicate that it's ready to begin\n     *  negotiation with the other peer\n     *  当添加新的媒体源时，就生成新的offer，告诉对方自己available的视频的格式，\n     */\n\n    console.log(\"******* handleNegotiationNeededEvent\")\n    if (webRTC_inst_obj.whoAmI !== 'caller'){\n        alert('you must be a caller to trigger handleNegotiationNeededEvent, check webRTC logic flow')\n    }\n    \n    let offer \n    try {\n        offer = await webRTC_inst_obj.webRTC_inst.createOffer();\n        await webRTC_inst_obj.webRTC_inst.setLocalDescription(offer);\n        \n    } catch(e) {\n        console.log(e)\n        alert(e)\n        return ;\n    }\n    // sent offer to other peer over signaling channel \n    sendMsg('offer', offer)\n\n}\n\n\nconst handleICEConnectionStateChangeEvent = (event) => {\n    console.log(\"******* handleICEConnectionStateChangeEvent\")\n    switch(webRTC_inst_obj.webRTC_inst.iceConnectionState) {\n        case \"closed\":\n        case \"failed\":\n        case \"disconnected\":\n            closeCall();\n            break;\n    }\n}\n\n\nconst handleICEGatheringStateChangeEvent = (event) => {\n    /**\n     * icegatheringstatechange events are used \n     * to let you know when the ICE candidate gathering \n     * process state changes\n     */\n    // Our sample just logs information to console here,\n    // but you can do whatever you need.\n    console.log(\"****** handleICEGatheringStateChangeEvent\")\n}\n\n\nconst handleSignalingStateChangeEvent = (event) =>  {\n    console.log(\"***** handleSignalingStateChangeEvent\")\n    switch(webRTC_inst_obj.webRTC_inst.signalingState) {\n        case \"closed\":\n            closeCall();\n            break;\n    }\n}\n\n\n\n\n\n","import React,{useEffect,useState,useRef} from 'react'\nimport VideoCallIcon from '@material-ui/icons/VideoCall';\nimport PermPhoneMsgIcon from '@material-ui/icons/PermPhoneMsg';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport AttachmentIcon from '@material-ui/icons/Attachment';\nimport EmojiEmotionsIcon from '@material-ui/icons/EmojiEmotions';\nimport SendIcon from '@material-ui/icons/Send';\nimport { connect } from 'react-redux';\nimport { \n    destroyWebsocketAction,\n    setWebRTCmediaCallStateAction,\n    setWebRTCstreamRefAction,\n    setIsShowPanelAction\n    } from '../../../../../../../store/websocket/actions'\nimport { \n    authLogoutAction,\n    authCheckTokenVaidAction\n    } from '../../../../../../../store/auth/actions'\nimport {my_wsuri} from '../../../../../../../ipconfig'\nimport * as actionType  from '../../../../../../../store/auth/actionTypes'\nimport * as webSocketState from '../../../../../../../store/websocket/webSocketState'\nimport asyncDelay from '../../../../../../../utility/asyncDelay'\nimport getSafePropertyWithAlert from '../../../../../../../utility/getSafePropertyWithAlert'\nimport getSafeProperty from '../../../../../../../utility/getSafeProperty'\n\nimport './ChatAreaContact.css'\nimport { AlternateEmail } from '@material-ui/icons';\nimport {msgsContactObj,\n    selectedContactObj,\n    auth_Global\n} from '../../../../../../NavigationBar/Menu/PeersChatMenu/websocket/globalVar'\nimport {\n    webRTC_inst_obj\n} from '../../../../../../NavigationBar/Menu/PeersChatMenu/websocket/global_webRTC'\nimport axios from \"axios\";\nimport {messageEndPoint} from '../../../../../../../ipconfig'\nimport handleError from '../../../../../../../utility/handleError'\nimport PhoneEnabledIcon from '@material-ui/icons/PhoneEnabled';\nimport PhoneDisabledIcon from '@material-ui/icons/PhoneDisabled';\nimport ReplyIcon from '@material-ui/icons/Reply';\n\n\nfunction ChatAreaContact(props) {\n\n    const [textEditable,setTextEditable] = useState(true)\n    const [inputValue,setInputValue] = useState([])\n    const inputeditableRef = useRef(null)\n    const [profileImg,setProfileImg] = useState('meihua.png')\n    const [profileName,setProfileName] = useState(\"韩梅梅\")\n    const [sayUsayMe,setSayUsayMe] = useState(\"IMU\")\n    const [msgArray,setMsgArray] = useState([])\n    const [isCallStarter,setIsCallStarter] = useState(false)\n\n\n    const [selectedContact,setSelectedContact] = useState(props.selectedContact)\n\n    const messageAreaRef = useRef(null)\n\n    const fileName = \"ChatAreaContact.js\"\n\n    const messageDirection = {\n        incoming : true ,\n        outgoing : false ,\n    }\n\n    const remoteStreamRef =  useRef(null)\n    const localStreamRef  =  useRef(null)\n\n    const [media_area_div,setMedia_area_div]= useState('')\n\n    useEffect(() => {\n\n        const keydownHandler = (e) => {\n            if(e.keyCode===13 && e.ctrlKey) {\n                handleSendMessage(e)\n            }\n        }\n\n        props.setWebRTCstreamRefAction(localStreamRef,remoteStreamRef)\n        webRTC_inst_obj.remoteVideoCom_ref = remoteStreamRef ;\n        webRTC_inst_obj.localVideoCom_ref = localStreamRef ;\n\n        document.addEventListener('keydown', keydownHandler)\n\n        return () => {\n            document.removeEventListener('keydown', keydownHandler)\n        }\n\n    }, [])\n\n\n    /**\n     * public protocol : message data layout\n     *     _______________________________________________________________\n     *    |      FROM     |  TO      |     DATA                |TYPE_OUTER |       \n     *    |_______________|__________|_________________________|___________|\n     *                               /                          \\\n     *                              /                            \\\n     *                             /______________________________\\\n     *                            |TYPE_INNER| PAYLOAD   | MSG_ID  |\n     *                            |__________|___________|_________|\n     * \n     * \n     * \n     * \n     * socket_conn.send(JSON.stringify({\n            \"TO\" : {\n                \"URL\"    : \"websocket url+port\",\n                \"ID\"     : \"the ID of the selectedContact on his cloud server,the destination domain may contain serveral family members\",  \n            },\n            \"FROM\" : {\n                \"URL\"    : \"websocket url+port\",\n                \"ID\"     : \"the ID of the sender on his cloud server,the source domain may contain serveral family members\", \n                \"CATEGORY\" : \"Group\"\n            },\n            \"TYPE_OUTER\" : \"HEARTBEAT\"\n            \"DATA\" : {\n                \"TYPE_INNER\"   : \"HEARTBEAT\",\n                \"PAYLOAD\":  \"IMU\" \n            }\n        }))\n    * */\n\n\n    const sendMsg = async (type_inner,payload) => {\n        const functionName = \"sendMsg(payload)\"\n\n        if (!payload){\n            alert(\"empty input detected\")\n            return\n        }\n\n        props.authCheckTokenVaidAction()\n        await asyncDelay(1)\n        if(props.login_status !== actionType.LOGIN_STATUS_SUCCEED){\n            alert(\"please log in\")\n            return\n        }\n\n        if (!webRTC_inst_obj.socket_conn) {\n            alert(`in ${fileName},function ${functionName}, websocketConn is empty, please connect to server via websocket`)\n            return\n        }\n\n        let webSocketReadyState = getSafePropertyWithAlert(()=>webRTC_inst_obj.socket_conn.readyState,fileName,functionName,'')\n        console.log(webSocketReadyState)\n        /**\n                    Value\t     State\t                   Description\n                    0\t         CONNECTING\t               Socket has been created. The connection is not yet open.\n                    1\t         OPEN\t                   The connection is open and ready to communicate.\n                    2\t         CLOSING\t               The connection is in the process of closing.\n                    3\t         CLOSED\t                   The connection is closed or couldn't be opened.\n        */\n        if (webSocketReadyState != 1){\n            webRTC_inst_obj.socket_conn.close()\n            props.destroyWebsocketAction()\n            alert(\"refresh the page to connect to server again\")\n            // distroy websocket to make sure webRTC_inst_obj.socket_conn is null,otherwise cannot create a new one,logic lock!!!\n            return\n        }\n\n        const selectedContact = selectedContactObj.selectedContact\n        // const selectedContact = props.selectedContact\n\n        webRTC_inst_obj.socket_conn.send(JSON.stringify({\n            TO : {\n                \"URL\"    :  selectedContact.webSocketUrl,  // the websocket url+port to connect to \n                \"ID\"     : `${selectedContact.hisID}`,       // his id or unique name on his server \n            },\n            FROM : {\n                \"URL\"    : my_wsuri,\n                \"ID\"     : `${props.myUserName}`, \n                \"CATEGORY\": \"CONTACT\"\n            },\n            TYPE_OUTER : \"MSG\" ,\n            DATA : {    // data can be encrypted from peerDevice-to-peerDevice\n                \"TYPE_INNER\"   : type_inner,  \n                \"PAYLOAD\":  payload \n            }\n        }))\n    }\n\n    const handleOnInput = (e) => {\n        // console.log(inputeditableRef.current.innerHTML)\n        // console.log(inputeditableRef.current.clientHeight)\n        // setInputMsg(inputeditableRef.current.innerHTML)\n    }\n\n    const handleSendMessage = (e) => {\n        // const textContent = (inputeditableRef.current.innerText || inputeditableRef.current.textContent)\n        // console.log(inputeditableRef.current.innerHTML)\n\n        sendMsg('MSG',inputeditableRef.current.innerHTML)\n        inputeditableRef.current.innerHTML = ''\n        \n    }\n\n    useEffect(() => {\n        const functionName = \"useEffect[props.newMsgReadyToggle]\"\n\n        const msgArrayOfTheContact = getSafeProperty(()=> msgsContactObj.msgsContact[`${props.selectedContact.webSocketUrl}+${props.selectedContact.hisID}`] , undefined)\n        \n        if (props.mediaCallState === webSocketState.WEBSOCKET_MEDIACALL_STATE_IDLE) {\n            messageAreaRef.current.innerHTML = '' \n            if (msgArrayOfTheContact != undefined){\n                // const msgArrayReversed = msgArrayOfTheContact.slice().reverse()\n                const msgArrayReversed = msgArrayOfTheContact\n                for (let i=0; i<msgArrayReversed.length; i++){\n                    let divMsgWrapper = document.createElement(\"div\");\n                    if ( msgArrayReversed[i]['direction']== messageDirection.incoming){\n                        divMsgWrapper.className = \"incomingMsg\"\n                    } else if(msgArrayReversed[i]['direction']== messageDirection.outgoing) {\n                        divMsgWrapper.className = \"outgoingMsg\"\n                    }\n                    let divMsg = document.createElement(\"div\");\n                    divMsg.className = \"msg\"\n                    divMsg.innerHTML = msgArrayReversed[i]['MSG'];  \n                    divMsgWrapper.appendChild(divMsg)\n                    messageAreaRef.current.appendChild(divMsgWrapper)\n                }\n                // setMsgArray(msgArrayOfTheContact.slice().reverse())\n            }\n        } \n        \n        return () => {\n            \n        }\n    }, [props.newMsgReadyToggle])\n\n\n    // get the Last pageLen message\n    const fetchLastNMsg_contact = (contact_id,user_id,his_webSocketUrl,hisID) => {\n        const functionName = 'fetchLastNMsg_contact'\n    \n        const token=localStorage.getItem('token')\n    \n        const query = {\n            params : {\n                contact_id: contact_id, // which contact this message belongs to\n                user_id: user_id  ,\n                token:    token   ,         // \n                status:  'all' ,         // 'read/unread/all'\n                offset:        0  ,  // for pagination purposes,the starting id of the messages\n                pageLen : 30       , // number of messages in one query action \n            }\n        } \n        // equevalent to localhost:3000/message/contact?contact_id=10\n    \n        axios\n        .get(`${messageEndPoint}/contact`,\n                query \n            )\n        .then( res => {\n    \n            const data = getSafePropertyWithAlert(()=>res.data,fileName,functionName,\"\")\n    \n            // 1.2 save the message \n            // otherwise create a new one (should be pulling latest N messages including the unread ones)\n    \n            msgsContactObj.msgsContact[`${his_webSocketUrl}+${hisID}`] = data.querySet\n    \n            // toggle the signal to force re-render\n            msgsContactObj.newMsgToggleSignalFn(!msgsContactObj.newMsgReadyToggle)\n            \n        })\n        .catch(error => {\n    \n            handleError(error,fileName,functionName)\n    \n        })\n    }\n\n    const fetechUnreadMsg_contact = (contact_id,user_id,his_webSocketUrl,hisID) => {\n        const functionName = 'fetchLastNMsg_contact'\n    \n        const token=localStorage.getItem('token')\n    \n        const query = {\n            params : {\n                contact_id: contact_id, // which contact this message belongs to\n                user_id: user_id  ,\n                token:    token   ,         // \n                status:  'unread' ,         // 'read/unread/all'\n                offset:        0  ,  // for pagination purposes,the starting id of the messages\n                pageLen : 0       , // number of messages in one query action \n            }\n        } \n        // equevalent to localhost:3000/message/contact?contact_id=10\n    \n        axios\n        .get(`${messageEndPoint}/contact`,\n                query \n            )\n        .then( res => {\n    \n            const data = getSafePropertyWithAlert(()=>res.data,fileName,functionName,\"\")\n    \n            // 1.2 save the message \n            // otherwise create a new one (should be pulling latest N messages including the unread ones)\n            const unReadMsgArray = data.querySet.slice().reverse()\n            unReadMsgArray.push(...msgsContactObj.msgsContact[`${his_webSocketUrl}+${hisID}`])\n    \n            msgsContactObj.msgsContact[`${his_webSocketUrl}+${hisID}`] = unReadMsgArray\n    \n            // toggle the signal to force re-render\n            msgsContactObj.newMsgToggleSignalFn(!msgsContactObj.newMsgReadyToggle)\n            \n        })\n        .catch(error => {\n    \n            handleError(error,fileName,functionName)\n    \n        })\n    }\n\n\n    useEffect(() => {\n        \n        const selectedContact = props.selectedContact\n\n        if (props.mediaCallState === webSocketState.WEBSOCKET_MEDIACALL_STATE_IDLE) {\n            messageAreaRef.current.innerHTML = ''\n        }\n\n        //when switch another contact\n        if (msgsContactObj.msgsContact.hasOwnProperty(`${selectedContact.webSocketUrl}+${selectedContact.hisID}`) == true){\n            // 1.1 if local message exist,go get unread message\n            fetechUnreadMsg_contact(selectedContact.id,selectedContact.user_id,selectedContact.webSocketUrl,selectedContact.hisID)\n            // toggle the signal to force re-render\n            // msgsContactObj.newMsgToggleSignalFn(!msgsContactObj.newMsgReadyToggle)\n        } else {\n            // 1.2 else go fetch from backend database \n            fetchLastNMsg_contact(selectedContact.id,selectedContact.user_id,selectedContact.webSocketUrl,selectedContact.hisID)\n        }\n\n        return () => {\n            \n        }\n\n    }, [props.selectedContact])\n\n\n    const handleGetUserMediaError = (e) => {\n        switch(e.name) {\n            case \"NotFoundError\":\n                alert(\"Unable to open your call because no camera and/or microphone\" +\n                        \"were found.\");\n                break;\n            case \"SecurityError\":\n                break ;\n\n            case \"PermissionDeniedError\":\n\n                // Do nothing; this is the same as the user canceling the call.\n                break;\n            default:\n                alert(\"Error opening your camera and/or microphone: \" + e.message);\n                break;\n        }\n\n    }\n\n    const onClickMakeVideoCall = async () => {\n        if (props.mediaCallState !== webSocketState.WEBSOCKET_MEDIACALL_STATE_IDLE) {\n            alert(\"still in call,please hand off current call before start a new call\")\n            return\n        }\n\n        props.setWebRTCmediaCallStateAction(webSocketState.WEBSOCKET_MEDIACALL_STATE_INVIDEOCALL)\n\n        await onClickMakeMeidaCall(true)\n    }\n\n    const onClickMakeMeidaCall = async (isVideoTrue) => {\n        \n        // 1. initialize a new webRTC connection instance \n        webRTC_inst_obj.whoAmI = 'caller'\n        await webRTC_inst_obj.createPeerConnection()\n\n        // 2. assign remote and local video component to global_webRTC's remote_video_ref and local_video_ref,so that \n        // the incoming stream and local stream will be displayed accordingly \n        \n        \n        // 3. get local media add to localdesciption \n        // get local media \n        const mediaConstraints = {\n            'video': isVideoTrue,\n            'audio': true\n        };\n        let localStream ;\n        try {\n            localStream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\n        } catch (e) {\n            // console.log(e)\n            handleGetUserMediaError(e);\n            return;\n        }\n        webRTC_inst_obj.localStream = localStream\n\n        // 4.  addtrack,so that it will trigger handleNegotiationNeededEvent\n        localStreamRef.current.srcObject = localStream ;\n\n        for (const track of localStream.getTracks()){\n            await webRTC_inst_obj.webRTC_inst.addTrack(track,localStream);\n        }\n\n        // 5. in handleNegotiationNeededEvent callback function generate offer ,send it to other peer \n\n\n        // 6. wait for answer and move forward from there\n    }\n\n    const onClickMakeAudioCall = async () => {\n\n        if(props.mediaCallState !== webSocketState.WEBSOCKET_MEDIACALL_STATE_IDLE){\n            alert(\"still in call,please hand off current call before start a new call\")\n            return \n        }\n        props.setWebRTCmediaCallStateAction(webSocketState.WEBSOCKET_MEDIACALL_STATE_INVOICECALL)\n\n        await onClickMakeMeidaCall(false)\n    }\n\n    const handleAcceptVideoCall = () => {\n        // if(props.mediaCallState !== webSocketState.WEBSOCKET_MEDIACALL_STATE_IDLE){\n        //     // to do : change from voic call to vedio call on the fly \n        //     alert(\"still in call,please hand off current call before start a new call\")\n        //     return \n        // }\n        props.setWebRTCmediaCallStateAction(webSocketState.WEBSOCKET_MEDIACALL_STATE_INVIDEOCALL)\n        webRTC_inst_obj.mediaCallState = webSocketState.WEBSOCKET_MEDIACALL_STATE_INVIDEOCALL\n    }\n\n    const handleAcceptCall = () => {\n        // if(props.mediaCallState !== webSocketState.WEBSOCKET_MEDIACALL_STATE_IDLE){\n        //     // to do : change from video call to voice call on the fly \n        //     alert(\"still in call,please hand off current call before start a new call\")\n        //     return \n        // }\n        props.setWebRTCmediaCallStateAction(webSocketState.WEBSOCKET_MEDIACALL_STATE_INVOICECALL)\n        webRTC_inst_obj.mediaCallState = webSocketState.WEBSOCKET_MEDIACALL_STATE_INVOICECALL\n    }\n\n    const handleDenyCall = async () => {\n\n        await webRTC_inst_obj.closeCall()\n\n        props.setWebRTCmediaCallStateAction(webSocketState.WEBSOCKET_MEDIACALL_STATE_IDLE)\n        webRTC_inst_obj.mediaCallState = webSocketState.WEBSOCKET_MEDIACALL_STATE_IDLE\n\n    }\n\n    const onClickGo2Panel = () => {\n        props.setIsShowPanelAction(true) // go to panel view\n    }\n\n    console.log(\"mediaCallState = \", props.mediaCallState)\n    \n    const media_area_video =    <div className='videoCallArea' style={{display : props.mediaCallState !== webSocketState.WEBSOCKET_MEDIACALL_STATE_IDLE ? 'grid' : 'none' }} >\n                                    <div className=\"remoteWindow\">\n                                        <video className=\"remoteStreamVideo\" ref={remoteStreamRef} autoPlay></video>\n                                    </div>\n                                    <div className=\"localWindow\">\n                                        <video className=\"localStreamVideo\" ref={localStreamRef} autoPlay></video>\n                                    </div>\n                                    \n                                    <div className=\"acceptVideo\" onClick={handleAcceptVideoCall}>\n                                        <VideoCallIcon style={{ color: 'green', fontSize: \"30px\" }} />\n                                    </div>\n                                    <div className=\"answer\" onClick={handleAcceptCall}>\n                                        <PhoneEnabledIcon style={{ color: 'green', fontSize: \"30px\" }} />\n                                    </div>\n                                    <div className=\"deny\" onClick={handleDenyCall}>\n                                        <PhoneDisabledIcon style={{ color: 'red', fontSize: \"30px\" }} />\n                                    </div>\n                                </div>\n\n    const media_area_txt = <div className='messageArea' ref={messageAreaRef} style={{display : props.mediaCallState === webSocketState.WEBSOCKET_MEDIACALL_STATE_IDLE ?  'flex' : 'none'}}></div>\n    \n    return (\n        <div className='chatAreaContactRoot'>\n            <div className='contactProfile'>\n                <div className='profileImg'>\n                    <img src={props.selectedContact.image}  />\n                </div>\n                <p className='contactName'>\n                    {props.selectedContact.name}\n                </p>\n                <a className='sayUsayMe'\n                    href=\"#\"\n                >\n                    {sayUsayMe}\n                </a>\n                <div className='videoCall' onClick={onClickMakeVideoCall}>\n                    <VideoCallIcon style={{ color: 'white', fontSize: \"25px\" }} />\n                </div>\n                <div className='voiceCall' onClick={onClickMakeAudioCall}>\n                    <PermPhoneMsgIcon style={{ color: 'white', fontSize: \"25px\" }} />\n                </div>\n                <div className='voiceCall' onClick={onClickGo2Panel}>\n                    <ReplyIcon style={{ color: 'white', fontSize: \"25px\" }} />\n                </div>\n                <div className='more'>\n                    <MoreVertIcon style={{ color: 'white', fontSize: \"25px\" }} />\n                </div>\n            </div>\n\n            {media_area_video}\n            {media_area_txt}\n\n            <div className='textInput'>\n                <div className='sendFileIcon'>\n                    <AttachmentIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n                <div \n                    className='typeTextHere' \n                    contentEditable={textEditable}\n                    onInput={handleOnInput}\n                    ref={inputeditableRef}\n                >\n\n                </div>\n                <div className='emoji'>\n                    <EmojiEmotionsIcon style={{ color: 'rgb(235, 228, 137)', fontSize: \"30px\" }} />\n                </div>\n                <div className='sendIcon' onClick={handleSendMessage}>\n                    <SendIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n            </div>\n        </div>\n\n    )\n}\n\n\n// websocketConn\n\nconst mapStateToProps = state => {\n    return {\n        login_status: state.auth.status ,\n        isTokenValid: state.auth.isTokenValid,\n        websocketConn: state.websocket.websocketConn,\n        myUserName : state.auth.myUserName,\n        toggleSignal : state.websocket.toggleSignal,\n        newMsgReadyToggle : state.websocket.newMsgReadyToggle,\n        selectedContact : state.websocket.selectedContact,\n        mediaCallState :state.websocket.mediaCallState\n    };\n  };\n  \n  \nconst mapDispatchToProps = dispatch => {\n    return {\n        authLogoutAction : () => dispatch(authLogoutAction()),\n        authCheckTokenVaidAction: () => dispatch(authCheckTokenVaidAction()),\n        destroyWebsocketAction: () => dispatch(destroyWebsocketAction()),\n        setWebRTCmediaCallStateAction : (mediaCallState) => dispatch(setWebRTCmediaCallStateAction(mediaCallState)),\n        setWebRTCstreamRefAction : (localStreamRef,remoteStreamRef) => dispatch(setWebRTCstreamRefAction(localStreamRef,remoteStreamRef)),\n        setIsShowPanelAction : (isShowPanel) => dispatch(setIsShowPanelAction(isShowPanel))\n    };\n  };\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n) (ChatAreaContact)","import React,{useEffect,useState,useRef} from 'react'\nimport VideoCallIcon from '@material-ui/icons/VideoCall';\nimport PermPhoneMsgIcon from '@material-ui/icons/PermPhoneMsg';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport AttachmentIcon from '@material-ui/icons/Attachment';\nimport EmojiEmotionsIcon from '@material-ui/icons/EmojiEmotions';\nimport SendIcon from '@material-ui/icons/Send';\nimport './ChatAreaGroup.css'\n\nfunction ChatAreaGroup(props) {\n\n    const [textEditable,setTextEditable] = useState(true)\n    const [inputValue,setInputValue] = useState([])\n    const inputeditableRef = useRef(null)\n    const [profileImg,setProfileImg] = useState('meihua.png')\n    const [profileName,setProfileName] = useState(\"韩梅梅\")\n    const [sayUsayMe,setSayUsayMe] = useState(\"IMU\")\n\n    useEffect(() => {\n        setProfileImg('meihua.png')\n        setProfileName('韩梅梅groupChat')\n        setSayUsayMe('IMU')\n        return () => {\n            \n        }\n    }, [])\n\n\n    useEffect(() => {\n\n        return () => {\n            \n        }\n    }, [props.toggleSignal])\n\n\n    const handleOnInput = (e) => {\n        // console.log(inputeditableRef.current.innerHTML)\n        // console.log(inputeditableRef.current.clientHeight)\n    }\n\n\n    return (\n        <div className='chatAreaGroupRoot'>\n            <div className='contactProfile'>\n                <div className='profileImg'>\n                    <img src={profileImg} width='50px'  height='50px' />\n                </div>\n                <p className='contactName'>\n                    {profileName}\n                </p>\n                <a className='sayUsayMe'\n                    href=\"#\"\n                >\n                    {sayUsayMe}\n                </a>\n                <div className='videoCall'>\n                    <VideoCallIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n                <div className='voiceCall'>\n                    <PermPhoneMsgIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n                <div className='more'>\n                    <MoreVertIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n            </div>\n            <div className='messageArea'>\n\n            </div>\n            <div className='textInput'>\n                <div className='sendFileIcon'>\n                    <AttachmentIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n                <div \n                    className='typeTextHere' \n                    contentEditable={textEditable}\n                    onInput={handleOnInput}\n                    ref={inputeditableRef}\n                >\n\n                </div>\n                <div className='emoji'>\n                    <EmojiEmotionsIcon style={{ color: 'rgb(235, 228, 137)', fontSize: \"30px\" }} />\n                </div>\n                <div className='sendIcon'>\n                    <SendIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n            </div>\n        </div>\n\n    )\n}\n\nexport default ChatAreaGroup\n\n\n","import React,{useEffect,useState,useRef} from 'react'\nimport VideoCallIcon from '@material-ui/icons/VideoCall';\nimport PermPhoneMsgIcon from '@material-ui/icons/PermPhoneMsg';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport AttachmentIcon from '@material-ui/icons/Attachment';\nimport EmojiEmotionsIcon from '@material-ui/icons/EmojiEmotions';\nimport SendIcon from '@material-ui/icons/Send';\nimport './ChatAreaMyGroup.css'\nimport { selectMyChatRoomAction } from '../../../../../../../store/websocket/actions';\n\n\nfunction ChatAreaMyGroup(props) {\n\n    const [textEditable,setTextEditable] = useState(true)\n    const [inputValue,setInputValue] = useState([])\n    const inputeditableRef = useRef(null)\n    const [profileImg,setProfileImg] = useState('meihua.png')\n    const [profileName,setProfileName] = useState(\"韩梅梅\")\n    const [sayUsayMe,setSayUsayMe] = useState(\"IMU\")\n\n\n\n    const handleOnInput = (e) => {\n        // console.log(inputeditableRef.current.innerHTML)\n        // console.log(inputeditableRef.current.clientHeight)\n    }\n\n    return (\n        <div className='chatAreaMyGroupRoot'>\n            <div className='contactProfile'>\n                <div className='profileImg'>\n                    <img src={props.MyChatRoom.image} width='50px'  height='50px' />\n                </div>\n                <p className='contactName'>\n                    {props.MyChatRoom.roomName}\n                </p>\n                <a className='sayUsayMe'\n                    href=\"#\"\n                >\n                    {sayUsayMe}\n                </a>\n                <div className='videoCall'>\n                    <VideoCallIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n                <div className='voiceCall'>\n                    <PermPhoneMsgIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n                <div className='more'>\n                    <MoreVertIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n            </div>\n            <div className='messageArea'>\n\n            </div>\n            <div className='textInput'>\n                <div className='sendFileIcon'>\n                    <AttachmentIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n                <div \n                    className='typeTextHere' \n                    contentEditable={textEditable}\n                    onInput={handleOnInput}\n                    ref={inputeditableRef}\n                >\n\n                </div>\n                <div className='emoji'>\n                    <EmojiEmotionsIcon style={{ color: 'rgb(235, 228, 137)', fontSize: \"30px\" }} />\n                </div>\n                <div className='sendIcon'>\n                    <SendIcon style={{ color: 'white', fontSize: \"30px\" }} />\n                </div>\n            </div>\n        </div>\n\n    )\n}\n\nexport default ChatAreaMyGroup\n","import React,{useEffect,useState,useRef} from 'react'\nimport './ChatArea.css'\nimport { connect } from 'react-redux';\nimport ChatAreaContact from './ChatAreaContact/ChatAreaContact'\nimport ChatAreaGroup from './ChatAreaGroup/ChatAreaGroup'\nimport ChatAreaMyGroup from './ChatAreaMyGroup/ChatAreaMyGroup'\n\n\nfunction ChatArea(props) {\n\n    let selectedChatArea = ''\n\n    if (props.isGroupChat == true ){\n        selectedChatArea = <ChatAreaGroup />\n    } else if (props.isContactChat == true){\n        selectedChatArea = <ChatAreaContact selectedContact={props.selectedContact} />\n    } else if (props.isMyChatRoom == true) {\n        selectedChatArea = <ChatAreaMyGroup selectedChatRoom={props.selectedChatRoom} />\n    } else {\n        selectedChatArea = '' ;\n    }\n\n    return (\n        <div className='chatAreaRoot'>\n            {selectedChatArea}\n        </div>\n    )\n}\n\n\nconst mapStateToProps = state => {\n    return {\n        toggleSignal: state.websocket.toggleSignal,\n        selectedContact : state.websocket.selectedContact,\n        selectedGroup : state.websocket.selectedGroup,\n        isGroupChat : state.websocket.isGroupChat,\n        isMyChatRoom : state.websocket.isMyChatRoom,\n        isContactChat : state.websocket.isContactChat,\n        selectedChatRoom: state.websocket.selectedChatRoom\n    };\n};\n  \nconst mapDispatchToProps = dispatch => {\n    return {\n        // createWebsocket : () => dispatch(createWebsocketAction())\n    };\n};\n\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n) (ChatArea)","import React,{useState} from 'react'\nimport Panel from '../Panel/Panel'\nimport ChatArea from '../ChatArea/ChatArea'\nimport './SmallDeviceView.css'\nimport { connect } from 'react-redux';\n\nfunction SmallDeviceView(props) {\n    \n\n    return (\n        <div className='smallDeviceViewRoot'>\n            <div className='panelWrapper' style={{display:(props.isShowPanel === true)? 'block' : 'none' }}>\n                <Panel /> \n            </div>\n            <div className='chatAreaWrapper' style={{display:(props.isShowPanel === true)? 'none' : 'block' }}>\n                <ChatArea /> \n            </div>\n        </div>\n    )\n}\n\n\nconst mapStateToProps = state => {\n    return {\n        isShowPanel: state.websocket.isShowPanel,\n    };\n  };\n  \n  const mapDispatchToProps = dispatch => {\n    return {\n        // authLoginAction : (userName,password) => dispatch(authLoginAction(userName,password))\n    };\n  };\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n) (SmallDeviceView)\n","import React from 'react'\nimport './LargeDeviceView.css'\nimport Panel from '../Panel/Panel'\nimport ChatArea from '../ChatArea/ChatArea'\n\nfunction LargeDeviceView(props) {\n    return (\n        <div className='largeDeviceViewRoot'>\n            <div className='panelWrapper'>\n                <Panel />\n            </div>\n            <div className='chatAreaWrapper'>\n                <ChatArea /> \n            </div>\n        </div>\n    )\n}\n\nexport default LargeDeviceView\n","import React,{useEffect,useState} from 'react'\nimport SmallDeviceView from './SmallDeviceView/SmallDeviceView'\nimport LargeDeviceView from './LargeDeviceView/LargeDeviceView'\nimport './ChatView.css'\n\nfunction ChatView(props) {\n\n    let chatView = '' ;\n    const [windowWidth,setWindowWidth] = useState(window.innerWidth)\n\n    useEffect(() => {\n\n        window.addEventListener(\"resize\", getWindowSize);\n\n        return () => {\n            window.removeEventListener('resize', getWindowSize)\n        }\n    }, [])\n\n    const getWindowSize = () => {\n        setWindowWidth(window.innerWidth) ;\n    }\n\n    chatView = ((windowWidth < 600)? <SmallDeviceView /> : <LargeDeviceView />)\n\n    return ( \n        <div className='chatViewRoot'>\n            {chatView}\n        </div>\n    )\n}\n\nexport default ChatView\n","import React, {useState, useEffect} from 'react'\nimport MenuIcon from '@material-ui/icons/Menu';\nimport './PeersChat.css'\n\nimport { connect } from 'react-redux';\nimport { \n    createWebsocketAction,\n    setIsShowPanelAction\n    } from '../../../store/websocket/actions'\n\nimport * as actionType  from '../../../store/auth/actionTypes'\n\nimport  ChatView from './Content/ChatView/ChatView'\n\nfunction PeersChat(props) {\n    \n    const fileName = \"PeersChat.js \"\n\n    useEffect(() => {\n\n        // console.log(fileName, \"props.login_status = \", props.login_status)\n        // if (props.login_status == actionType.LOGIN_STATUS_SUCCEED && !props.sock_conn){\n        //     props.createWebsocket(props.sock_conn)\n        // }\n\n        return () => {\n            \n        }\n\n    }, [])\n\n\n    const go2Panel = () => {\n        props.setIsShowPanelAction(true) // show  panel of contact and group list\n    }\n\n    let chatContent = ''\n\n    // switch, assign chatContent with different element according to different selected items on menu items of peerChatDrawer\n    chatContent = (<ChatView  />)\n\n\n    return (\n        <div className='peerChatRoot'>\n            {/* drawer  */}\n            <input type='checkbox' id=\"peersChatMenuDrawerChk\" />\n            <label className='labelForpeersChatMenuDrawerChk' for='peersChatMenuDrawerChk'>\n                <MenuIcon style={{ color: 'rgb(100,50,200)', fontSize: \"30px\" }} />\n            </label>\n            <div className='peerChatDrawer'>\n                <button className='go2Panel' onClick={go2Panel} >Contact&Group List</button>\n            </div>\n            {/* panel and chat view */}\n            <div className='peersChatContent'>\n                {chatContent}\n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        sock_conn: state.websocket.sock_conn,\n        login_status: state.auth.status ,\n    };\n};\n  \nconst mapDispatchToProps = dispatch => {\n    return {\n        setIsShowPanelAction : (isShowPanel) => dispatch(setIsShowPanelAction(isShowPanel))\n    };\n};\n\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n) (PeersChat)\n","import React,{useState,useEffect,useRef} from 'react'\nimport './PeersChatMenu.css'\nimport PeersChat from '../../../Content/PeersChat/PeersChat'\nimport CloseIcon from '@material-ui/icons/Close';\nimport { connect } from 'react-redux';\nimport {setIsExpandChatMenuAction,\n    saveWebsocketConn2StoreAction,\n    destroyWebsocketAction,\n    setNewMsgToggleAction,\n    setWebRTCmediaCallStateAction,\n    setContactListAction\n} from '../../../../store/websocket/actions'\nimport {\n    authCheckTokenVaidAction\n} from '../../../../store/auth/actions'\nimport asyncDelay from '../../../../utility/asyncDelay'\nimport * as mediaCallStateTypes from '../../../../store/websocket/webSocketState'\n\nimport {wsuri,\n    messageEndPoint,\n    my_wsuri,\n    cloudServer,\n    contactEndPoint\n} from '../../../../ipconfig'\nimport {\n    selectedGroupObj,\n    selectedContactObj,\n    selectedChatroomObj,\n    msgsContactObj,\n    allContactObj,            \n    auth_Global\n    } from './websocket/globalVar'\n\nimport {\n    webRTC_inst_obj\n} from './websocket/global_webRTC'\n\n\nimport getSafePropertyWithAlert from '../../../../utility/getSafePropertyWithAlert'\n\nimport * as loginStatus from '../../../../store/auth/actionTypes'\nimport axios from \"axios\";\n\nimport {config_json} from '../../../../global_config'\nimport handleError from '../../../../utility/handleError'\nimport { AlternateEmail, PowerInputSharp } from '@material-ui/icons';\n\n\nfunction PeersChatMenu(props) {\n\n    const fileName = \"PeersChatMenu.js\"\n    \n    const [isExpandMenu,setIsExpandMenu] = useState(false)\n\n    const ref = useRef(null)\n\n    const webRTC_peerConnection_ref = useRef(null)\n    const offer_ref = useRef(null)\n\n    const [localStream,setLocalStream] = useState('')\n    const [remoteStream,setRemoteStream] = useState('')\n    const [isIncomingCall,setIsIncomingCall] = useState('false')\n\n\n    const handleOnclick2ExpandMenu = () => {\n        setIsExpandMenu(!isExpandMenu)\n        props.setIsExpandChatMenuAction(!isExpandMenu)\n    }\n\n    const handleOnclick2CloseMenu = () => {\n        setIsExpandMenu(false)\n        props.setIsExpandChatMenuAction(false)\n    }\n\n    useEffect(() => {\n        window.isExpandMenu = isExpandMenu\n        return () => {\n            \n        }\n    }, [isExpandMenu])\n\n    useEffect(() => {\n        if(isExpandMenu == true){\n            setIsExpandMenu(false)\n        }\n        return () => {\n            \n        }\n    }, [props.toggleChatMenu])\n\n\n    const setUpWebsocke = () => {\n        const token = localStorage.getItem('token')\n        webRTC_inst_obj.socket_conn = new WebSocket(`${wsuri}/?token=${token}`)\n        webRTC_inst_obj.socket_conn.onmessage = (ev) => {websocketOnMessage(webRTC_inst_obj.socket_conn,ev)};\n        webRTC_inst_obj.socket_conn.onopen    = (e ) => {websocketOnOpen(webRTC_inst_obj.socket_conn,e)} ;\n        webRTC_inst_obj.socket_conn.onerror   = (e ) => {websocketOnError(webRTC_inst_obj.socket_conn,e ) } ;\n        webRTC_inst_obj.socket_conn.onclose   = (e ) => {websocketOnClose(webRTC_inst_obj.socket_conn,e )} ;\n    }\n\n\n    // actions taken at initialization\n    useEffect(() => {\n        \n        // setup the callback functions to assign value to the global object values \n        msgsContactObj.newMsgToggleSignalFn = newContactMsgUpdateCB ;\n\n        if (props.status === loginStatus.LOGIN_STATUS_SUCCEED){\n\n            getAllContactList()\n\n            // establish websocket connection to server \n            setUpWebsocke()\n \n            // props.saveWebsocketConn2StoreAction(webRTC_inst_obj.socket_conn) // for global\n\n        }\n\n        return () => {\n            \n        }\n    }, [])\n\n    // actions taken after login or log out \n    useEffect(() => {\n\n        if (props.status === loginStatus.LOGIN_STATUS_SUCCEED){\n\n            getAllContactList()\n\n            // establish websocket connection to server \n            setUpWebsocke()\n\n            // props.saveWebsocketConn2StoreAction(webRTC_inst_obj.socket_conn) // for global\n\n        } else {\n\n            if (webRTC_inst_obj.socket_conn ){\n                webRTC_inst_obj.socket_conn.close()\n                webRTC_inst_obj.socket_conn = ''\n            }\n            props.destroyWebsocketAction()\n\n        }\n\n        return () => {\n        \n        }\n\n    }, [props.status])   // when this signal changes,change the websocket\n\n\n\n    //-------------------------- state machine ----------------------------------------\n\n    useEffect(() => {\n        \n        if (props.mediaCallState === mediaCallStateTypes.WEBSOCKET_MEDIACALL_STATE_INVIDEOCALL){\n            // prepare for the video call\n            // closeVideoCall()\n            // startVideoCall();\n            \n        } else if (props.mediaCallState === mediaCallStateTypes.WEBSOCKET_MEDIACALL_STATE_INVOICECALL){\n            // closeVideoCall()\n            // startVoiceCall()\n        } else if (props.mediaCallState === mediaCallStateTypes.WEBSOCKET_MEDIACALL_STATE_MEDIACALLRECEIVED){\n            \n        } else {\n            // when call is terminated or in idle from the beginning, close the webRTC connection\n            props.setWebRTCmediaCallStateAction(mediaCallStateTypes.WEBSOCKET_MEDIACALL_STATE_IDLE)\n            // setIsIncomingCall(false)\n            // closeVideoCall()\n        }\n\n    }, [props.mediaCallState])\n\n\n    const startVideoCall = () => {\n        // createWebRTCsocketCnnInst()\n        // getStream(true)\n\n        // setWebRTC_peerConnection(webRTCInst) // use another useEffect as callback function on the value change of webRTC_inst_obj.webRTC_inst\n        //                                      // kind of nasty since can't use await in useEffect to make it async logic\n        // // waitUseStateUpdate()\n        // setTimeout(() => {getStream()},500) // 0.5s ,use a simple timer callback function to replace the useEffect polling\n    }\n\n    const startVoiceCall = () => {\n        // createWebRTCsocketCnnInst()\n        // getStream(false)\n\n    }\n\n    const processingOffer = async (isVideoTrue) => {\n\n        if(!webRTC_inst_obj.webRTC_inst.signalingState != \"stable\"){\n            console.log(\"signaling is not stable\")\n            await asyncDelay(1)\n        }\n\n        // alert(\"creating answer ..... \")\n\n        const answer = await webRTC_inst_obj.webRTC_inst.createAnswer();\n        await webRTC_inst_obj.webRTC_inst.setLocalDescription(answer)\n        sendMsg('answer',answer)\n\n        const mediaConstraints = {\n            'video': isVideoTrue,\n            'audio': true,\n        };\n\n        const localStream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\n        webRTC_inst_obj.localStream = localStream\n\n        for (const track of localStream.getTracks()){\n            await webRTC_inst_obj.webRTC_inst.addTrack(track,localStream);\n        }\n\n        // alert('local track added')\n\n\n        // // getLocalStream(isVideoTrue)  // use async in callback function\n        // const localStream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\n        \n        // for (const track of localStream.getTracks()){\n        //     await this.newPeerConnection.addTrack(track,localStream);\n        // }\n        // // create answer\n        // const answer = await webRTC_inst_obj.webRTC_inst.createAnswer();\n        // await webRTC_inst_obj.webRTC_inst.setLocalDescription(answer)\n    }\n\n    /**\n     * a callback function assign to the callback functions of websocket  \n     * \n     * @param {*} newMsgReadyToggle : variable assigned to a new value when received a new message in websocket callback function\n     *                                used to update the value props.newMsgReadyToggle in store\n     */\n    const newContactMsgUpdateCB = (newMsgReadyToggle) => {\n        props.setNewMsgToggleAction(newMsgReadyToggle)\n    }\n\n    /**\n     * \n     * @param {*} isInMediaCall, update this value according to the state of media call conversation\n     */\n    const setisInMediaCallAction_CB = (isInMediaCall) => {\n        props.setisInMediaCallAction(isInMediaCall)\n    }\n    /**\n     *  after changing the value of isInVideoCall in store,update the value in global object,\n     *  follow this rule to update the value in global object.\n     */\n    useEffect(() => {\n        // webRTC_global.isInCall = props.isInMediaCall\n\n        return () => {\n            \n        }\n    }, [props.isInVideoCall])\n\n\n    useEffect(() => {\n        msgsContactObj.newMsgReadyToggle = props.newMsgReadyToggle\n        return () => {\n            \n        }\n    }, [props.newMsgReadyToggle])\n\n\n    const fetechUnreadMsg_contact = (contact_id,user_id,msg) => {\n        const functionName = 'fetechUnreadMsg_contact'\n    \n        const token=localStorage.getItem('token')\n    \n        const query = {\n            params : {\n                contact_id: contact_id, // which contact this message belongs to\n                user_id: user_id  ,\n                token:    token   ,         // \n                status:  'unread' ,         // 'read/unread/all'\n                offset:        0  ,  // for pagination purposes,the starting id of the messages\n                pageLen : 0       , // number of messages in one query action \n            }\n        } \n        // equevalent to localhost:3000/message/contact?contact_id=10\n    \n        axios\n        .get(`${messageEndPoint}/contact`,\n                query \n            )\n        .then( res => {\n    \n            const data = getSafePropertyWithAlert(()=>res.data,fileName,functionName,\"\")\n    \n            // 1.2 save the message \n            // 1.2.1, check if msgsContact[`${msg.FROM.URL}+${msg.FROM.ID}`] exist, if true, add new arrays to the existing array,\n            const unReadMsgArray = data.querySet.slice().reverse()\n            unReadMsgArray.push(...msgsContactObj.msgsContact[`${msg.FROM.URL}+${msg.FROM.ID}`])\n            msgsContactObj.msgsContact[`${msg.FROM.URL}+${msg.FROM.ID}`] = unReadMsgArray;\n    \n            // toggle the signal to force re-render\n            msgsContactObj.newMsgToggleSignalFn(!msgsContactObj.newMsgReadyToggle)\n            \n        })\n        .catch(error => {\n    \n            handleError(error,fileName,functionName)\n    \n        })\n    \n    }\n    \n    /**\n     *  \n     *  get all the contact list,and save it as global object \n     * \n     */\n\n     const getAllContactList = () => {\n        const functionName = 'getAllContactList'\n    \n        const token=localStorage.getItem('token')\n    \n        const query = {\n            params : {\n                category_id : null,\n                token : token\n            }\n        } \n    \n        axios\n        .get(`${contactEndPoint}`,\n                query \n            )\n        .then( res => {\n    \n            const querySet = getSafePropertyWithAlert(()=>res.data.querySet,fileName,functionName)\n\n            let allContactList = {}\n            // construct allContactObj.allContact = {url+id : contact} from data.queryset\n            for(let i=0; i<querySet.length; ++i){\n                const contact = querySet[i]\n                const URL = contact.webSocketUrl ;\n                const ID  = contact.hisID ;\n                allContactList[`${URL}+${ID}`] = contact \n            }\n\n            props.setContactListAction(allContactList)\n            allContactObj.allContact = allContactList\n    \n        })\n        .catch(error => {\n    \n            handleError(error,fileName,functionName)\n    \n        })\n    }\n\n\n    const fetchLastNMsg_contact = (contact_id,user_id,msg) => {\n        const functionName = 'fetchLastNMsg_contact'\n    \n        const token=localStorage.getItem('token')\n    \n        const query = {\n            params : {\n                contact_id: contact_id, // which contact this message belongs to\n                user_id: user_id  ,\n                token:    token   ,         // \n                status:  'all' ,         // 'read/unread/all'\n                offset:        0  ,  // for pagination purposes,the starting id of the messages\n                pageLen : 30       , // number of messages in one query action \n            }\n        } \n        // equevalent to localhost:3000/message/contact?contact_id=10\n    \n        axios\n        .get(`${messageEndPoint}/contact`,\n                query \n            )\n        .then( res => {\n    \n            const data = getSafePropertyWithAlert(()=>res.data,fileName,functionName,\"\")\n    \n            // 1.2 save the message \n            // otherwise create a new one (should be pulling latest N messages including the unread ones)\n    \n            msgsContactObj.msgsContact[`${msg.FROM.URL}+${msg.FROM.ID}`] = data.querySet\n    \n            // toggle the signal to force re-render\n            msgsContactObj.newMsgToggleSignalFn(!msgsContactObj.newMsgReadyToggle)\n            \n        })\n        .catch(error => {\n    \n            handleError(error,fileName,functionName)\n    \n        })\n    }\n\n    /**\n     * *************************************************************************************************************************\n     *                                           websocket callback functions\n     * **************************************************************************************************************************\n     */\n\n    // onmessage: ((this: WebSocket, ev: MessageEvent) => any) | null;\n    const websocketOnMessage = (sock_conn, ev) => { \n\n        const msg = JSON.parse(ev.data)\n        // console.log(msg)\n\n        /**\n         * public protocol : message data layout（大道至簡）                                       透明\n         *     _______________________________________________________________\n         *    |      FROM     |  TO      |     DATA                |TYPE_OUTER |                我们的爱\n         *    |_______________|__________|_________________________|___________|                是蓝色的 \n         *                               /                          \\                           一直只为你而转\n         *                              /                            \\\n         *                             /______________________________\\                         我们的眼泪\n         *                            |TYPE_INNER| PAYLOAD   | MSG_ID  |                        流进心间\n         *                            |__________|___________|_________|                        汇成江海\n         *                                                                                      變成人間五味\n         *                                                                                      化着清晨的青煙\n         *                                                                                      一生只爲你而生\n            socket_conn.send(JSON.stringify({                                                   \n            \"TO\" : {                                                                            對你的心\n                \"URL\" : \"websocket url of contact\",                                             是透明的原色\n                \"ID\"     : \"the ID of the contact on his cloud server\",                         不論再歷經幾萬年\n            },                                                                                  一直只爲你而存在\n            \"FROM\" : {\n                \"URL\" : \"websocket url of sender\",                                              親愛的\n                \"ID\"     : \"the ID of the sender on his cloud server\",                          你是我今生的全部\n                \"CATEGORY\" : \"optional\"                                                         餘生將用盡全力\n            },                                                                                  只爲與你相見\n            \"TYPE_OUTER\" : \"HEARTBEAT\"                                                          哪怕只是\n            \"DATA\" : {                                                                          曇花一現\n                \"TYPE_INNER\"   : \"HEARTBEAT\",                                                   也只爲你 成魔成狂\n                \"PAYLOAD\":  \"I miss you\"                                                        管他 地獄天堂\n            },\n            \"MSG_ID\" : msg_id                                                                   此生因你\n                                                                                                存在\n                                                                                                而值得\n                                                                                                \n                                                                                                ---\n                                                                        2021年5月1日 晨思，去中心化社交媒體網絡(DecensorMedia)\n        }))\n        * \n        */\n\n        // get the incoming contact \n\n        ProccessOuterLayerMsg( msg, sock_conn)\n\n    }\n\n    const websocketOnOpen = async(sock_conn, e) => {\n\n        console.log(\"on open, connection established\")\n    \n    }\n\n    const websocketOnError = (sock_conn, e) => {\n        console.log(`webSocketEvents.websocketOnError, ${e}`)\n        alert(`websocketOnError : ${e.reason}`)\n    }\n    \n    const websocketOnClose = (sock_conn, e) =>  {\n        console.log('webSocketEvents.websocketOnClose ', e);\n        // alert(`webSocketEvents.websocketOnClose  : ${e.reason}`)\n\n        // reopen if close automatically due to long inactive state \n        if (props.status === loginStatus.LOGIN_STATUS_SUCCEED){\n            setTimeout(() =>{setUpWebsocke()}, 1000)\n        }\n    }\n    \n    const clearTimerEvents = (arrOfTimerIds) => {\n    \n        for (let i=0; i<arrOfTimerIds.length ; i++){\n            clearInterval(arrOfTimerIds[i])\n        }\n    }\n\n    const ProccessOuterLayerMsg = ( msg, socket_conn) => {\n\n        switch (msg.TYPE_OUTER) {\n    \n            case 'MSG' :\n                processInnerLayerMsg(msg, socket_conn)\n                break ;\n            \n            case 'HEARTBEAT' : \n    \n                break ;\n    \n            case 'EROOR' :\n    \n                break ;\n    \n            default : \n                console.log('TYPE_OUTER not found')\n    \n        }\n    \n    }\n\n\n    const processInnerLayerMsg = (msg, socket_conn) => {\n        const functionName = \"processInnerLayerMsg(msg, socket_conn)\"\n\n        const category = getSafePropertyWithAlert(()=>msg.FROM.CATEGORY,fileName,functionName,'')\n\n        // switch based on msg.FROM.CATEGORY \n        switch(category) {\n            case 'CONTACT' : {\n                processInnerLayerMsg_CONTACT(msg, socket_conn)\n                break ;\n            }\n\n            case 'GROUP' : {\n                processInnerLayerMsg_GROUP(msg, socket_conn)\n                break;\n            }\n\n            case 'CHATROOM' : {\n                processInnerLayerMsg_CHATROOM(msg, socket_conn)\n                break;\n            }\n\n            default : {\n                console.log('FROM.CATEGORY is not supported ')\n                break ;\n            }\n        }\n\n    }\n\n    const processInnerLayerMsg_CONTACT = (msg, socket_conn) => { \n        const functionName = \"processInnerLayerMsg_CONTACT\"\n        const data = msg.DATA\n        const category = getSafePropertyWithAlert(()=>msg.FROM.URL,fileName,functionName,'')\n    \n        switch (data.TYPE_INNER) {\n    \n            case 'ERROR' : \n                alert(data.PAYLOAD)\n                break ;\n    \n            case 'NEW_MSG_NOTIFICATION' : {\n                const selectedContact = getSafePropertyWithAlert(()=>selectedContactObj['selectedContact'],fileName,functionName,'')\n                // const selectedContact = props.selectedContact\n                /**\n                 * 1. if FROM.URL + FROM.ID is the current contact the client is talking to\n                 */\n    \n                if (`${msg.FROM.URL}+${msg.FROM.ID}` == `${selectedContact.webSocketUrl}+${selectedContact.hisID}` )\n                {\n                    // 1.1 if msg with this contact exist locally,\n                    if (msgsContactObj.msgsContact.hasOwnProperty(`${msg.FROM.URL}+${msg.FROM.ID}`) == true){\n                        //if exist, fetch unread msg and push unread msg to the existing array\n                        fetechUnreadMsg_contact(selectedContact.id,selectedContact.user_id,msg)\n                    } else {\n                        // 1.2 if local msg not exist,go fetch the last N messages\n                        fetchLastNMsg_contact(selectedContact.id,selectedContact.user_id,msg)\n                    } \n    \n                    msgsContactObj.unReadMsgCnt[`${msg.FROM.URL}+${msg.FROM.ID}`] = 0\n    \n                } else {\n                    /**\n                     * 2. if FROM.URL + FROM.ID is not the current contact the client is talking to\n                     */\n                    if (msgsContactObj.unReadMsgCnt.hasOwnProperty(`${msg.FROM.URL}+${msg.FROM.ID}`) == true){\n                        msgsContactObj.unReadMsgCnt[`${msg.FROM.URL}+${msg.FROM.ID}`] += msg.DATA.PAYLOAD.numOfUnreadMsg\n                    } else {\n                        msgsContactObj.unReadMsgCnt[`${msg.FROM.URL}+${msg.FROM.ID}`] = msg.DATA.PAYLOAD.numOfUnreadMsg\n                    }\n    \n                    msgsContactObj.newMsgToggleSignalFn(!msgsContactObj.newMsgReadyToggle)\n    \n                }\n                \n                break;\n            }\n    \n            case 'offer' : {\n\n                console.log(\"onReceiveOffer\")\n    \n                onReceiveOffer(msg)\n    \n                break;\n            }\n    \n            case 'answer' : {\n                // if incoming contact is not the active contact \n                console.log('onReceiveAnswer')\n    \n                const answer = data.PAYLOAD\n                onReceiveAnswer(answer)\n    \n                break;\n            }\n    \n            case 'candidate' : {\n                // if incoming contact is not the active contact \n                console.log('onCandidate')\n    \n                const candidate = data.PAYLOAD\n                onReceiveRemoteIceCandidate(candidate)\n    \n                break;\n            }\n    \n            default : \n                console.log(\"data.TYPE_INNER not found\")\n        }\n    }\n    \n    const processInnerLayerMsg_GROUP = (msg, socket_conn) => { \n\n    }\n    \n    \n    const processInnerLayerMsg_CHATROOM = (msg, socket_conn) => { \n    \n    }\n\n    const onReceiveOffer  = async (msg)  => {\n\n        const functionName = \"onReceiveOffer\"\n\n        webRTC_inst_obj.whoAmI = 'callee'\n        \n        const offer = msg.DATA.PAYLOAD\n    \n        // 1, get the current active contact info \n        const selectedContact = getSafePropertyWithAlert(()=>selectedContactObj['selectedContact'],fileName,functionName,'')\n    \n        // if (`${msg.FROM.URL}+${msg.FROM.ID}` != `${selectedContact.webSocketUrl}+${selectedContact.hisID}` ){\n        //     // the incoming contact is not the current active contact \n        //     // 2, switch selected contact to be the one of the incoming call \n        //     const incomingContact = getSafePropertyWithAlert(()=>allContactObj.allContact[`${msg.FROM.URL}+${msg.FROM.ID}`],fileName,functionName,'')\n        //     selectedContactObj.setSelectedContact_CB(incomingContact)\n        // }\n\n        const incomingContact = getSafePropertyWithAlert(()=>allContactObj.allContact[`${msg.FROM.URL}+${msg.FROM.ID}`],fileName,functionName,'')\n        selectedContactObj.setSelectedContact_CB(incomingContact)\n        selectedContactObj.selectedContact = incomingContact\n\n        // // prepare remoteStream placeholder,add remote stream in callback function\n        // const remoteStream = new MediaStream();\n        // setRemoteStream(remoteStream)\n        // props.remoteStream_ref.current.srcObject = remoteStream\n\n        setIsIncomingCall(true)\n        // this is kind of nasty,it has to wait sometime for the state to change. so it is better to replace it with global variables which can change value\n        // instantly.this is one of the most nasty and ugly thing we tend to forget that the process does not wait the state to change before \n        // proceeding to next line\n        props.setWebRTCmediaCallStateAction(mediaCallStateTypes.WEBSOCKET_MEDIACALL_STATE_MEDIACALLRECEIVED)\n        \n\n        // 1. create peer2peer connection instance \n        await webRTC_inst_obj.createPeerConnection()\n\n        // 2. set remoteDescription from remote offer \n        const remote_desc = new RTCSessionDescription(offer);\n        try {\n            await webRTC_inst_obj.webRTC_inst.setRemoteDescription(remote_desc)\n        } catch (e) {\n            console.log(e) ;\n        }\n\n        // polling answer or reject button to be pressed\n        let pollingResult = false ;\n        for(let i=0;i<15;i++){ // wait 15 seconds\n            await asyncDelay(1)\n            if (webRTC_inst_obj.mediaCallState === mediaCallStateTypes.WEBSOCKET_MEDIACALL_STATE_INVIDEOCALL || webRTC_inst_obj.mediaCallState === mediaCallStateTypes.WEBSOCKET_MEDIACALL_STATE_INVOICECALL){\n                pollingResult = true ;\n                break ;\n            }\n        }\n\n        if (pollingResult === false){\n            webRTC_inst_obj.closeCall()\n            props.setWebRTCmediaCallStateAction(mediaCallStateTypes.WEBSOCKET_MEDIACALL_STATE_IDLE)\n            alert(\"not answered\")\n            return\n        }\n\n        if(webRTC_inst_obj.webRTC_inst.signalingState != \"stable\"){\n            console.log(\" ***** signaling is not stable\")\n        }\n\n        const mediaConstraints =    {\n                                        'video': true,\n                                        'audio': true,\n                                    };\n        \n        try {\n            const localStream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\n        \n            for (const track of localStream.getTracks()){\n                await webRTC_inst_obj.webRTC_inst.addTrack(track,localStream);\n            }\n\n            webRTC_inst_obj.localStream = localStream \n            webRTC_inst_obj.localVideoCom_ref.current.srcObject = localStream\n\n            const answer = await webRTC_inst_obj.webRTC_inst.createAnswer();\n            await webRTC_inst_obj.webRTC_inst.setLocalDescription(answer);\n\n            // sent it over to peer via signaling channel\n            sendMsg('answer',answer)\n        } catch (e) {\n            console.log(e)\n        }\n\n    }\n\n\n    /**\n     *  create webRTCsocket connection instance and set up the corresponding callback functions\n     */\n\n    \n    const onReceiveAnswer = async (answer) => {\n        \n\n        console.log(\"received answer, adding remote SDP\")\n\n        if(webRTC_inst_obj.webRTC_inst.signalingState != \"have-local-offer\"){\n            console.log(\" ***** should have have-local-offer before receiving an answer,logically wrong,ie, you should send offer before getting an answer \")\n            alert(\" ***** should have have-local-offer before receiving an answer,logically wrong, ie, you should send offer before getting an answer \")\n            return \n        }\n        // create remote SDP based on answer, and add to peerconnection instance\n        try {\n            await webRTC_inst_obj.webRTC_inst.setRemoteDescription(new RTCSessionDescription(answer));\n        } catch (e) {\n            console.error('error adding remote SDP ');\n        }\n    \n        // if(webRTC_inst_obj.webRTC_inst.signalingState != \"have-remote-pranswer\"){\n        //     console.log(\"in file processPkg.js,function onReceiveOffer,signalingState should be have-remote-pranswer,ie,at this stage,we should have received and applied remote answer accordding to our offer\")\n        //     alert(\"in file processPkg.js,function onReceiveOffer,signalingState should be have-remote-pranswer,ie,at this stage,we should have received and applied remote answer accordding to our offer\")\n        //     return \n        // }\n    }\n    \n    \n    const onReceiveRemoteIceCandidate = async (candidate) => {\n\n        \n        // if(!webRTC_inst_obj.webRTC_inst){\n        //     return \n        // }\n\n        await webRTC_inst_obj.webRTC_inst.addIceCandidate(candidate);\n    }\n\n    const sendMsg = async (type_inner,payload) => {\n        // 注意此處是被註冊的回調函數調用的，所以要記住，裡面的變量如果不是全局變量，都是註冊時傳遞的值，不會實時改變\n        // 因爲js沒有指針一說，所以要用全局變量的土法子來傳遞值。不要用props.socket_conn之類的信號，註冊時都是空。\n        const functionName = \"sendMsg(payload)\"\n\n        if (!payload){\n            alert(\"empty input detected\")\n            return\n        }\n\n        const selectedContact = selectedContactObj.selectedContact\n        // const selectedContact = props.selectedContact\n\n        if (!webRTC_inst_obj.socket_conn) {\n            alert(`in ${fileName},function ${functionName}, webRTC_inst_obj.socket_conn is empty, please connect to server via websocket`)\n            return\n        }\n\n        let webSocketReadyState = getSafePropertyWithAlert(()=>webRTC_inst_obj.socket_conn.readyState,fileName,functionName,'')\n        console.log(webSocketReadyState)\n        /**\n                    Value\t     State\t                   Description\n                    0\t         CONNECTING\t               Socket has been created. The connection is not yet open.\n                    1\t         OPEN\t                   The connection is open and ready to communicate.\n                    2\t         CLOSING\t               The connection is in the process of closing.\n                    3\t         CLOSED\t                   The connection is closed or couldn't be opened.\n        */\n        if (webSocketReadyState != 1){\n            webRTC_inst_obj.socket_conn.close()\n            props.destroyWebsocketAction()\n            alert(\"refresh the page to connect to server again\")\n            // distroy websocket to make sure webRTC_inst_obj.socket_conn is null,otherwise cannot create a new one,logic lock!!!\n            return\n        }\n\n        webRTC_inst_obj.socket_conn.send(JSON.stringify({\n            TO : {\n                \"URL\"    :  selectedContact.webSocketUrl,  // the websocket url+port to connect to \n                \"ID\"     : `${selectedContact.hisID}`,       // his id or unique name on his server \n            },\n            FROM : {\n                \"URL\"    : my_wsuri,\n                \"ID\"     : `${props.myUserName}`, \n                \"CATEGORY\": \"CONTACT\"\n            },\n            TYPE_OUTER : \"MSG\" ,\n            DATA : {    // data can be encrypted from peerDevice-to-peerDevice\n                \"TYPE_INNER\"   : type_inner,  \n                \"PAYLOAD\":  payload \n            }\n        }))\n    }\n\n    const sendHeartBeat2CloudServer = (sock_conn) => {\n\n        const pkg_obj = {\n\n            TO   : {\n                        URL : cloudServer,\n                        ID :  'cloudserver',  // to cloud server itself, private protocol \n                    },\n            FROM : {\n                        URL : cloudServer,     // do not use homeserver's ip, because it is behind NAT,fill in cloudServer DOMAIN, \n                                            // indicate it is a private protocol \n                        ID :  'frontEndDevice',  // from home server, private protocol \n                    },\n            TYPE_OUTER : 'HEARTBEAT' ,\n            DATA : {\n                        TYPE_INNER : 'HEARTBEAT',\n                        PAYLOAD    : 'I miss you' \n                    }\n\n        }\n\n        sock_conn.send(JSON.stringify(pkg_obj))\n\n    }\n\n\n    const isHeartBeatReceived = async () => {\n\n        // 1. if HeartBeat not received after a certain amount of time, means the connection between server and frontend lost\n        // close the existing websocket connection and create a new one \n    \n            // if (heartBeat.getHeartBeatCnt() == 0) {\n            //     // reinitialized socket connection to cloud server as client \n            //     console.log('did not recieve heartbeat from cloud server, reinitializing websocket connection to cloud...')\n            //     sock_conn.close()\n            //     sock_conn = await initWebSocket(server, `${cloudServer}:${cloudServerPort}`)\n            // } else {\n            //     heartBeat.clearHeartBeatCnt();\n            // }\n        }\n\n\n    /**\n     * *************************************************************************************************************************\n     *                                          end of websocket callback functions \n     * **************************************************************************************************************************\n     */\n\n\n    const handleGetUserMediaError = (e) => {\n        switch(e.name) {\n            case \"NotFoundError\":\n                alert(\"Unable to open your call because no camera and/or microphone\" +\n                        \"were found.\");\n                break;\n            case \"SecurityError\":\n                break ;\n\n            case \"PermissionDeniedError\":\n\n                // Do nothing; this is the same as the user canceling the call.\n                break;\n            default:\n                alert(\"Error opening your camera and/or microphone: \" + e.message);\n                break;\n        }\n\n        closeVideoCall();\n    }\n\n    const closeVideoCall = () => {\n\n        // Close the RTCPeerConnection\n  \n        if (webRTC_inst_obj.webRTC_inst) {\n  \n          // Disconnect all our event listeners; we don't want stray events\n          // to interfere with the hangup while it's ongoing.\n  \n          webRTC_inst_obj.webRTC_inst.ontrack = null;\n          webRTC_inst_obj.webRTC_inst.onnicecandidate = null;\n          webRTC_inst_obj.webRTC_inst.oniceconnectionstatechange = null;\n          webRTC_inst_obj.webRTC_inst.onsignalingstatechange = null;\n          webRTC_inst_obj.webRTC_inst.onicegatheringstatechange = null;\n          webRTC_inst_obj.webRTC_inst.onnotificationneeded = null;\n  \n          // Stop all transceivers on the connection\n  \n          webRTC_inst_obj.webRTC_inst.getTransceivers().forEach(transceiver => {\n            transceiver.stop();\n          });\n  \n          // Stop the webcam preview as well by pausing the <video>\n          // element, then stopping each of the getUserMedia() tracks\n          // on it.\n\n  \n          if(localStream){\n            localStream.getTracks().forEach(track => {\n                track.stop();\n              });\n          }\n\n          if(remoteStream){\n            remoteStream.getTracks().forEach(track => {\n                track.stop();\n              });\n          }\n  \n          // Close the peer connection\n          webRTC_inst_obj.webRTC_inst.close();\n          webRTC_inst_obj.webRTC_inst = null;\n\n        }\n\n    }\n\n\n    return (\n        <div className='peersChatMenuRoot'>\n            <p className=\"PeersChat\" style={{color:'black'}} onClick={handleOnclick2ExpandMenu}> \n                <span>PeersChat</span>\n            </p>\n\n            <div className=\"chatViewRoot\" style={{display: isExpandMenu == true ? 'block':'none'}}>\n                <div className=\"topBar\">\n                    <div className=\"closeIconWrapper\" onClick={handleOnclick2CloseMenu}>\n                        <CloseIcon style={{ color: 'white', fontSize: \"20px\" }} />\n                    </div>\n                </div>\n                <div className=\"chatContainer\">\n                    <PeersChat  />\n                </div>\n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        selectedContact: state.websocket.selectedContact,\n        selectedGroup : state.websocket.selectedGroup,\n        selectedChatRoom : state.websocket.selectedChatRoom,\n        toggleSignal: state.websocket.toggleSignal,\n        status      : state.auth.status,\n        newMsgReadyToggle : state.websocket.newMsgReadyToggle,\n        isInVideoCall : state.websocket.isInVideoCall,\n        myUserName : state.auth.myUserName,\n        sock_conn : state.websocket.sock_conn,\n        mediaCallState : state.websocket.mediaCallState,\n        remoteStream_ref: state.websocket.remoteStream_ref,\n        localStream_ref : state.websocket.localStream_ref,\n        allContactList_keyIsIpId : state.websocket.allContactList_keyIsIpId\n    };\n};\n  \nconst mapDispatchToProps = dispatch => {\n    return {\n        // createWebsocket : (socket_cnn) => dispatch(createWebsocketAction(socket_cnn))\n        destroyWebsocketAction : () => dispatch(destroyWebsocketAction()),\n        setIsExpandChatMenuAction : (isExpandMenu) => dispatch(setIsExpandChatMenuAction(isExpandMenu)),\n        setNewMsgToggleAction         : (newMsgReadyToggle) => dispatch(setNewMsgToggleAction(newMsgReadyToggle)),\n        authCheckTokenVaidAction      : () => dispatch(authCheckTokenVaidAction()),\n        setWebRTCmediaCallStateAction : (mediaCallState) => dispatch(setWebRTCmediaCallStateAction(mediaCallState)),\n        setContactListAction : (allContactList_keyIsIpId) =>  dispatch(setContactListAction(allContactList_keyIsIpId))\n    };\n};\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n) (PeersChatMenu)\n\n","import React from 'react'\nimport './Blog.css'\n\nimport Item from '../sharedComponents/Item/Item'\nimport DropDown from '../sharedComponents/DropDown/DropDown'\n\nfunction Blog() {\n\n    return (\n        <div className='blogMenuRoot'>\n            <DropDown menuName='blog' style={{color:'black'}} to='/blog'>\n                <div className='blog item'>\n                    <Item style={{color:'white'}} to='/blog' itemName='blog list'/>\n                </div>\n                <div className='newblog item'>\n                    <Item style={{color:'white'}} to='/blog/newblog' itemName='new blog'/>\n                </div>\n                <div className='blog item'>\n                    <Item style={{color:'white'}} to='/blog/followme' itemName='follow me'/>\n                </div>\n            </DropDown>\n        </div>\n    )\n}\n\nexport default Blog;","import React from 'react'\nimport './Gallery.css'\n\nimport Item from '../sharedComponents/Item/Item'\n\nfunction Gallery() {\n    return (\n        <div className='galleryMenuRoot'>\n            <Item style={{color:'black'}} to='/gallery' itemName='Gallery'/>\n        </div>\n    )\n}\n\nexport default Gallery\n","import React from 'react'\nimport './MySubscription.css'\n\nimport Item from '../sharedComponents/Item/Item'\nimport DropDown from '../sharedComponents/DropDown/DropDown'\n\n\nfunction MySubscription() {\n\n    return (\n        <div className='mySubscriptionRoot'>\n{            <DropDown menuName='Subscriptions' style={{color:'black'}} to='/subscription'>\n                <div className='blog item'>\n                    <Item style={{color:'white'}} to='/subscription' itemName='Subscriptions'/>\n                </div>\n                <div className='newblog item'>\n                    <Item style={{color:'white'}} to='/newsubscription' itemName='add subscription'/>\n                </div>\n            </DropDown>}\n        </div>\n    )\n}\n\nexport default MySubscription;","import React,{useState,useEffect} from 'react'\nimport './Menu.css'\n\nimport Home from './Home/Home'\nimport Profile from './Profile/Profile'\nimport About from './ProjectRepo/ProjectRepo'\nimport CourseMenu from  './Course/CourseMenu'\nimport ContactUs from './ContactUs/ContactUs'\nimport PeersChatMenu from './PeersChatMenu/PeersChatMenu'\nimport Blog from './Blog/Blog'\nimport Gallery from './Gallery/Gallery'\nimport MySubscription from './MySubscription/MySubscription.js'\nimport ProjectRepo from './ProjectRepo/ProjectRepo'\n\n\nfunction Menu() {\n\n    const [toggleChatMenu,setToggleChatMenu] = useState(false)\n\n    const handleOnClick2ToggleChatMenu = () => {\n        setToggleChatMenu(!toggleChatMenu)\n    }\n\n    return (\n        <div className='menuRoot'>\n            <div className='home munuItem' onClick={handleOnClick2ToggleChatMenu}>\n                <Home />\n            </div>\n            <div className='peersChat munuItem'>\n                <PeersChatMenu toggleChatMenu = {toggleChatMenu} />\n            </div>\n            <div className='course munuItem expandItem' onClick={handleOnClick2ToggleChatMenu}>\n                <CourseMenu />\n            </div>\n            <div className='profile munuItem expandItem' onClick={handleOnClick2ToggleChatMenu}>\n                <Profile />\n            </div>\n            <div className='about munuItem expandItem' onClick={handleOnClick2ToggleChatMenu}>\n                <Blog />\n            </div>\n            \n            <div className='contactUs munuItem expandItem' onClick={handleOnClick2ToggleChatMenu}>\n                {<MySubscription />}\n            </div>\n\n            <div className='contactUs munuItem' onClick={handleOnClick2ToggleChatMenu}>\n                <Gallery />\n            </div>\n\n            <div className='contactUs munuItem' onClick={handleOnClick2ToggleChatMenu}>\n                <ProjectRepo />\n            </div>\n\n        </div>\n    )\n}\n\nexport default Menu\n","import React from 'react'\nimport './NavigationBar.css'\nimport Logo from './Logo/Logo'\nimport Menu from './Menu/Menu'\n\nfunction NavigationBar() {\n    return (\n        <div className='navigationBarRoot'>\n            <input className='ckeckbox' type='checkbox' id='checkBoxForMenuTag' />\n            <div className='logoWrapper'>\n                <Logo  for='checkBoxForMenuTag'/>\n            </div>\n            <div className='menuWrapper'>\n                <Menu />\n            </div>\n        </div>\n    )\n}\n\nexport default NavigationBar\n\n\n\n","import React from 'react'\nimport './Footer.css'\n\nfunction Footer() {\n    return (\n        <div className='footerRoot'>\n            <div className='iamgeWrapper'>\n                <img src='/Home/brian-kyed-Qm4yrKLiawY-unsplash.jpg' alt='' />\n            </div>\n            <p className=\"text1\">\n                <span>Helping others</span>\n            </p>\n            <p className=\"text2\">\n                <span>Helps yourselves</span>\n            </p>\n        </div>\n    )\n}\n\nexport default Footer\n","import React ,{useEffect,useState,useRef} from 'react'\nimport Hls from 'hls.js'\nimport './VodPlayer.css'\n\nfunction VodPlayer(props) {\n\n    const videoRef = useRef();\n    const playerWrapperRef = useRef(null)\n    const [playerWidth,setPlayerWidth] = useState(200)\n    const [playerHeight,setPlayerHeight] = useState(200)\n\n    useEffect(() => {\n\n        setPlayerWidth(playerWrapperRef.current.clientWidth) ;\n        setPlayerHeight(playerWrapperRef.current.clientHeight);\n        \n        // on component creaction\n        // const m3u8url = 'http://localhost:3000/hls/sample1_360p.m3u8';\n        // const m3u8url = props.m3u8url ;\n        const m3u8url = 'https://decensormedia.org/hls/sample1_360p.m3u8'\n\n        const Hls_config = {\n            autoStartLoad: true,\n            startPosition: -1,\n            debug: false,\n            capLevelOnFPSDrop: false,\n            capLevelToPlayerSize: false,\n            defaultAudioCodec: undefined,\n            initialLiveManifestSize: 1,\n            maxBufferLength: 30,\n            maxMaxBufferLength: 600,\n            maxBufferSize: 60 * 1000 * 1000,\n            maxBufferHole: 0.5,\n            highBufferWatchdogPeriod: 2,\n            nudgeOffset: 0.1,\n            nudgeMaxRetry: 3,\n            maxFragLookUpTolerance: 0.25,\n            liveSyncDurationCount: 3,\n            liveMaxLatencyDurationCount: Infinity,\n            liveDurationInfinity: false,\n            liveBackBufferLength: Infinity,\n            enableWorker: true,\n            enableSoftwareAES: true,\n            manifestLoadingTimeOut: 10000,\n            manifestLoadingMaxRetry: 1,\n            manifestLoadingRetryDelay: 1000,\n            manifestLoadingMaxRetryTimeout: 64000,\n            startLevel: undefined,\n            levelLoadingTimeOut: 10000,\n            levelLoadingMaxRetry: 4,\n            levelLoadingRetryDelay: 1000,\n            levelLoadingMaxRetryTimeout: 64000,\n            fragLoadingTimeOut: 20000,\n            fragLoadingMaxRetry: 6,\n            fragLoadingRetryDelay: 1000,\n            fragLoadingMaxRetryTimeout: 64000,\n            startFragPrefetch: false,\n            testBandwidth: true,\n            progressive: false,\n            lowLatencyMode: true,\n            fpsDroppedMonitoringPeriod: 5000,\n            fpsDroppedMonitoringThreshold: 0.2,\n            appendErrorMaxRetry: 3,\n            // loader: customLoader,\n            // fLoader: customFragmentLoader,\n            // pLoader: customPlaylistLoader,\n            // xhrSetup: XMLHttpRequestSetupCallback,\n            // fetchSetup: FetchSetupCallback,\n            // abrController: AbrController,\n            // bufferController: BufferController,\n            // capLevelController: CapLevelController,\n            // fpsController: FPSController,\n            // timelineController: TimelineController,\n            enableWebVTT: true,\n            enableIMSC1: true,\n            enableCEA708Captions: true,\n            stretchShortVideoTrack: false,\n            maxAudioFramesDrift: 1,\n            forceKeyFrameOnDiscontinuity: true,\n            abrEwmaFastLive: 3.0,\n            abrEwmaSlowLive: 9.0,\n            abrEwmaFastVoD: 3.0,\n            abrEwmaSlowVoD: 9.0,\n            abrEwmaDefaultEstimate: 500000,\n            abrBandWidthFactor: 0.95,\n            abrBandWidthUpFactor: 0.7,\n            abrMaxWithRealBitrate: false,\n            maxStarvationDelay: 4,\n            maxLoadingDelay: 4,\n            minAutoBitrate: 0,\n            emeEnabled: false,\n            widevineLicenseUrl: undefined,\n            drmSystemOptions: {},\n            // requestMediaKeySystemAccessFunc: requestMediaKeySystemAccess,\n        };\n        \n        let hls = '';\n        \n        // step 1, see if supported \n        if (Hls.isSupported()){\n\n        console.log('hello hls.js')\n        hls = new Hls(Hls_config);\n\n        // step 2, bind Hls instance with video element\n        hls.detachMedia();\n        hls.attachMedia(videoRef.current)\n        // MEDIA_ATTACHED event is fired by hls object once MediaSource is ready\n        hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n            console.log('video and hls.js are now bound together !');\n            // step 3, load a manifest \n            hls.loadSource(m3u8url);\n            hls.on(Hls.Events.FRAG_PARSED, (event, data)=>{\n            // console.log(`manifest loaded, found ${hls.levels.length} quality level`)\n            // console.log(data)\n            // step 4. play \n            videoRef.current.play();\n            })\n            // step 5. error handling \n            hls.on(Hls.Events.ERROR, function (event, data) {\n            if (data.fatal) {\n                switch (data.type) {\n                case Hls.ErrorTypes.NETWORK_ERROR:\n                    // try to recover network error\n                    console.log('fatal network error encountered, try to recover');\n                    hls.startLoad();\n                    break;\n                case Hls.ErrorTypes.MEDIA_ERROR:\n                    console.log('fatal media error encountered, try to recover');\n                    hls.recoverMediaError();\n                    break;\n                default:\n                    // cannot recover\n                    hls.destroy();\n                    break;\n                }\n            }\n            });\n\n            // hls.on(Hls.Events.)\n        })\n        \n\n        } else if (videoRef.current.canPlayType('application/vnd.apple.mpegurl')){\n        videoRef.current.src = m3u8url ;\n        } else {\n        alert('please use a modern browser to play the video')\n        }\n\n        // make player window size fully responsive \n        const updatePlayerSize = () => {\n\n            setPlayerWidth(playerWrapperRef.current.clientWidth) ;\n            setPlayerHeight(playerWrapperRef.current.clientHeight);\n\n        }\n        \n        window.addEventListener('resize', updatePlayerSize)\n\n\n        return () => {\n\n            window.removeEventListener('resize', updatePlayerSize)\n\n            if (hls){\n                hls.destroy();\n            }\n        }\n    }, [])\n    \n\n    return (\n        <div  className='vodPlayerRoot' ref={playerWrapperRef}>\n                <video \n                    className='videoPlayer'\n                    controls = {props.controls}\n                    preload = 'auto'\n                    ref={videoRef}\n                    width={playerWidth}\n                    height={playerHeight}\n                    autoPlay = {props.autoPlay}\n                />\n        </div>\n    )\n}\n\nexport default VodPlayer\n\n\n\n","import React, {useState,useCallback,useEffect,useRef} from 'react'\nimport './Home.css'\nimport CheckIcon from '@material-ui/icons/Check';\nimport VodPlayer from '../VodPlayer/VodPlayer'\n\nfunction Home(props) {\n\n    const [playerWidth,setPlayerWidth] = useState()\n    const [playerHeight,setPlayerHeight] = useState()\n    const [playVideo,setPlayVideo] = useState(false)\n    const [keyCnt,setKeyCnt] = useState(0)\n\n    const playerWrapperRef = useRef(null)\n    let videoBlogOfTeacher = '' ;\n\n\n    const handleClick2Play = (e) => {\n        window.playerWidth = playerWrapperRef.current.clientWidth ;\n        window.playerHeight = playerWrapperRef.current.clientHeight\n        setPlayVideo(true)\n    }\n  \n    let videoPlayerWindow = ''\n\n    if (playVideo === true) {\n\n        console.log(\"re-rendering .... \")\n        console.log(playerHeight,\"  \", window.playerWidth)\n\n        videoPlayerWindow = (\n                                <div className='imageWrapper' \n                                    ref={playerWrapperRef}\n                                    key = {keyCnt}\n                                >\n                                    <VodPlayer \n                                        m3u8url = 'http://localhost:3000/hls/sample1_360p.m3u8' \n                                        controls= {true}\n                                        autoPlay = {true}\n                                        \n                                    />\n                                </div>\n                            )\n    } else {\n        \n        videoPlayerWindow = (\n                                <div className='imageWrapper' ref={playerWrapperRef}>\n                                    <p className=\"banFromSocialMedia\">Ban Trump from social media :) LOL</p>\n                                    <div className='image'>\n                                        <img \n                                            src=\"Home/banTrump.png\" \n                                            onClick={handleClick2Play}\n                                        />\n                                    </div>\n                                    <svg width=\"56\" height=\"56\" \n                                        viewBox=\"0 0 56 56\" \n                                        xmlns=\"http://www.w3.org/2000/svg\" \n                                        class=\"playerSymbol\"\n                                        onClick={handleClick2Play}\n                                    >\n                                        <g fill=\"#FFF\" fill-rule=\"evenodd\">\n                                            <path d=\"M28 53c13.807 0 25-11.193 25-25S41.807 3 28 3 3 14.193 3 28s11.193 25 25 25zm0 3C12.536 56 0 43.464 0 28S12.536 0 28 0s28 12.536 28 28-12.536 28-28 28z\"></path>\n                                            <path d=\"M37.232 27.91L22 36.82V19z\"></path>\n                                        </g>\n                                    </svg>\n                                </div>\n                            )\n    }\n\n\n    return (\n        <div className='Home'>\n\n            <div className='Banner'>\n                <div className=\"imageWrapper\">\n                    <img src='/Home/banner.jpg' alt='' />\n                </div>\n                <div className=\"textArea\">\n                    <p className='header1'>\n                        <span>SOCIAL MEDIA REVOLUTION</span>\n                    </p>\n                    <p className='header2'>\n                        <span>replace social media apps with your own website</span>\n                    </p>\n\n                    <div className=\"bulletPoint firstRow\">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'whitesmoke', fontSize: \"20px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span>peer to peer communication & encryption</span>\n                        </p>\n                    </div>\n                    <div className=\"bulletPoint \">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'whitesmoke', fontSize: \"20px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span>store privacy at home</span>\n                        </p>\n                    </div>\n                    <div className=\"bulletPoint\">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'whitesmoke', fontSize: \"20px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                        <span className=\"emphas\" >NO</span> <span>Censorship</span>\n                        </p>\n                    </div>\n                    <div className=\"bulletPoint\">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'whitesmoke', fontSize: \"20px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span className=\"emphas\">NO</span> <span>data collection</span>\n                        </p>\n                    </div>\n                    <div className=\"bulletPoint \">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'whitesmoke', fontSize: \"20px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span className=\"emphas\" >decentralized </span> <span>as human nature</span>\n                        </p>\n                    </div>\n                    <div className=\"bulletPoint \">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'whitesmoke', fontSize: \"20px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span>your website, your garden, your business, your kingdom</span>\n                        </p>\n                    </div>\n                    <div className=\"bulletPoint \">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'whitesmoke', fontSize: \"20px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span>we teach you how to build such open system</span>\n                        </p>\n                    </div>\n\n                    <div className=\"click2Watch\">\n                            watch video\n                    </div>\n\n                </div>\n            </div> \n\n            {/* social media pig */}\n            <div className='socialMeidaPig' >\n                <div className=\"left\">\n                    <img src='/Home/pig.jpg' alt='' />\n                </div>\n                <div className=\"right\">\n                    <div className=\"textContainer\">\n                        <p className=\"header1\">\n                            <span>We give pig free food for their meat</span>\n                        </p>\n                        <p className=\"header1\">\n                            <span>Big-tech companies give us free social media for </span>\n                        </p>\n                        <p className=\"header1\">\n                            <span>our privacy, control, money ... </span>\n                        </p>\n                        <p className=\"header2 header2-1\">\n                            <span>there is no free meal</span>\n                        </p>\n                        <p className=\"header2\">\n                            <span style={{color: 'red'}}>freedom is never free</span>\n                        </p>\n                        <p className=\"header2 header2-2\">\n                            <span>spend more time with our own</span>\n                        </p>\n                        <p className=\"header2\">\n                            <span>websites</span>\n                        </p>\n                        <p className=\"header2\">\n                            <span>it brings us real gold</span>\n                        </p>\n                    </div>\n                    <div className=\"imageWrapper\">\n                        {/* <img src='/Home/warren-wong-kMRMcUcO81M-unsplash.jpg' alt='' /> */}\n                    </div>\n                </div>\n            </div>\n\n            {/* what is good about this ecosystem */}\n            <div className=\"ecosystem\">\n                <div className=\"imageWrapperMain\">\n                    <img src='/Home/randy-tarampi-U2eUlPEKIgU-unsplash.jpg' alt='' />\n                </div>\n                <p className=\"header1\">\n                    <span>Business opportunity for all</span>\n                </p>\n                <div className=\"websiteOwner\">\n                    <p className=\"top\">website owner</p>\n                    <div className='contentWrapper'>\n                        <div className=\"imageWrapper\">\n                            {/* <img src='/Home/johan-godinez-dDYRYivNzbI-unsplash.jpg' alt='' /> */}\n                        </div>\n\n                        <div className=\"bulletPoint \">\n                            <div className=\"iconWrapper\">\n                                <CheckIcon style={{ color: 'whitesmoke', fontSize: \"15px\" }} />\n                            </div>\n                            <p className=\"buletText\">\n                                <span>with talent,for instance,exellent blogs, or videos, you can bring feeds to your website, no platform takes the major income of the advertisement from you.</span>\n                            </p>\n                        </div>\n                        <div className=\"bulletPoint \">\n                            <div className=\"iconWrapper\">\n                                <CheckIcon style={{ color: 'whitesmoke', fontSize: \"15px\" }} />\n                            </div>\n                            <p className=\"buletText\">\n                                <span>run your onw ecommerce website,the more connections you have,the more opportunity you have,besides your connection is one of the source,you can also do SEO promotion as normal webstie does</span>\n                            </p>\n                        </div>\n                        <div className=\"bulletPoint \">\n                            <div className=\"iconWrapper\">\n                                <CheckIcon style={{ color: 'whitesmoke', fontSize: \"15px\" }} />\n                            </div>\n                            <p className=\"buletText\">\n                                <span>there are many more opportunities for you to start from small business</span>\n                            </p>\n                        </div>\n                        <div className=\"bulletPoint \">\n                            <div className=\"iconWrapper\">\n                                <CheckIcon style={{ color: 'whitesmoke', fontSize: \"15px\" }} />\n                            </div>\n                            <p className=\"buletText\">\n                                <span>no longer be a pig on any platform</span>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"webDesigner\">\n                    <p className=\"top\">web developer</p>\n                    <div className='contentWrapper'>\n                        <div className=\"imageWrapper\">\n                            {/* <img src='/Home/markus-spiske-1LLh8k2_YFk-unsplash.jpg' alt='' /> */}\n                        </div>\n                        <div className=\"bulletPoint \">\n                            <div className=\"iconWrapper\">\n                                <CheckIcon style={{ color: 'whitesmoke', fontSize: \"15px\" }} />\n                            </div>\n                            <p className=\"buletText\">\n                                <span>more job opportunities, everyone around you is your potential customer</span>\n                            </p>\n                        </div>\n                        <div className=\"bulletPoint \">\n                            <div className=\"iconWrapper\">\n                                <CheckIcon style={{ color: 'whitesmoke', fontSize: \"15px\" }} />\n                            </div>\n                            <p className=\"buletText\">\n                                <span>provide peer to peer encryption solution</span>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div className='vpsProvider'>\n                    <p className=\"top\">VPS provider</p>\n                    <div className='contentWrapper'>\n                        <div className=\"imageWrapper\">\n                            {/* <img src='/Home/nathan-anderson-xV3CHzfhkjE-unsplash.jpg' alt='' /> */}\n                        </div>\n                        <div className=\"bulletPoint \">\n                            <div className=\"iconWrapper\">\n                                <CheckIcon style={{ color: 'whitesmoke', fontSize: \"15px\" }} />\n                            </div>\n                            <p className=\"buletText\">\n                                <span>VPS(virtual private server) will embrace great opportunities (ps: in layman's term, server is just another name for computer without display)</span>\n                            </p>\n                        </div>\n                        <div className=\"bulletPoint \">\n                            <div className=\"iconWrapper\">\n                                <CheckIcon style={{ color: 'whitesmoke', fontSize: \"15px\" }} />\n                            </div>\n                            <p className=\"buletText\">\n                                <span>micro cloud data center and home data center will be all over the place</span>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <p className=\"future\">\n                    <span>Everyone will have a website, just like 20 years ago people believe everyone would have at least one computer</span>\n                </p>\n                <div className=\"flower\">\n                    <img src='/Home/marc-schulte-Xxf_Hsq62lA-unsplash.jpg' alt='' />\n                </div>\n            </div>\n        \n            {/*******************   comparison ************************************/}\n            <div className=\"comparison\">\n                <div className=\"topBar\">\n                    <div className=\"centralized\">\n                        <span>centralized social media</span>\n                    </div>\n                    <p className=\"vs\">VS</p>\n                    <div className=\"decentralized\">\n                        <span>decentralized website ecosystem</span>\n                    </div>\n                </div>\n\n                <div className=\"imageWrapper-centralized\">\n                    <img src=\"Home/centralized_system.png\" alt=\"\" />\n                </div>\n\n                <div className=\"contentWrapper1\">\n                    <div className=\"contentTopBar\">\n                        <p><span>Centralized social media</span> <span style={{color:'red'}}>Cons</span></p>\n                    </div>\n                    <div className=\"bulletPoint \">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'rgb(192, 166, 20)', fontSize: \"25px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span>as shown above, all user data has to go thru the central data center before reaching your peer</span>\n                        </p>\n                    </div>\n                    <div className=\"bulletPoint \">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'rgb(192, 166, 20)', fontSize: \"25px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span>user privacy has to be stored in social media company's central data base, so privacy is not guaranteed, they know what you know, but you don't know what they know</span>\n                        </p>\n                    </div>\n                    <div className=\"bulletPoint \">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'rgb(192, 166, 20)', fontSize: \"25px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span>AI may collect and analyze your data, and predict your behavior based on the data you have submitted to their database volutarily, that's why you receive so many advertisement that appeels to you</span>\n                        </p>\n                    </div>\n                    <div className=\"bulletPoint \">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'rgb(192, 166, 20)', fontSize: \"25px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span>are you so enjoying having private conversation in some rich guy's room that is free of rental?</span>\n                        </p>\n                    </div>\n                </div>\n\n                <div className=\"contentWrapper2\">\n                    <div className=\"contentTopBar\">\n                        <p><span>DeCentralized social media</span> <span style={{color: 'greenyellow'}}>Pros</span></p>\n                    </div>\n\n                    <div className=\"bulletPoint \">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'rgba(116, 115, 112, 0.8)', fontSize: \"25px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span>as shown in below diagram, the connection is fully peer to peer, just like you knock on someone's door directly, no middleman is needed for passing your conversation back and forth</span>\n                        </p>\n                    </div>\n\n                    <div className=\"bulletPoint \">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'rgba(116, 115, 112, 0.8)', fontSize: \"25px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span>you own everything, the private cloud server and home server, so no one can easily collect your data, privacy is guaranteed</span>\n                        </p>\n                    </div>\n\n                    <div className=\"bulletPoint \">\n                        <div className=\"iconWrapper\">\n                            <CheckIcon style={{ color: 'rgba(116, 115, 112, 0.8)', fontSize: \"25px\" }} />\n                        </div>\n                        <p className=\"buletText\">\n                            <span>front end server is served as front gate to your home,by which people can find you with your public IP address, private data is stored at home server,if you are concerned about the security of cloud server, which you can't see every day</span>\n                        </p>\n                    </div>\n                    \n                </div>\n\n                <div className=\"imageWrapper-decentralized\">\n                    <img src=\"Home/decentralized.png\" alt=\"\" />\n                </div>\n\n            </div>\n        \n            <div className=\"videoPlayerWrapper\">\n                <div className=\"playerWrapper\">\n                    {videoPlayerWindow}\n                </div>\n                <div className=\"contentWrapper\">\n                    <p className=\"header1\">\n                        <span>DeCensorship</span> <span style={{color: 'red'}}>&</span> <span>DeCentralization</span>\n                    </p>\n                    <p className=\"vodDemoNotes\">\n                        <span>PS: for Video On Demand demostration purpose</span>\n                    </p>\n                </div>\n            </div>\n\n        </div>\n    )\n}\n\nexport default Home\n","import React, { useState } from 'react'\nimport './Register.css'\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\nimport EmailIcon from '@material-ui/icons/Email';\nimport LockIcon from '@material-ui/icons/Lock';\nimport {config_json} from '../../../global_config'\nimport {userEndPoint} from '../../../ipconfig'\nimport axios from \"axios\";\nimport getSafeProperty from '../../../utility/getSafeProperty'\nimport handleError from '../../../utility/handleError';\n\nfunction Register(props) {\n\n    const [User,setUser] = useState({userName: '',\n                                     email: '',\n                                     password: '',\n                                     passwordRepeat: '',\n                                     isSuper: false\n                                    })\n\n    const handleOnSubmitForm = (e) => {\n        e.preventDefault()\n\n        if (User.userName ==='' ||\n            User.email ==='' ||\n            User.password === '' ||\n            User.passwordRepeat === ''\n        ) {\n            alert('null input detected')\n            return ;\n        }\n\n        if (User.password !== User.passwordRepeat) {\n            alert('password not equal to passwordRepeat !')\n            return ;\n        }\n\n        // props.register(User.userName,User.email,User.password, User.passwordRepeat,User.isSuper)\n\n        const formDataObj = {\n            username : User.userName ,\n            email : User.email,\n            password : User.password,\n            repeat_password: User.passwordRepeat,\n            isSuper: User.isSuper\n        }\n        \n        axios\n            .post(`${userEndPoint}/?action=registration`,\n                    JSON.stringify(formDataObj),\n                    config_json  \n                )\n            .then( res => {\n\n                console.log(res)\n                const isSuccess = getSafeProperty(()=>res.data.isSuccess, undefined)\n                if (isSuccess === true){\n                    props.history.push('/profile/login')\n                }\n            })\n            .catch(error => {\n                handleError(error,'Register.js','handleOnSubmitForm')\n            })\n\n    }\n\n    const handleOnChange = (e) => {\n        e.preventDefault()\n        const name = e.target.name ;\n        const value = e.target.value ;\n        setUser( {...User , ...{[name] : value}})\n    }\n\n    return (\n        <div className='registerRoot'>\n            <form className='form' onSubmit={handleOnSubmitForm} autoComplete=\"off\">\n                <p className='registerName'>\n                    <span>注冊</span>\n                </p>\n\n                <div className='formInputWrapper'>\n                    \n                    <div className='formInput'>\n                        <div className='wrapper'>\n                            <div className='iconWrapper'>\n                                <AccountBoxIcon style={{ color: 'green', fontSize: \"35px\" }} />\n                            </div>\n                            <input \n                                type='text' \n                                value={User.userName} \n                                name='userName' \n                                placeholder='請輸入名字'\n                                onChange = {handleOnChange}\n                            /> \n                        </div>\n\n                        <div className='wrapper'>\n                            <div className='iconWrapper'>\n                                <EmailIcon style={{ color: 'green', fontSize: \"35px\" }} />\n                            </div>\n                            <input \n                                type='email' \n                                value={User.email} \n                                name='email' \n                                placeholder='請輸入電郵'\n                                onChange = {handleOnChange}\n                            /> \n                        </div>\n\n                        <div className='wrapper'>\n                            <div className='iconWrapper'>\n                                <LockIcon style={{ color: 'green', fontSize: \"35px\" }} />\n                            </div>\n                            <input \n                                type='password' \n                                value={User.password} \n                                name='password' \n                                placeholder='請輸入密碼'\n                                onChange = {handleOnChange}\n                            /> \n                        </div>\n\n                        <div className='wrapper'>\n                            <div className='iconWrapper'>\n                                <LockIcon style={{ color: 'green', fontSize: \"35px\" }} />\n                            </div>\n                            <input \n                                type='password' \n                                value={User.passwordRepeat} \n                                name='passwordRepeat' \n                                placeholder='確認密碼'\n                                onChange = {handleOnChange}\n                            /> \n                        </div>\n\n                    </div>\n\n                </div>\n\n                <div className='submit'>\n                    <input type='submit' value='提交' />\n                </div>\n            </form>\n        </div>\n    )\n}\n\n\nexport default Register;","import React, { useState , useEffect} from 'react'\nimport './Login.css'\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\nimport EmailIcon from '@material-ui/icons/Email';\nimport LockIcon from '@material-ui/icons/Lock';\nimport { connect } from 'react-redux';\nimport * as actionTypes from '../../../store/auth/actionTypes'\nimport {\n    authLoginAction\n    } from './../../../store/auth/actions'\n\n\nfunction Login(props) {\n\n    const [User,setUser] = useState({userName: '',\n                                     password: '',\n                                    })\n\n    const handleOnSubmitForm = (e) => {\n        const functionName = \"handleOnSubmitForm\"\n\n        e.preventDefault()\n        if (!User.userName  ||\n            !User.password \n        ) {\n            alert('null input detected')\n            return ;\n        }\n\n        props.authLoginAction(User.userName,User.password)\n\n    }\n\n    const handleOnChange = (e) => {\n        e.preventDefault()\n        const name = e.target.name ;\n        const value = e.target.value ;\n        setUser( {...User , ...{[name] : value}})\n    }\n\n    useEffect(() => {\n        \n        if(props.loginStatus === actionTypes.LOGIN_STATUS_SUCCEED){\n            props.history.push(\"/\")\n        }\n\n        return () => {\n            \n        }\n    }, [props.loginStatus])\n\n    return (\n        <div className='loginRoot'>\n            <form className='form' onSubmit={handleOnSubmitForm} autoComplete=\"off\">\n                <p className='registerName'>\n                    <span>登入</span>\n                </p>\n\n                <div className='formInputWrapper'>\n                    \n                    <div className='formInput'>\n                        <div className='wrapper'>\n                            <div className='iconWrapper'>\n                                <AccountBoxIcon style={{ color: 'green', fontSize: \"35px\" }} />\n                            </div>\n                            <input \n                                type='text' \n                                value={User.userName} \n                                name='userName' \n                                placeholder='請輸入用戶名或電郵'\n                                onChange = {handleOnChange}\n                            /> \n                        </div>\n\n                        <div className='wrapper'>\n                            <div className='iconWrapper'>\n                                <LockIcon style={{ color: 'green', fontSize: \"35px\" }} />\n                            </div>\n                            <input \n                                type='password' \n                                value={User.password} \n                                name='password' \n                                placeholder='請輸入密碼'\n                                onChange = {handleOnChange}\n                            /> \n                        </div>\n\n                    </div>\n\n                </div>\n\n                <div className='submit'>\n                    <input type='submit' value='提交' />\n                </div>\n            </form>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        loginStatus: state.auth.status,\n    };\n  };\n  \n  const mapDispatchToProps = dispatch => {\n    return {\n        authLoginAction : (userName,password) => dispatch(authLoginAction(userName,password))\n    };\n  };\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n) (Login)","import React,{useRef,useState} from 'react'\nimport './OrderBy.css'\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nfunction OrderBy(props) {\n\n    return (\n\n        <div className='orderByRoot'>\n\n            <div className='aTagAndIcon'>\n                <a  style={props.style}>\n                    <span>{props.menuName}</span>\n                </a>\n                <div className='iconWrapper'  onClick={()=>{props.showMenuCallBack()}} >\n                    <ExpandMoreIcon style={{ color: props.style.color, fontSize: \"20px\" }} />\n                </div>\n            </div>\n\n            <div className='menuContent' style={{display: props.showMenu==true? 'block' : 'none'}} >\n                {props.children}\n            </div>\n        </div>\n    )\n}\n\nexport default OrderBy\n","import React from 'react'\nimport './OrderByDropDownItem.css'\n\nfunction OrderByDropDownItem(props) {\n    return (\n        <div className='orderByDropDownItemRoot'>\n            <a  >\n                <span style={props.style} >{props.itemName}</span>\n            </a>\n        </div>\n    )\n}\n\nexport default OrderByDropDownItem\n","import React from 'react'\nimport './CourseCard.css'\nimport {Link} from 'react-router-dom'\nimport { useHistory } from \"react-router-dom\";\n\nfunction CourseCard(props) {\n    let history = useHistory();\n\n    const gotoCoursePage = (index) => {\n        \n        // history.push(\"/\")\n        history.push(`/course/${props.index}`)\n        // <Route path='/course/:id'  component={CourseDetailView} />\n    }\n\n\n    return (\n        <div className='courseCardRoot'>\n            {/* <div className='innerBox' onClick={()=>{props.click4more(props.index)}}> */}\n            <div className='innerBox' onClick={()=>{gotoCoursePage(props.index)}}>\n                <div className='courseImage'>\n                    <img src = {props.course_img} />\n                </div>\n                <div className='coursePriceNinfo'>\n                    <p><span>{props.title}</span></p>\n                    {/* <p className='more' onClick={()=>{props.click4more(props.index)}}> */}\n                    <p className='more' onClick={()=>{gotoCoursePage(props.index)}}>\n                        <span>More</span>\n                    </p>\n                </div>\n                <div className='courseBrief'>\n                    <p><span>{props.brief_intro}</span></p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default CourseCard\n","import React from 'react'\nimport './ContentList.css'\nimport CourseCard from '../../Home/CourseCard/CourseCard'\n\nfunction ContentList(props) {\n\n\n    return (\n        <div className='contentListRoot'>\n            {props.Courses.map((item,index) => (\n                    <div className='courseItem' \n                        key={index}\n                    >\n                        <CourseCard \n                            course_img={item.course_img}\n                            title={item.title}\n                            brief_intro={item.brief_intro}\n                            click4more={props.openRecommendedCourseDetailIframeCallBack}\n                            index={index}\n                        />\n                    </div>   \n            ))}\n        </div>\n    )\n}\n\nexport default ContentList\n\n\n","import React, {useState,useEffect,useRef} from 'react'\nimport './CoursePreViewDetail.css'\nimport getSafeProperty from '../../../../../utility/getSafeProperty'\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport MenuOpenIcon from '@material-ui/icons/MenuOpen';\nimport VodPlayer from '../../../VodPlayer/VodPlayer'\nimport {Link} from 'react-router-dom'\n\n\nfunction CoursePreViewDetail(props) {\n\n    const [CourseArray, setCourseArray] = useState([])\n    const [SelectedId, setSelectedId] = useState(0)\n    const imageThumbNailsRef = useRef(null)\n    const [playVideo,setPlayVideo] = useState(false)\n    const playerWrapperRef = useRef(null)\n    const [playerWidth,setPlayerWidth] = useState()\n    const [playerHeight,setPlayerHeight] = useState()\n\n\n    let state = {\n        reachRightEnd : 0 ,\n        previousValuesForScrollLeft0 : null,\n        previousValuesForScrollLeft1 : null,\n        previousValuesForScrollLeft2 : null,\n    }\n\n    let videoInftroOfCourse = '' ;\n\n    useEffect(\n        () => {\n            // on component mount \n            videoInftroOfCourse = (\n                <div className='imageWrapper' ref={playerWrapperRef}>\n                    <img \n                        src={CourseArray.length == 0 ? '' : CourseArray[SelectedId].profile_image} \n                        onClick={handleClick2Play}\n                    />\n                    <svg width=\"56\" height=\"56\" \n                        viewBox=\"0 0 56 56\" \n                        xmlns=\"http://www.w3.org/2000/svg\" \n                        class=\"playerSymbol\"\n                        onClick={handleClick2Play}\n                    >\n                        <g fill=\"#FFF\" fill-rule=\"evenodd\">\n                            <path d=\"M28 53c13.807 0 25-11.193 25-25S41.807 3 28 3 3 14.193 3 28s11.193 25 25 25zm0 3C12.536 56 0 43.464 0 28S12.536 0 28 0s28 12.536 28 28-12.536 28-28 28z\"></path>\n                            <path d=\"M37.232 27.91L22 36.82V19z\"></path>\n                        </g>\n                    </svg>\n                </div>\n            )\n\n            addEventListener2Component();\n            addEventListener2ImgeDetail();\n            // SelectedIdRef.current = SelectedId ;\n            window.imageIdSelted = Number(0)\n\n            console.log(props.CourseArray)\n\n            if (props.CourseArray) {\n\n                const CourseArray = getSafeProperty(()=>props.CourseArray, 'undefined')\n                if (CourseArray  !== 'undefined') {\n                    setCourseArray(CourseArray)\n                }\n            }\n\n            setSelectedId(props.selectedCourseArrayIndex)\n\n            return () => {\n                // component unmount \n                removeEventListenerFromComponent();\n                removeEventListener2ImgeDetail();\n            }\n        },\n\n        [])\n\n    \n    useEffect(\n        () => {\n            // console.log(SelectedId)\n\n            // SelectedIdRef.current = SelectedId ;\n            // state.imageIdSeleted = SelectedId ;\n            // window.imageIdSelted = Number(SelectedId) ;\n            // console.log(\"window.imageIdSelted, \", window.imageIdSelted)\n\n            setPlayVideo(false)\n\n            console.log (\"CourseArray.length : \",CourseArray.length)\n\n            const imageWidth = imageThumbNailsRef.current.scrollWidth / CourseArray.length\n            const width2Set = imageWidth * SelectedId ;\n            if (width2Set + window.innerWidth < imageThumbNailsRef.current.scrollWidth) {\n                imageThumbNailsRef.current.scrollLeft =  width2Set - window.innerWidth / 2 ;\n            } else {\n                imageThumbNailsRef.current.scrollLeft = imageThumbNailsRef.current.scrollWidth - window.innerWidth ;\n            }\n\n        },\n\n    [SelectedId])\n\n    useEffect(\n        () => {\n\n\n            console.log (\"CourseArray.length : \",CourseArray.length)\n            window.ImageArrayLength = CourseArray.length ;\n\n        },\n\n    [CourseArray])\n\n    async function incrementToGlobal (b) {\n\n        var tempValue = Number(window.imageIdSelted) + Number(b) \n\n        console.log(window.ImageArrayLength)\n\n        if (window.ImageArrayLength) {     // strange bug, why CourseArray.length always returns 0 when the image list is rendered correctly\n            if (tempValue > window.ImageArrayLength-1){\n                tempValue = window.ImageArrayLength-1 \n            } else if (tempValue < 0) {\n                tempValue = 0 \n            }\n        }\n\n        console.log(tempValue)\n\n        window.imageIdSelted = Number(tempValue) ;\n        setSelectedId(window.imageIdSelted)\n\n        return window.imageIdSelted\n    }\n\n    const handlePlayerWinderResized = (e) => {\n        // console.log(`${playerWrapperRef.current.offsetHeight} vs ${playerWrapperRef.current.clientHeight}`)\n        // console.log(`${playerWrapperRef.current.offsetWidth} vs ${playerWrapperRef.current.clientWidth}`)\n        const componentHeight = getSafeProperty(()=>playerWrapperRef.current.offsetHeight, 'undefined')\n        if(componentHeight != 'undefined'){\n            setPlayerHeight(componentHeight)\n        }\n        const componentWidth = getSafeProperty(()=>playerWrapperRef.current.offsetWidth, 'undefined')\n        if(componentWidth != 'undefined'){\n            setPlayerHeight(componentWidth)\n        }  \n    }\n\n    const addEventListener2Component = (e) => {\n\n        imageThumbNailsRef.current.addEventListener('wheel', handleOnWheel)\n        window.addEventListener('resize', handlePlayerWinderResized )\n    }\n    \n    const removeEventListenerFromComponent = (e) => {\n        if (imageThumbNailsRef.current) {\n            imageThumbNailsRef.current.removeEventListener('wheel',handleOnWheel)\n        }\n    }\n\n    const addEventListener2ImgeDetail = (e) => {\n        playerWrapperRef.current.addEventListener('wheel', handleSwitchImgOnWheel)\n    }\n    \n    const removeEventListener2ImgeDetail = (e) => {\n        if (playerWrapperRef.current) {\n            playerWrapperRef.current.removeEventListener('wheel',handleSwitchImgOnWheel)\n        }\n    }\n\n    const handleOnclickToSelect = (e,id) => {\n        setSelectedId(id)\n    }\n\n    const handleOnClickForward = (e) => {\n        let SelectedId_val = SelectedId + 1 ;\n        if (SelectedId_val > CourseArray.length-1) {\n            SelectedId_val = CourseArray.length-1;\n        }\n        setSelectedId(SelectedId_val )\n    }\n\n    const handleOnClickBack = (e) => {\n        let SelectedId_val = SelectedId - 1 ;\n        if (SelectedId_val < 0) {\n            SelectedId_val = 0;\n        }\n        setSelectedId(SelectedId_val )\n    }\n\n    const handleSwitchImgOnWheel = async(e) => {\n        e.preventDefault();\n\n        if (e.deltaY > 0) {\n            await incrementToGlobal(1)\n        } else {\n            await incrementToGlobal(-1)\n        }\n    }\n\n    function handleOnWheel(e){\n\n        // console.log(state.reachRightEnd, state.previousValuesForScrollLeft0,\n        //     state.previousValuesForScrollLeft1,state.previousValuesForScrollLeft2)\n\n        if (e.deltaY < 0) {\n            // scroll up \n            if(window.scrollY == 0) {\n                e.preventDefault(); // disable parent scroll \n                \n                imageThumbNailsRef.current.scrollLeft -= imageThumbNailsRef.current.scrollWidth * 0.02 ;\n                // if (imageThumbNailsRef.current.scrollLeft <=0) {\n                //     imageThumbNailsRef.current.scrollLeft = 0 ;\n                // }\n                // reset if scroll left \n                state.reachRightEnd = 0 ;\n                state.previousValuesForScrollLeft0 = 0 ;\n                state.previousValuesForScrollLeft1 = 0 ;\n                state.previousValuesForScrollLeft2 = 0 ;\n\n            }\n            //if parent scrolly != equal to 0 , scroll parent first\n        } else {\n            //scroll down , scroll child first , then propagate to parent scroll\n            if (state.reachRightEnd == 0 ){ // scroll right , never can reach maximum\n                // find a signal indicating reaching the right edge.\n                e.preventDefault(); // disable parent scroll \n                imageThumbNailsRef.current.scrollLeft += imageThumbNailsRef.current.scrollWidth * 0.02;\n                \n                state.previousValuesForScrollLeft2 = state.previousValuesForScrollLeft1;\n                state.previousValuesForScrollLeft1 = state.previousValuesForScrollLeft0;\n                state.previousValuesForScrollLeft0 = imageThumbNailsRef.current.scrollLeft ;\n                if (state.previousValuesForScrollLeft0 == state.previousValuesForScrollLeft1 &&\n                    state.previousValuesForScrollLeft1 == state.previousValuesForScrollLeft2 && \n                    state.previousValuesForScrollLeft1 >  10\n                    ){\n                        state.reachRightEnd = 1 ;\n                    }\n            }\n        }\n\n        // console.log(imageThumbNailsRef.current.scrollLeft, imageThumbNailsRef.current.scrollWidth)\n        \n\n    }\n\n    const handleClick2Play = (e) => {\n        setPlayerWidth(playerWrapperRef.current.clientWidth)\n        setPlayerHeight(playerWrapperRef.current.clientHeight)\n        setPlayVideo(true)\n    }\n\n\n    if (playVideo === true) {\n\n        videoInftroOfCourse = (\n                                <div className='imageWrapper' ref={playerWrapperRef}>\n                                    <VodPlayer \n                                        m3u8url = 'http://localhost/hls/360p.m3u8' \n                                        controls= {true}\n                                        autoPlay = {true}\n                                        width = {playerWidth}\n                                        height = {playerHeight}\n                                    />\n                                </div>\n                            )\n    } else {\n        \n        videoInftroOfCourse = (\n                                <div className='imageWrapper' ref={playerWrapperRef}>\n                                    <img \n                                        src={CourseArray.length == 0 ? '' : CourseArray[SelectedId].course_img} \n                                        onClick={handleClick2Play}\n                                    />\n                                    <svg width=\"56\" height=\"56\" \n                                        viewBox=\"0 0 56 56\" \n                                        xmlns=\"http://www.w3.org/2000/svg\" \n                                        class=\"playerSymbol\"\n                                        onClick={handleClick2Play}\n                                    >\n                                        <g fill=\"#FFF\" fill-rule=\"evenodd\">\n                                            <path d=\"M28 53c13.807 0 25-11.193 25-25S41.807 3 28 3 3 14.193 3 28s11.193 25 25 25zm0 3C12.536 56 0 43.464 0 28S12.536 0 28 0s28 12.536 28 28-12.536 28-28 28z\"></path>\n                                            <path d=\"M37.232 27.91L22 36.82V19z\"></path>\n                                        </g>\n                                    </svg>\n                                </div>\n                            )\n    }\n\n    /**\n     *         margin-top: 30px;\n        margin-left: 10px;\n        margin-right: 10px;\n        color: white;\n        font-size: x-large;\n        font-weight: bold;\n     */\n\n    return (\n        <div className='coursePreViewDetailRoot'>\n            <input type='checkbox' id='imageDetalViewRootCheckbox' />\n            <div className='imageDetail'  >\n                {videoInftroOfCourse}\n                <div className='info'>\n                    <Link  \n                        className=\"name\"\n                        to=  {{                                                                    \n                                pathname : CourseArray.length == 0 ? \"#\" : `/course/${CourseArray[SelectedId][\"id\"]}`,\n                                myparams: {course_id :  CourseArray.length == 0 ? 0 : CourseArray[SelectedId][\"id\"]\n                                }\n                            \n                            }}\n                    >\n                        <span  >{CourseArray.length == 0 ? '' : CourseArray[SelectedId].title}</span>\n                    </Link>\n                    <hr />\n                    <p className='description'><span> {CourseArray.length == 0 ? '' : CourseArray[SelectedId].brief_intro} </span></p>\n                </div>\n                <div className='arrowForwardIconWrapper' onClick={handleOnClickForward} > \n                    <ArrowForwardIosIcon style={{ color: 'rgb(55,55,55)', fontSize: \"40px\" }} />\n                </div>\n                <div className='arrowBackIconWrapper' onClick={handleOnClickBack} > \n                    <ArrowBackIosIcon style={{ color: 'rgb(55,55,55)', fontSize: \"40px\" }}  />\n                </div>\n                <label className='icoMenuWrapper' for='imageDetalViewRootCheckbox'>\n                    <MenuOpenIcon style={{ color: 'rgb(55,55,55)', fontSize: \"30px\"}}  />\n                </label>\n            </div>\n\n            <div className='imageList' ref={imageThumbNailsRef}>\n                    {CourseArray.map((item,id) => (\n                        <div className='album' \n                            key={id}\n                        >\n                            <img src={item.course_img} \n                                onClick={(e)=>{handleOnclickToSelect(e,id)}}     \n                                style={\n                                    (SelectedId == id)? {borderStyle: 'solid', borderWidth: '2px', borderColor:'red' } : {}\n                                }\n                            />\n                            <p className='profileName'>\n                                <span>{item.title}</span>\n                            </p>\n                        </div>   \n                    ))}\n            </div>\n        </div>\n    )\n}\n\nexport default CoursePreViewDetail\n","import React from 'react'\nimport './CoursePreViewIframe.css'\nimport {Link} from 'react-router-dom'\nimport CoursePreViewDetail from './CoursePreViewDetail/CoursePreViewDetail'\nimport CloseIcon from '@material-ui/icons/Close';\n\nfunction CoursePreViewIframe(props) {\n\n    return (\n        <div className='coursePreViewIframeRoot'>\n            {/* iframeTopBar take the upper spacce of the iframe, close the iframe on clicking on the closeicon */}\n            <div className='iframeTopBar'>\n                <div className='visitMore'>\n                    <Link className='visitMoreLink'\n                        to=  {{                                                                    \n                                pathname : props.CourseArray.length == 0 ? \"#\" : `/course/${props.CourseArray[props.selectedCourseArrayIndex][\"id\"]}`\n                            }\n                        \n                        }\n                    >\n                        visit course page\n                    </Link>\n                </div>\n                {/* <Link \n                    to=  {{                                                                    \n                            pathname : CourseArray.length == 0 ? \"#\" : `/course/${CourseArray[SelectedId][\"id\"]}`,\n                            myparams: {course_id :  CourseArray.length == 0 ? 0 : CourseArray[SelectedId][\"id\"]\n                            }\n                        \n                        }}\n                    style={{marginTop: \"30px\", marginLeft: \"10px\", marginRight: \"10px\", color: \"black\", fontSize: \"x-large\", fontWeight: \"bold\", textDecoration: \"none\" }}\n                >\n                    <span>{CourseArray.length == 0 ? '' : CourseArray[SelectedId].title}</span>\n                </Link> */}\n\n                <div className='spacer'></div>\n\n                <div className='closeIconWrapper' onClick={props.handleOnClickClose}>\n                    <CloseIcon style={{ color: 'rgb(55,55,55)', fontSize: \"40px\" }} />\n                </div>\n            </div>\n            {/* it takes the whole bottom space of iframe */}\n            <div  className='preViewWindow'>\n                <CoursePreViewDetail CourseArray = {props.CourseArray} selectedCourseArrayIndex={props.selectedCourseArrayIndex} />    \n            </div>\n        </div>\n    )\n}\n\nexport default CoursePreViewIframe\n","import React,{useState} from 'react'\nimport './PageIndexing.css'\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport ArrowLeftIcon from '@material-ui/icons/ArrowLeft';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\n\nfunction PageIndexing(props) {\n\n    const pageItems = []\n\n    for (let i=0; i<props.TotalPageNum; i++){\n        pageItems.push(<p className='pageItem' key={i}><span>{i}</span></p>)\n    }\n\n    return (\n        <div className='pageIndexingRoot'>\n            <div className='innerWrapper'>\n                <div className='navItem'>\n                    <SkipPreviousIcon style={{ color: 'green', fontSize: \"30px\" }} />\n                </div>\n                <div className='navItem'>\n                    <ArrowLeftIcon style={{ color: 'green', fontSize: \"40px\" }} />\n                </div>\n                <div className='flexBoxesContainer'>\n                    {pageItems}\n                </div>\n                <div className='navItem'>\n                    <ArrowRightIcon style={{ color: 'green', fontSize: \"40px\" }} />\n                </div>\n                <div className='navItem'>\n                    <SkipNextIcon style={{ color: 'green', fontSize: \"30px\" }} />\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default PageIndexing\n\n\n","import React,{useState,useEffect} from 'react'\nimport './CourseListView.css'\nimport SearchIcon from '@material-ui/icons/Search';\nimport KeyboardReturnIcon from '@material-ui/icons/KeyboardReturn';\nimport OrderBy from './OrderBy/OrderBy'\nimport OrderByDropDownItem from './OrderBy/OrderByDropDownItem/OrderByDropDownItem'\nimport ContentList from './ContentList/ContentList'\nimport CoursePreViewIframe from '../Home/CoursePreViewIframe/CoursePreViewIframe'\nimport PageIndexing from './PageIndexing/PageIndexing'\n\nfunction CourseListView(props) {\n\n    const [searchKeyWords,setSearchKeyWords] = useState()\n    const [mouseOvered, setMouseOvered] = useState(false)\n    const [showMenu,setShowMenu] = useState(false)\n    const [selectedId,setSelectedId] = useState(0);\n    const [selectedCourseArray,setSelectedCourseArray] = useState([])\n    const [isCourseIframeShown,setIsCourseIframeShown] = useState(false)\n    const [selectedCourseArrayIndex,setSelectedCourseArrayIndex] =useState(0)\n\n    const categories = [\n        {\n            category_id: 0 ,\n            category_name : 'All'\n        },\n        {\n            category_id: 1 ,\n            category_name : 'IT'\n        },\n        {\n            category_id: 2 ,\n            category_name : 'Art'\n        },\n        {\n            category_id: 3 ,\n            category_name : 'Music'\n        },\n        {\n            category_id: 4 ,\n            category_name : 'lala'\n        },\n        {\n            category_id: 5 ,\n            category_name : 'lalala'\n        },\n        {\n            category_id: 6 ,\n            category_name : 'management'\n        },\n    ]    \n\n    const Courses = [\n        {\n            title :  '網頁設計',\n            price :  '2000NT',\n            duration : '30小時',\n            brief_intro: '這是關於***的課程，有****和****....',\n            category_id: 1,\n            course_img: 'Courses/1.jpeg',\n            course_intro_video: '',\n            id: 0\n        },\n        {\n            title :  '網頁設計',\n            price :  '2000NT',\n            duration : '30小時',\n            brief_intro: '這是關於***的課程，有****和****....',\n            category_id: 1,\n            course_img: 'Courses/2.jpeg',\n            course_intro_video: '',\n            id: 1\n        },\n        {\n            title :  '網頁設計',\n            price :  '2000NT',\n            duration : '30小時',\n            brief_intro: '這是關於***的課程，有****和****....',\n            category_id: 2,\n            course_img: 'Courses/1.jpg',\n            course_intro_video: '',\n            id: 2\n        },\n        {\n            title :  '網頁設計',\n            price :  '2000NT',\n            duration : '30小時',\n            brief_intro: '這是關於***的課程，有****和****....',\n            category_id: 2,\n            course_img: 'Courses/2.jpg',\n            course_intro_video: '',\n            id: 3\n        },\n        {\n            title :  '網頁設計',\n            price :  '2000NT',\n            duration : '30小時',\n            brief_intro: '這是關於***的課程，有****和****....',\n            category_id: 3,\n            course_img: 'Courses/1.jpeg',\n            course_intro_video: '',\n            id: 4\n        },\n        {\n            title :  '網頁設計',\n            price :  '2000NT',\n            duration : '30小時',\n            brief_intro: '這是關於***的課程，有****和****....',\n            category_id: 4,\n            course_img: 'Courses/1.jpg',\n            course_intro_video: '',\n            id: 5\n        },\n        {\n            title :  '網頁設計',\n            price :  '2000NT',\n            duration : '30小時',\n            brief_intro: '這是關於***的課程，有****和****....',\n            category_id: 5,\n            course_img: 'Courses/2.jpeg',\n            course_intro_video: '',\n            id: 6\n        },\n        {\n            title :  '網頁設計',\n            price :  '2000NT',\n            duration : '30小時',\n            brief_intro: '這是關於***的課程，有****和****....',\n            category_id: 6,\n            course_img: 'Courses/2.jpg',\n            course_intro_video: '',\n            id: 7\n        },\n        {\n            title :  '網頁設計',\n            price :  '2000NT',\n            duration : '30小時',\n            brief_intro: '這是關於***的課程，有****和****....',\n            category_id: 4,\n            course_img: 'Courses/2.jpeg',\n            course_intro_video: '',\n            id: 8\n        },\n        {\n            title :  '網頁設計',\n            price :  '2000NT',\n            duration : '30小時',\n            brief_intro: '這是關於***的課程，有****和****....',\n            category_id: 5,\n            course_img: 'Courses/1.jpeg',\n            course_intro_video: '',\n            id: 9\n        },\n    ]\n\n\n    useEffect(() => {\n        setSelectedCourseArray(Courses)\n        return () => {\n            \n        }\n    }, [])\n\n\n    const handleOnChange = (e) => {\n        e.preventDefault()\n        // const name = e.target.name ;\n        const value = e.target.value ;\n        // setUser( {...User , ...{[name] : value}})\n        setSearchKeyWords(value)\n    }\n\n    const handleOnMouseOver = (e) => {\n        setMouseOvered(true)\n    }\n\n    const handleOnMouseLeave = (e) => {\n        setMouseOvered(false)\n    }\n\n    const handleOnSelection = (id) => {\n\n        setSelectedId(id) ; \n        handleFilterCourseList(categories[id].category_id)  //filter the course by the selected category\n\n        showMenuCallBack();\n    }\n\n    const showMenuCallBack  = () => {\n        if (showMenu == false) {\n            setShowMenu(true)\n        } else {\n            setShowMenu(false)\n        }\n    }\n\n    const handleFilterCourseList = (category_id) => {\n        if (category_id == 0) {\n            setSelectedCourseArray(Courses)\n            return \n        }\n\n        let selectedCourseArray = [];\n        for(let i=0; i<Courses.length; ++i){\n            if (Courses[i].category_id == category_id){\n                selectedCourseArray.push(Courses[i])\n            }\n        }\n        \n        setSelectedCourseArray(selectedCourseArray)\n    }\n\n    const openRecommendedCourseDetailIframeCallBack = (selectedArrayId) => {\n        setSelectedCourseArrayIndex(selectedArrayId)\n        setIsCourseIframeShown(true)\n    }\n\n    const handleOnClickCloseIframe = (e) => {\n        setIsCourseIframeShown(false)\n    } \n\n    let courseIframe = '' ;\n\n    if (isCourseIframeShown === true) {\n        courseIframe = ( <div className='iframeStyle' >\n                                        <div className='transparentBar'>\n\n                                        </div>\n                                        <div className='iframeBody'>\n                                            <CoursePreViewIframe  \n                                                CourseArray={selectedCourseArray} \n                                                selectedCourseArrayIndex={selectedCourseArrayIndex} \n                                                handleOnClickClose = {handleOnClickCloseIframe}\n                                            />\n                                        </div>\n                                </div>)\n    } else {\n        courseIframe = ''\n    }\n\n\n    return (\n        <div className='courseListViewRoot'>\n            <div className='wrapper'>\n                <div className='topBar'>\n                    <div className='search'>\n                        <div className='icon'>\n                            <SearchIcon style={{ color: 'rgb(255,255,255)', fontSize: \"35px\" }} />\n                        </div>\n                        <input \n                            type='text' \n                            value={searchKeyWords}\n                            name='searchKeyWords'\n                            placeholder='Search'\n                            onChange={handleOnChange}\n                        />\n                        {/* <div className='enter' \n                            onMouseOver={handleOnMouseOver} \n                            onMouseLeave={handleOnMouseLeave}\n                        >\n                            <KeyboardReturnIcon \n                                style={{ color: mouseOvered == true ? 'red' : 'rgb(255,255,255)', fontSize: \"40px\" }} \n                            />\n                        </div> */}\n                    </div>\n\n                    <div className='spacer'>\n\n                    </div>\n\n                    <div className='orderby'>\n                        <OrderBy \n                            menuName={categories[selectedId].category_name}  \n                            style={{color:'rgb(200,200,200)'}} \n                            showMenuCallBack = {showMenuCallBack}\n                            showMenu = {showMenu}\n                        >\n                            {categories.map((item,index)=>(\n                                <div \n                                    className='item' \n                                    key= {index} \n                                    onClick = {()=>{handleOnSelection(index)}}\n                                >\n                                    <OrderByDropDownItem \n                                        style={{color:'rgb(200,200,200)'}}  \n                                        itemName={item.category_name}\n                                    />\n                                </div>))\n                            }\n                        </OrderBy>\n                    </div>\n                </div>\n                <div className='contentList'>\n                    <ContentList \n                        Courses={selectedCourseArray}\n                        openRecommendedCourseDetailIframeCallBack={openRecommendedCourseDetailIframeCallBack}\n                    />\n                </div>\n                <div className='pageIndexWrapper'>\n                    <PageIndexing  \n                        TotalPageNum={10}\n                    />\n                </div>\n            </div>\n\n            {courseIframe}\n\n        </div>\n    )\n}\n\nexport default CourseListView\n","import React,{useState,useRef,useEffect} from 'react'\nimport './CoursePlayWindowAndList.css'\nimport VodPlayer from '../../VodPlayer/VodPlayer'\n\n\nfunction CoursePlayWindowAndList(props) {\n\n    const [playerWidth,setPlayerWidth] = useState()\n    const [playerHeight,setPlayerHeight] = useState()\n    const [playVideo,setPlayVideo] = useState(false)\n    const [keyCnt,setKeyCnt] = useState(0)\n\n    const playerWrapperRef = useRef(null)\n    let videoBlogOfTeacher = '' ;\n\n\n    const handleClick2Play = (e) => {\n        window.playerWidth = playerWrapperRef.current.clientWidth ;\n        window.playerHeight = playerWrapperRef.current.clientHeight\n        setPlayVideo(true)\n    }\n\n    if (playVideo === true) {\n\n        console.log(\"re-rendering .... \")\n        console.log(playerHeight,\"  \", window.playerWidth)\n\n        videoBlogOfTeacher = (\n                                <div className='imageWrapper' \n                                    ref={playerWrapperRef}\n                                    key = {keyCnt}\n                                >\n                                    <VodPlayer \n                                        m3u8url = 'http://localhost/hls/360p.m3u8' \n                                        controls= {true}\n                                        autoPlay = {true}\n                                        \n                                    />\n                                </div>\n                            )\n    } else {\n        \n        videoBlogOfTeacher = (\n                                <div className='imageWrapper' ref={playerWrapperRef}>\n                                    <div className='image'>\n                                        <img \n                                            src=\"/meihua.jpg\" \n                                            onClick={handleClick2Play}\n                                        />\n                                    </div>\n                                    <svg width=\"56\" height=\"56\" \n                                        viewBox=\"0 0 56 56\" \n                                        xmlns=\"http://www.w3.org/2000/svg\" \n                                        class=\"playerSymbol\"\n                                        onClick={handleClick2Play}\n                                    >\n                                        <g fill=\"#FFF\" fill-rule=\"evenodd\">\n                                            <path d=\"M28 53c13.807 0 25-11.193 25-25S41.807 3 28 3 3 14.193 3 28s11.193 25 25 25zm0 3C12.536 56 0 43.464 0 28S12.536 0 28 0s28 12.536 28 28-12.536 28-28 28z\"></path>\n                                            <path d=\"M37.232 27.91L22 36.82V19z\"></path>\n                                        </g>\n                                    </svg>\n                                </div>\n                            )\n    }\n\n    return (\n        <div className=\"coursePlayAndWindowRoot\">\n            <div className=\"playerWrapper\">\n                {videoBlogOfTeacher}\n            </div>\n\n        </div>\n    )\n}\n\nexport default CoursePlayWindowAndList\n","import React,{useState, useEffect} from 'react'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport PlayCircleOutlineIcon from '@material-ui/icons/PlayCircleOutline';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport './CourseSection.css'\n\nfunction CourseSection(props) {\n\n\n    const [isExpandSection,setIsExpandSection] = useState(false)\n\n    useEffect(() => {\n        if (props.isExpandAll == true){\n            setIsExpandSection(true)\n        } else {\n            setIsExpandSection(false)\n        }\n        return () => {\n        \n        }\n    }, [props.isExpandAll])\n\n    const expandSection = () => {\n        setIsExpandSection(!isExpandSection)\n    }\n\n    return (\n        <div className=\"courseSectionRoot\">\n            <div className=\"sectionNameAndDuration\">\n                <div className=\"icon\" onClick={expandSection}>\n                    <ExpandMoreIcon style={{ color: 'rgb(100,100,100)', fontSize: \"20px\" }} />\n                </div>\n                <div className=\"sectionName\"> {props.section.sectionName}</div>\n                <div className=\"duration\">{props.section.durationInfo}</div>\n            </div>\n            <div className=\"sectionItems\" style={{display: isExpandSection == true ? 'block':'none'}}>\n                {\n                    props.section.sectionItems.map((item,index)=>(\n                        <div className=\"item\" key={index}>\n                            <div className=\"icon\">\n                                <PlayCircleOutlineIcon style={{ color: 'rgb(150,150,150)', fontSize: \"20px\" }} />\n                            </div>\n                            <div className=\"lessionName\">{item.itemName}</div>\n                            \n                            {\n                                item.preview == true ? <div className=\"preview\" >\n                                                            <LockOpenIcon style={{ color: 'rgb(100,100,100)', fontSize: \"15px\" }} />\n                                                       </div> : \n                                                       <div className=\"preview\" >\n                                                           <LockIcon style={{ color: 'rgb(100,100,100)', fontSize: \"15px\" }} />\n                                                       </div>\n                            }\n                            <div className=\"duration\">{item.itemDuration}</div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default CourseSection\n","import React,{useState} from 'react'\nimport './CourseIntro.css'\n\nimport CheckIcon from '@material-ui/icons/Check';\nimport CourseSection from './CourseSection/CourseSection'\n\nexport default function CourseIntro(props) {\n\n    const courseSectionArray = [\n        {\n            sectionName: \"Course Introduction\",\n            durationInfo : \"6 lectures • total 14min\",\n            sectionItems: [\n                {\n                    itemName : \"Introduction to the course\",\n                    preview  : true,\n                    itemDuration: \"01:02:02\"\n                },\n                {\n                    itemName : \"Remaster in Progress\",\n                    preview  : false,\n                    itemDuration: \"02:04\"\n                },\n                {\n                    itemName : \"Video Quality\",\n                    preview  : false,\n                    itemDuration: \"01:08\"\n                }\n            ]\n        },\n        {\n            sectionName: \"Install and Setup\",\n            durationInfo : \"7 lectures • total 33min\",\n            sectionItems: [\n                {\n                    itemName : \"Python for Windows\",\n                    preview  : false,\n                    itemDuration: \"02:19\"\n                },\n                {\n                    itemName : \"Installing IntelliJ IDEA for Windows\",\n                    preview  : false,\n                    itemDuration: \"06:35\"\n                },\n                {\n                    itemName : \"Python for Linux\",\n                    preview  : false,\n                    itemDuration: \"02:19\"\n                }\n            ]\n        },\n        {\n            sectionName: \"Steping into the World of Python\",\n            durationInfo : \"25 lectures • total 2hr 30min\",\n            sectionItems: [\n                {\n                    itemName : \"introduction\",\n                    preview  : false,\n                    itemDuration: \"02:19\"\n                },\n                {\n                    itemName : \"Our first Python Program\",\n                    preview  : false,\n                    itemDuration: \"06:35\"\n                },\n                {\n                    itemName : \"Printing in Python\",\n                    preview  : false,\n                    itemDuration: \"02:19\"\n                }\n            ]\n        },\n        {\n            sectionName: \"Lists and Tupples\",\n            durationInfo : \"54 lectures • total 4hr 45min\",\n            sectionItems: [\n                {\n                    itemName : \"introduction to Sequene Types\",\n                    preview  : false,\n                    itemDuration: \"02:19\"\n                },\n                {\n                    itemName : \"Lists\",\n                    preview  : false,\n                    itemDuration: \"06:35\"\n                },\n                {\n                    itemName : \"Immutable Objects\",\n                    preview  : false,\n                    itemDuration: \"02:19\"\n                },\n                {\n                    itemName : \"Mutable Objects\",\n                    preview  : false,\n                    itemDuration: \"02:19\"\n                }\n            ]\n        }\n    ]\n\n    const CollapseAllSections = \"Collapse all setions\"\n    const ExpandAllSections = \"Expand all setions\"\n    const [isExpandAll, setIsExpandAll] = useState(false)\n\n    const CollapseOrExapndAllSection = () => {\n        setIsExpandAll(!isExpandAll)\n    }\n\n    return (\n        <div className=\"courseIntroRoot\">\n            <div className=\"innerWrapper\">\n                <div className=\"goal\">\n                    <p className=\"whatyoulllearn\">What you'll learn</p>\n                    <div className=\"goalItem\">\n                        <div className=\"icon\">\n                            <CheckIcon style={{ color: 'rgb(150,150,150)', fontSize: \"20px\" }} />\n                        </div>\n                        <p className=\"textContent\"> Have a fundamental understanding of the Python programming language </p>\n                    </div>\n                    <div className=\"goalItem\">\n                        <div className=\"icon\">\n                            <CheckIcon style={{ color: 'rgb(150,150,150)', fontSize: \"20px\" }} />\n                        </div>\n                        <p className=\"textContent\"> Acquire the pre-requisite Python skills to move into specific branches - Machine Learning, Data Science, etc.. </p>\n                    </div>\n                    <div className=\"goalItem\">\n                        <div className=\"icon\">\n                            <CheckIcon style={{ color: 'rgb(150,150,150)', fontSize: \"20px\" }} />\n                        </div>\n                        <p className=\"textContent\"> Understand how to create your own Python programs. </p>\n                    </div>\n                    <div className=\"goalItem\">\n                        <div className=\"icon\">\n                            <CheckIcon style={{ color: 'rgb(150,150,150)', fontSize: \"20px\" }} />\n                        </div>\n                        <p className=\"textContent\"> Understand both Python 2 and Python 3. </p>\n                    </div>\n                </div>\n                <div className=\"content\">\n                    <p className=\"courseContent\">Course content</p>\n                    <div className=\"courseBriefLen\">\n                        <p className=\"courseDuration\">22 sections • 435 lectures • 61h 9m total length </p>\n                        <div className=\"collapseAll\" onClick={CollapseOrExapndAllSection}>\n                            {isExpandAll==true? CollapseAllSections:ExpandAllSections}\n                        </div>\n                    </div>\n\n                    {courseSectionArray.map((item,index)=>(\n                        <div className=\"section\" key={index}>\n                            <CourseSection \n                                section={item}\n                                isExpandAll = {isExpandAll}\n                            />\n                        </div>\n                    ))}\n\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\n\n","import React from 'react'\n\nfunction Discussion(props) {\n    return (\n        <div>\n            hello discussion\n        </div>\n    )\n}\n\nexport default Discussion\n\n\n","import React from 'react'\n\nfunction Assessment(props) {\n    return (\n        <div>\n            homework\n        </div>\n    )\n}\n\nexport default Assessment\n","import React from 'react'\n\nfunction CourseEvaluation(props) {\n    return (\n        <div>\n            what students has said about this course\n        </div>\n    )\n}\n\nexport default CourseEvaluation\n","import React,{useState} from 'react'\nimport './CourseDetailView.css'\nimport CoursePlayWindowAndList from './CoursePlayWindowAndList/CoursePlayWindowAndList'\nimport CourseIntro from './CourseIntro/CourseIntro'\nimport Discussion from './Discussion/Discussion'\nimport Assessment from './Assessment/Assessment'\nimport CourseEvaluation from './CourseEvaluation/CourseEvaluation'\n\n\nfunction CourseDetailView(props) {\n\n    const [showIntroPage,setShowIntroPage] = useState(true)\n    const [showDiscussionPage,setShowDiscussionPage] = useState(false)\n    const [showEvaluationPage,setShowEvaluationPage] = useState(false)\n    const [showAssessmentPage,setShowAssessmentPage] = useState(false)\n\n\n    const onClickSelectIntro = () => {\n        setShowIntroPage(true)\n        setShowDiscussionPage(false)\n        setShowEvaluationPage(false)\n        setShowAssessmentPage(false)\n    }\n\n    const onClickSelectDiscussion = () => {\n        setShowIntroPage(false)\n        setShowDiscussionPage(true)\n        setShowEvaluationPage(false)\n        setShowAssessmentPage(false)\n    }\n\n    const onClickSelectEvaluation = () => {\n        setShowIntroPage(false)\n        setShowDiscussionPage(false)\n        setShowEvaluationPage(true)\n        setShowAssessmentPage(false)\n    }\n\n    const onClickSelectAssessment = () => {\n        setShowIntroPage(false)\n        setShowDiscussionPage(false)\n        setShowEvaluationPage(false)\n        setShowAssessmentPage(true)\n    }\n\n    let selectedPage = '' ;\n\n    if (showIntroPage == true) {\n        selectedPage = <CourseIntro />\n    } else if (showDiscussionPage == true) {\n        selectedPage = <Discussion />\n    } else if (showEvaluationPage == true) {\n        selectedPage = <CourseEvaluation />\n    } else if (showAssessmentPage == true) {\n        selectedPage = <Assessment />\n    }\n\n    return (\n        <div className=\"courseDetailViewRoot\">\n            <div className=\"coursePlayWindowAndList\">\n                <CoursePlayWindowAndList />\n            </div>\n\n            <div className=\"buyCourse\">\n                <div className=\"itemAndPrice\">\n                    <div className=\"otherItems\">\n\n                    </div>\n                    <div className=\"price\">\n                        <p className=\"priceName\" >price</p>\n                        <p className=\"priceValue\"> NT$2000 </p>\n                    </div>\n                </div>\n                <div className=\"buyWrapper\">\n                    <div className=\"buttonAndItems\">\n                        <div className=\"rate\"></div>\n                        <div className='order'>\n                            <p className='orderName'> order </p>\n                        </div>\n                    </div>\n                    <div className=\"reserved\">\n\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"ResourseOrAccessment\">\n                <div className=\"selectionBarWrapper\">\n                    <div className=\"selectionBar\">\n                        <div className=\"item\" onClick={onClickSelectIntro} >\n                            <div className=\"itemNameWrapper\">\n                                <p className=\"itemName\">Intro</p>\n                            </div>\n                            <div className=\"underline\" style={{backgroundColor: showIntroPage? 'red':'rgb(211, 211, 211)'}}></div>\n                        </div>\n                        <div className=\"item\" onClick={onClickSelectDiscussion} >\n                            <div className=\"itemNameWrapper\">\n                                <p className=\"itemName\">discussion</p>\n                            </div>\n                            <div className=\"underline\" style={{backgroundColor: showDiscussionPage? 'red':'rgb(211, 211, 211)'}} ></div>\n                        </div>\n                        <div className=\"item\" onClick={onClickSelectEvaluation} >\n                            <div className=\"itemNameWrapper\">\n                                <p className=\"itemName\">feedback</p>\n                            </div>\n                            <div className=\"underline\" style={{backgroundColor: showEvaluationPage? 'red':'rgb(211, 211, 211)'}} ></div>\n                        </div>\n                        <div className=\"item\" onClick={onClickSelectAssessment} >\n                            <div className=\"itemNameWrapper\">\n                                <p className=\"itemName\">assessment</p>\n                            </div>\n                            <div className=\"underline\" style={{backgroundColor: showAssessmentPage? 'red':'rgb(211, 211, 211)'}} ></div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"selectedPage\">\n                    {selectedPage}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default CourseDetailView\n\n\n\n","import React, {useState,useEffect,useRef} from 'react'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport {Link} from 'react-router-dom'\nimport './Gallery.css'\n\nfunction Gallery(props) {\n\n    const albumRef = useRef(null)\n\n    let state = {\n        scrollBarPosition : 0 ,\n        reachRightEnd : 0 ,\n        previousValuesForScrollLeft0 : null,\n        previousValuesForScrollLeft1 : null,\n        previousValuesForScrollLeft2 : null,\n    }\n\n    const ImageList = {\n        Travel : {\n            taiwan : [                                         \n                '/Gallery/Travel/taiwan/0.jpg   ',         \n                '/Gallery/Travel/taiwan/1.1.jpg ',   \n                '/Gallery/Travel/taiwan/1.jpg   ',      \n                '/Gallery/Travel/taiwan/2.0.jpg ', \n                '/Gallery/Travel/taiwan/2.jpeg  ',  \n                '/Gallery/Travel/taiwan/2.1.jpg ',   \n                '/Gallery/Travel/taiwan/2.2.jpg ', \n                '/Gallery/Travel/taiwan/3.jpg   ', \n                '/Gallery/Travel/taiwan/4.jpg   ',  \n                '/Gallery/Travel/taiwan/5.jpg   ',      \n                '/Gallery/Travel/taiwan/6.jpeg  ',      \n                '/Gallery/Travel/taiwan/7.png   ',      \n                '/Gallery/Travel/taiwan/8.jpg   ',      \n                '/Gallery/Travel/taiwan/9.jpg   ',   \n                '/Gallery/Travel/taiwan/10.jpg  ',     \n                '/Gallery/Travel/taiwan/11.jpg  ',      \n                '/Gallery/Travel/taiwan/12.jpg  ',      \n                '/Gallery/Travel/taiwan/13.jpg  ',      \n                '/Gallery/Travel/taiwan/14.jpg  ',      \n                '/Gallery/Travel/taiwan/15.jpg  ',      \n                '/Gallery/Travel/taiwan/16.jpg  ',      \n                '/Gallery/Travel/taiwan/17.jpg  ',      \n                '/Gallery/Travel/taiwan/18.jpg  ',      \n                '/Gallery/Travel/taiwan/19.jpg  ',           \n                '/Gallery/Travel/taiwan/20.jpg  ',         \n                '/Gallery/Travel/taiwan/21.jpg  ',      \n                '/Gallery/Travel/taiwan/22.jpeg ',           \n                '/Gallery/Travel/taiwan/23.jpg  ',      \n                '/Gallery/Travel/taiwan/24.jpg  ',      \n                '/Gallery/Travel/taiwan/25.jpeg ',      \n                '/Gallery/Travel/taiwan/26.jpg  ',      \n                '/Gallery/Travel/taiwan/27.jpg  ',      \n                '/Gallery/Travel/taiwan/28.jpeg ',      \n                '/Gallery/Travel/taiwan/29.jpg  ',          \n                '/Gallery/Travel/taiwan/30.png  ',      \n                '/Gallery/Travel/taiwan/31.jpg  ',      \n                '/Gallery/Travel/taiwan/32.jpg  ',      \n                '/Gallery/Travel/taiwan/33.jpg  ',      \n                '/Gallery/Travel/taiwan/34.jpg  ',      \n                '/Gallery/Travel/taiwan/35.jpg  ',      \n                '/Gallery/Travel/taiwan/36.jpg  ',      \n                '/Gallery/Travel/taiwan/37.jpeg ',      \n                '/Gallery/Travel/taiwan/38.jpg  ',      \n                '/Gallery/Travel/taiwan/39.jpg  ',           \n                '/Gallery/Travel/taiwan/40.jpg  ',      \n                '/Gallery/Travel/taiwan/41.jpg  ',      \n                '/Gallery/Travel/taiwan/42.jpg  ',      \n                '/Gallery/Travel/taiwan/43.jpg  ',      \n                '/Gallery/Travel/taiwan/44.jpg  ',      \n                '/Gallery/Travel/taiwan/45.jpg  ',      \n                '/Gallery/Travel/taiwan/46.jpg  ',      \n                '/Gallery/Travel/taiwan/47.jpg  ',      \n                '/Gallery/Travel/taiwan/48.jpg  ',      \n                '/Gallery/Travel/taiwan/49.jpg  ',      \n                '/Gallery/Travel/taiwan/50.jpg  ',      \n                '/Gallery/Travel/taiwan/51.jpg  ',      \n                '/Gallery/Travel/taiwan/52.jpg  ',          \n            ] ,\n            \n            singapore : [\n                        '/Gallery/Travel/singapore/0.jpg  ' ,\n                        '/Gallery/Travel/singapore/1.jpg  ' , \n                        '/Gallery/Travel/singapore/2.jpg  ' , \n                        '/Gallery/Travel/singapore/3.jpg ' , \n                        '/Gallery/Travel/singapore/4.jpg ' , \n                        '/Gallery/Travel/singapore/5.jpg  ' , \n                        '/Gallery/Travel/singapore/6.jpg  ' , \n                        '/Gallery/Travel/singapore/7.jpg  ' , \n                        '/Gallery/Travel/singapore/8.jpg  ' , \n                        '/Gallery/Travel/singapore/9.jpg  ' , \n                        '/Gallery/Travel/singapore/10.jpg ' , \n                        '/Gallery/Travel/singapore/11.jpeg ' , \n                        '/Gallery/Travel/singapore/12.jpeg ' , \n                        '/Gallery/Travel/singapore/13.jpg ' , \n                        '/Gallery/Travel/singapore/14.jpg ' , \n                        '/Gallery/Travel/singapore/15.jpg ' , \n                        '/Gallery/Travel/singapore/16.jpeg ' , \n            ] ,\n            jeju : [\n                    '/Gallery/Travel/jeju/0.jpg  ' , \n                    '/Gallery/Travel/jeju/1.jpg  ' , \n                    '/Gallery/Travel/jeju/2.jpg  ' , \n                    '/Gallery/Travel/jeju/3.jpeg ' , \n                    '/Gallery/Travel/jeju/4.jpeg ' , \n                    '/Gallery/Travel/jeju/5.jpg  ' , \n                    '/Gallery/Travel/jeju/6.jpg  ' , \n                    '/Gallery/Travel/jeju/7.jpg  ' , \n                    '/Gallery/Travel/jeju/8.jpg  ' , \n                    '/Gallery/Travel/jeju/9.jpg  ' , \n                    '/Gallery/Travel/jeju/10.jpg ' , \n                    '/Gallery/Travel/jeju/11.jpg ' , \n                    '/Gallery/Travel/jeju/12.jpg ' , \n                    '/Gallery/Travel/jeju/13.jpg ' , \n                                         \n            ] ,                                      \n\n            india : [] ,\n            malaysia : [],\n            \n        }\n    }\n\n\n    const AnimalsArray = [\n        {\n            id :  0 ,\n            PlaceName : 'no1',\n            CoverImage: '/Gallery/Animals/animals.jpg',\n            Link : '/gallery/animals/no1'\n        }\n    ]\n\n    const PlacesArray =  [\n            {\n                id :  0 ,\n                PlaceName : 'taiwan',\n                CoverImage: '/Gallery/Travel/cover_taiwan.jpg',\n                Link : {\n                                                                     \n                            pathname : '/gallery/travel/taiwan',\n                            myparams: {id : 1 , \n                                AlbumName: 'taiwan',\n                                ImageArray : ImageList.Travel.taiwan ,\n                            }\n                        },\n            },\n            \n            {\n                id :  1 ,\n                PlaceName : 'singapore',\n                CoverImage: '/Gallery/Travel/cover_sg.jpg',\n                Link : {\n                                                                     \n                    pathname : '/gallery/travel/singapore',\n                    myparams: {id : 1 , \n                        AlbumName: 'singapore',\n                        ImageArray : ImageList.Travel.singapore ,\n                    }\n                },\n            },\n            {\n                id :  2 ,\n                PlaceName : 'jeju sk',\n                CoverImage: '/Gallery/Travel/cover_jeju.jpeg',\n                Link : {\n                                                                     \n                    pathname : '/gallery/travel/jeju',\n                    myparams: {id : 1 , \n                        AlbumName: 'jeju',\n                        ImageArray : ImageList.Travel.jeju ,\n                    }\n                },\n            },\n            {\n                id :  3 ,\n                PlaceName : 'Dharamshala India',\n                CoverImage: '/Gallery/Travel/india.jpg',\n                Link : {\n                                                                     \n                    pathname : '/gallery/travel/india',\n                    myparams: {id : 1 , \n                        AlbumName: 'india',\n                        ImageArray : ImageList.Travel.india ,\n                    }\n                },\n            },\n            {\n                id :  4 ,\n                PlaceName : 'Malaysia',\n                CoverImage: '/Gallery/Travel/KualaLumpur.jpg',\n                Link : {\n                                                                     \n                    pathname : '/gallery/travel/malaysia',\n                    myparams: {id : 1 , \n                        AlbumName: 'malaysia',\n                        ImageArray : ImageList.Travel.malaysia ,\n                    }\n                },\n            },\n        ]\n    \n\n    const [AlbumList, setAlbumList] = useState(\n                                                [\n                                                    {\n                                                        id        : 0,\n                                                        AlbumName : \"Travel\",\n                                                        CoverImage: \"Gallery/Travel/ROCFlag.jpg\",\n                                                        Link      : {\n                                                                     \n                                                                    pathname : '/gallery/travel',\n                                                                    myparams: {id : 1 , \n                                                                            AlbumName: 'Travel',\n                                                                            DataArray : PlacesArray ,\n                                                                            ImageList : ImageList ,\n                                                                        }\n                                                                    \n                                                                    },\n                                                    },\n                                                    {\n                                                        id        : 1,\n                                                        AlbumName : \"Animals\",\n                                                        CoverImage: \"Gallery/Animals/Animals.jpg\",\n                                                        Link      : {\n                                                                     \n                                                            pathname : '/gallery/animals',\n                                                            myparams: {id : 2 , \n                                                                    AlbumName: 'Animals',\n                                                                    DataArray: AnimalsArray ,\n                                                                }\n                                                            \n                                                            }\n                                                    },\n                                                    {\n                                                        id        : 2,\n                                                        AlbumName : \"Nature\",\n                                                        CoverImage: \"Gallery/Nature/Nature.jpg\",\n                                                        Link      : {\n                                                                     \n                                                            pathname : '/gallery/nature',\n                                                            myparams: {id : 3 , \n                                                                    AlbumName: 'Travel'\n                                                                }\n                                                            \n                                                            }\n                                                    },\n                                                    {\n                                                        id        : 3,\n                                                        AlbumName : \"People\",\n                                                        CoverImage: \"Gallery/People/People.jpg\",\n                                                        Link      : {\n                                                                     \n                                                            pathname : '/gallery/people',\n                                                            myparams: {id : 4 , \n                                                                    AlbumName: 'People'\n                                                                }\n                                                            \n                                                            }\n                                                    },\n                                                    {\n                                                        id        : 4,\n                                                        AlbumName : \"Sports\",\n                                                        CoverImage: \"Gallery/Sports/Sports.jpg\",\n                                                        Link      : {\n                                                                     \n                                                            pathname : '/gallery/sports',\n                                                            myparams: {id :  5, \n                                                                    AlbumName: 'Sports'\n                                                                }\n                                                            \n                                                            }\n\n                                                    },\n                                                    {\n                                                        id        : 5,\n                                                        AlbumName : \"Portrait\",\n                                                        CoverImage: \"Gallery/Portrait/Portrait.jpg\",\n                                                        Link      : {\n                                                                     \n                                                            pathname : '/gallery/portrait',\n                                                            myparams: {id : 6 , \n                                                                    AlbumName: 'Portrait'\n                                                                }\n                                                            \n                                                            }\n                                                    },\n                                                    {\n                                                        id        : 6,\n                                                        AlbumName : \"Architecture\",\n                                                        CoverImage: \"Gallery/Architecture/Architecture.jpg\",\n                                                        Link      : {\n                                                                     \n                                                            pathname : '/gallery/architecture',\n                                                            myparams: {id : 7 , \n                                                                    AlbumName: 'Architecture'\n                                                                }\n                                                            \n                                                            }\n                                                    },\n                                                ]\n                                            )\n     \n    \n    const handleOnClickForward = (e) => {\n\n        const total_width = albumRef.current.scrollWidth ;\n        // const windowWidth = window.innerWidth\n        const imageWidth = total_width / AlbumList.length;\n        // if (windowWidth <= 800) {\n            // small device, one image per row\n            albumRef.current.scrollLeft += imageWidth;\n            if (albumRef.current.scrollLeft % imageWidth != 0){\n                albumRef.current.scrollLeft = Math.ceil((albumRef.current.scrollLeft / imageWidth)) * imageWidth\n            }\n        // }\n\n        console.log(imageWidth, albumRef.current.scrollLeft, total_width)\n    }\n\n    const handleOnClickBack = (e) => {\n        \n        const total_width = albumRef.current.scrollWidth ;\n        const windowWidth = window.innerWidth\n        const imageWidth = total_width / AlbumList.length;\n        // if (windowWidth <= 800) {\n            // small device, one image per row\n            albumRef.current.scrollLeft -= imageWidth;\n            if (albumRef.current.scrollLeft % imageWidth != 0){\n                albumRef.current.scrollLeft = Math.ceil((albumRef.current.scrollLeft / imageWidth)) * imageWidth\n            }\n        // }\n\n        // console.log(imageWidth , albumRef.current.scrollLeft, total_width)\n    }\n\n\n    function handleOnWheel(e){\n\n        // console.log(state.reachRightEnd, state.previousValuesForScrollLeft0,\n        //     state.previousValuesForScrollLeft1,state.previousValuesForScrollLeft2)\n\n        if (e.deltaY < 0) {\n            // scroll up \n            if(window.scrollY == 0) {\n                e.preventDefault(); // disable parent scroll \n                \n                albumRef.current.scrollLeft -= albumRef.current.scrollWidth * 0.02 ;\n                // if (albumRef.current.scrollLeft <=0) {\n                //     albumRef.current.scrollLeft = 0 ;\n                // }\n                // reset if scroll left \n                state.reachRightEnd = 0 ;\n                state.previousValuesForScrollLeft0 = 0 ;\n                state.previousValuesForScrollLeft1 = 0 ;\n                state.previousValuesForScrollLeft2 = 0 ;\n\n            }\n            //if parent scrolly != equal to 0 , scroll parent first\n        } else {\n            //scroll down , scroll child first , then propagate to parent scroll\n            if (state.reachRightEnd == 0 ){ // scroll right , never can reach maximum\n                // find a signal indicating reaching the right edge.\n                e.preventDefault(); // disable parent scroll \n                albumRef.current.scrollLeft += albumRef.current.scrollWidth * 0.02;\n                \n                state.previousValuesForScrollLeft2 = state.previousValuesForScrollLeft1;\n                state.previousValuesForScrollLeft1 = state.previousValuesForScrollLeft0;\n                state.previousValuesForScrollLeft0 = albumRef.current.scrollLeft ;\n                if (state.previousValuesForScrollLeft0 == state.previousValuesForScrollLeft1 &&\n                    state.previousValuesForScrollLeft1 == state.previousValuesForScrollLeft2 && \n                    state.previousValuesForScrollLeft1 >  10\n                    ){\n                        state.reachRightEnd = 1 ;\n                    }\n            }\n        }\n\n        // console.log(albumRef.current.scrollLeft, albumRef.current.scrollWidth)\n        \n\n    }\n\n    const addEventListener2Component = (e) => {\n        albumRef.current.addEventListener('wheel', handleOnWheel)\n    }\n    \n    const removeEventListenerFromComponent = () => {\n        if (albumRef.current) {\n            albumRef.current.removeEventListener('wheel',handleOnWheel)\n        }\n    }\n\n    useEffect(\n        () => {\n            // on component mount \n            addEventListener2Component();\n\n            // document.getElementById('galleryRoot').addEventListener('wheel',handleOnWheel)\n\n            return () => {\n                // component unmount \n                removeEventListenerFromComponent();\n                // if(document.getElementById('galleryRoot')){\n                //     document.getElementById('galleryRoot').removeEventListener('wheel', handleOnWheel)\n                // }\n            }\n        },\n\n        [])\n\n\n    return (\n        <div className='galleryRoot' \n            ref={albumRef}\n        >\n            {AlbumList.map(Album => (\n                <div className='album' \n                    key={Album.id}\n                >\n                    <div className='imageWrapper'>\n                        <img src={Album.CoverImage} />\n                    </div>\n                    <div className='albumNameWrapper'>\n                        <p className='albumName'> {Album.AlbumName}</p>\n                    </div>\n                    <div className='clickForMoreWrapper'>\n                        <Link className='clickForMore' to={Album.Link}> MORE PHOTOS </Link>\n                    </div>\n                 </div>   \n            ))}\n\n            <div className='arrowForwardIconWrapper' onClick={handleOnClickForward}> \n                <ArrowForwardIcon style={{ color: 'rgb(255,255,255)', fontSize: \"20px\" }} />\n            </div>\n            <div className='arrowBackIconWrapper' onClick={handleOnClickBack} > \n                <ArrowBackIcon style={{ color: 'rgb(255,255,255)', fontSize: \"20px\" }}  />\n            </div>\n        </div>\n    )\n}\n\nexport default Gallery\n","import React,{useState,useEffect} from 'react'\nimport axios from \"axios\";\nimport {blogEndPoint} from '../../../ipconfig'\n\nimport './Blog.css'\nimport handleError from '../../../utility/handleError.js'\n\n\nconst fileName =  \"Blog.js\"\n\nfunction Blog(props) {\n\n\n    const [blogList,setBlogList] = useState([])\n\n    useEffect(() => {\n\n        const functionName =  \"useEffect\"\n\n        // get<T = any, R = AxiosResponse<T>>(url: string, config?: AxiosRequestConfig): Promise<R>;\n        const config = {\n            params: {\n                action : \"getList\"\n            },\n            headers : {\n                'Content-Type': 'application/json', \n            }\n        }\n\n        \n        // get blog list from server, \n        axios \n            .get(blogEndPoint,\n                config\n            )\n            .then(res => {\n                if (res.data.isSuccess === true) {\n                    console.log(res.data)\n                    setBlogList(res.data.querySet)\n                }\n            })\n            .catch (error => {\n                handleError(error,fileName,functionName)\n            })\n            \n\n        return () => {\n            \n        }\n    }, [])\n    \n\n    useEffect(() => {\n        \n        for (let i=0; i<blogList.length; ++i){\n            let blogWrapperDiv = document.createElement('div')\n            blogWrapperDiv.className = 'blogWrapper'\n            let timeAndTitleDiv = document.createElement('div')\n            timeAndTitleDiv.className = 'timeAndTitle'\n            let dateP = document.createElement('p')\n            dateP.className = 'date'\n\n            let dateSpan = document.createElement('span')\n            const datetime = new Date(blogList[i].createdAt)\n            dateSpan.innerHTML = `${datetime.getFullYear()}-${datetime.getMonth()}-${datetime.getDate()}  \\\n                                  ${datetime.getHours()}:${datetime.getMinutes()}:${datetime.getSeconds()}`\n            dateP.appendChild(dateSpan)\n            timeAndTitleDiv.appendChild(dateP)\n\n            let titleP = document.createElement('p')\n            titleP.className = 'title'\n            titleP.innerHTML= blogList[i].title \n            timeAndTitleDiv.appendChild(titleP)\n\n            let contentDiv = document.createElement('div')\n            contentDiv.className = 'content'\n            contentDiv.innerHTML = blogList[i].content ;\n\n\n            blogWrapperDiv.appendChild(timeAndTitleDiv)\n            blogWrapperDiv.appendChild(contentDiv)\n            document.getElementsByClassName(\"blogRoot\")[0].appendChild(blogWrapperDiv)\n\n            console.log(blogList[i].createdAt)\n        }\n\n    }, [blogList])\n\n\n    return (\n\n        <div className='blogRoot'>\n\n        </div>\n    )\n}\n\nexport default Blog\n","import WangEditor from 'wangeditor'\nimport createKityformula from './kityformula'\n\n\nexport default class KityformulaMenu extends WangEditor.PanelMenu {\n\n\n    // 公式输入插件\n    constructor (editors) {\n      const $elem = WangEditor.$(\n        `<div class=\"w-e-menu\">\n            <style>\n              .w-e-menu .mathsvgIcon {\n                  width: 30px;\n                  height: 30px;\n                  filter: invert(61%) sepia(12%) saturate(12%) hue-rotate(346deg) brightness(92%) contrast(89%);\n              }\n\n              .mathsvgIcon:hover {\n                  filter: invert(34%) sepia(77%) saturate(347%) hue-rotate(71deg) brightness(91%) contrast(92%);\n              }\n            </style>\n            <img src=\"/kityformula/assets/images/ftfunct.svg\" class=\"mathsvgIcon iconfont\"/>\n        </div>\n\n        `\n      )\n      super($elem, editors)\n    }\n\n    // 菜单点击事件\n    clickHandler () {\n      // 做任何你想做的事情\n      // 可参考【常用 API】文档，来操作编辑器\n      const conf = createKityformula(window.editor)\n      const panel = new WangEditor.Panel(this, conf)\n      panel.create()\n    }\n\n    tryChangeActive () {}\n  }\n\n\n\n\n","export default function(editor) {\n  // panel 中需要用到的id\n  const inputIFrameId = 'kityformula_' + Math.ceil(Math.random() * 10)\n  const btnOkId = 'kityformula-btn' + Math.ceil(Math.random() * 10)\n\n  const conf = {\n    width: 900,\n    height: 560,\n\n    // panel 中可包含多个 tab\n    tabs: [\n      {\n        // tab 的标题\n        title: editor.i18next.t('menus.panelMenus.formula.插入公式'),\n        // 模板\n        tpl: `<div>\n                  <iframe id=\"${inputIFrameId}\" class=\"iframe\" height=\"500px\" width=\"100%\" frameborder=\"0\" scrolling=\"no\" src=\"/kityformula/index.html\"></iframe>\n                  <div class=\"w-e-button-container\">\n                      <button id=\"${btnOkId}\" class=\"right\">\n                          ${editor.i18next.t('确认插入')}\n                      </button>\n                  </div>\n              </div>`,\n        // 事件绑定\n        events: [\n          {\n            selector: '#' + btnOkId,\n            type: 'click',\n            fn: () => {\n              // 执行插入公式\n              const node = document.getElementById(inputIFrameId)\n              const kfe = node.contentWindow.kfe\n\n              let latex = kfe.execCommand('get.source')\n              latex = latex.replace(/\\s/g, '') // 去掉空格\n\n              // 使用 editor.cmd.do  无法关闭弹窗\n              // editor.cmd.do(\n              //   \"insertHTML\",\n              //   '<img class=\"formula\" src=\"https://latex.codecogs.com/gif.latex?' +\n              //     latex +\n              //     '\" data-latex=\"' +\n              //     latex +\n              //     '\" />'\n              // );\n\n              editor.txt.append(\n                '<img class=\"formula\" src=\"https://latex.codecogs.com/gif.latex?' +\n                  latex +\n                  '\" data-latex=\"' +\n                  latex +\n                  '\" />'\n              )\n\n              // 返回 true，表示该事件执行完之后，panel 要关闭。否则 panel 不会关闭\n              return true\n            }\n          }\n        ]\n      } // tab end\n    ] // tabs end\n  }\n\n  return conf\n}\n","import React, {useState, useEffect} from 'react'\nimport { connect } from 'react-redux';\nimport axios from 'axios'\n\nimport WangEditor from 'wangeditor'\nimport KityformulaMenu from './component/kityformulaMenu'\nimport './NewBlog.css'\nimport handleError from '../../../utility/handleError.js'\n\n\nimport { blog_newBlog_url } from '../../../ipconfig';\n\n\nconst fileName = \"NewBlog.js\"\n\nfunction NewBlog(props) {\n    \n    const [title,setTitle] = useState('')\n    const [editor,setEditor] = useState([])\n    const [editorData, setEditorData] = useState([])\n\n    useEffect(() => {\n\n        window.editor = new WangEditor('#editorContent')\n        // 获取必要的变量，这些在下文中都会用到\n\n         // 注册菜单\n        const kityformulaKey = 'kityformulaKey' // 菜单 key ，各个菜单不能重复\n        window.editor.menus.extend('kityformulaKey', KityformulaMenu)\n\n        // 将菜单加入到 editor.config.menus 中\n        // 也可以通过配置 menus 调整菜单的顺序，参考【配置菜单】部分的文档\n        window.editor.config.menus = window.editor.config.menus.concat(kityformulaKey)\n\n        window.editor.config.uploadImgShowBase64 = true\n        window.editor.config.uploadImgMaxLength = 5 // 一次最多上传 5 个图片\n        window.editor.config.zIndex = 100\n        window.editor.config.height = 500\n\n        // 配置 onchange 回调函数，将数据同步到 vue 中\n        window.editor.config.onchange = newHtml => {\n            setEditorData(newHtml)\n        }\n\n        // 创建编辑器\n        window.editor.create() \n\n        setEditor(window.editor)\n\n        return () => {\n            \n                // editor.destroy()\n                setEditor([])\n        }\n\n    }, [])\n\n    const handleTitleOnChange = (e) => {\n        e.preventDefault()\n        const value = e.target.value ;\n        setTitle(value)\n    }\n\n    const handleOnSubmit = (e) => {\n\n        const functionName = \"handleOnSubmit\"\n\n        e.preventDefault();\n        \n        const token = localStorage.getItem('token');\n\n        if (!token){\n            alert(\"please log in to post\")\n            return \n        }\n\n        const formDataObj = {\n            title: title,\n            content: editorData ,\n        }\n\n        // post<T = any, R = AxiosResponse<T>>(url: string, data?: any, config?: AxiosRequestConfig): Promise<R>;\n        const config = {\n            params: {\n                token : token,\n            },\n            headers : {\n                'Content-Type': 'application/json', \n            }\n        }\n\n        axios\n            .post(blog_newBlog_url,\n                        JSON.stringify(formDataObj),\n                        config  \n                        )\n            .then( res => {\n                if (res.data.isSuccess === true){\n                    props.history.push(\"/blog\")\n                }\n            })\n            .catch (error => {\n                handleError(error,fileName,functionName)\n            })\n\n    }\n\n    return (\n        <form className='newBlogRoot' onSubmit={handleOnSubmit}>\n            <div className='titleWrapper'>\n                <input className='title' \n                    type='text' \n                    name='title' \n                    value={title} \n                    onChange={handleTitleOnChange} \n                    placeholder=\"input title here\"\n                />\n                <input className='submit' type='submit' value='submit' />\n            </div>\n            <div id='editorContent'>\n\n            </div>\n        </form>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        // loading: state.auth.loading,\n        // error: state.auth.error,\n        // data: state.auth.data,\n        // token: state.auth.token,\n        // isTokenValid: state.auth.isTokenValid\n    };\n  };\n  \n  const mapDispatchToProps = dispatch => {\n    return {\n        // createEditor: () => dispatch(eidtorCreateAction())\n    };\n  };\n\n//   const mapDispatchToProps = dispatch => {\n//     return {\n//         login: (username,password) => dispatch(authLoginAction(username,password)),\n//         loginFailed: () => dispatch(authLoginFailedAction()),\n//         clearStates: () => dispatch(authResetStateAction()),\n//         authCheckTokenVaidAction: (token) => dispatch(authCheckTokenVaidAction(token)),\n//     };\n//   };\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n) (NewBlog)\n\n","import React , {useEffect, useState, useRef} from 'react'\nimport {Link} from 'react-router-dom'\nimport './SubCategory.css'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\n\nfunction SubCategory(props) {\n\n    function getSafe(fn, defaultVal) {\n        try {\n            return fn();\n        } catch (e) {\n            return defaultVal;\n        }\n    }\n\n    const [ItemArray, setItemArray] = useState([])\n    const [CategoryName, setCategoryName] = useState()\n    const [ImageList,setImageList] = useState({}) \n\n    const categoryItemsRef = useRef(null)\n\n    let state = {\n        scrollBarPosition : 0 ,\n        rootRef : null,\n        reachRightEnd : 0 ,\n        previousValuesForScrollLeft0 : null,\n        previousValuesForScrollLeft1 : null,\n        previousValuesForScrollLeft2 : null,\n    }\n\n    useEffect(\n        () => {\n            // on component mount \n            if (props.location.myparams) {\n\n                const DataArray = getSafe(()=>props.location.myparams.DataArray, 'undefined')\n                if (DataArray  !== 'undefined') {\n                    setItemArray(DataArray)\n                }\n\n                const ImageList = getSafe(()=>props.location.myparams.ImageList, 'undefined')\n                if (ImageList !== 'undefined') {\n                    setImageList(ImageList)\n                }\n                \n            }\n\n            setCategoryName(props.match.params.category)\n            \n\n            return () => {\n                // component unmount \n\n            }\n        },\n\n        [])\n\n\n    useEffect(\n        () => {\n            console.log(\"hello data received\", ImageList)\n        },\n\n    [ImageList])\n\n    const handleOnClickForward = (e) => {\n\n        const total_width = categoryItemsRef.current.scrollWidth ;\n        // const windowWidth = window.innerWidth\n        const imageWidth = total_width / ItemArray.length;\n        // if (windowWidth <= 800) {\n            // small device, one image per row\n            categoryItemsRef.current.scrollLeft += imageWidth;\n            if (categoryItemsRef.current.scrollLeft % imageWidth != 0){\n                categoryItemsRef.current.scrollLeft = Math.ceil((categoryItemsRef.current.scrollLeft / imageWidth)) * imageWidth\n            }\n        // }\n\n        console.log(imageWidth, categoryItemsRef.current.scrollLeft, total_width)\n    }\n\n    const handleOnClickBack = (e) => {\n        \n        const total_width = categoryItemsRef.current.scrollWidth ;\n        const windowWidth = window.innerWidth\n        const imageWidth = total_width / ItemArray.length;\n        // if (windowWidth <= 800) {\n            // small device, one image per row\n            categoryItemsRef.current.scrollLeft -= imageWidth;\n            if (categoryItemsRef.current.scrollLeft % imageWidth != 0){\n                categoryItemsRef.current.scrollLeft = Math.ceil((categoryItemsRef.current.scrollLeft / imageWidth)) * imageWidth\n            }\n        // }\n\n        // console.log(imageWidth , categoryItemsRef.current.scrollLeft, total_width)\n    }\n\n\n    function handleOnWheel(e){\n\n        // console.log(state.reachRightEnd, state.previousValuesForScrollLeft0,\n        //     state.previousValuesForScrollLeft1,state.previousValuesForScrollLeft2)\n\n        if (e.deltaY < 0) {\n            // scroll up \n            if(window.scrollY == 0) {\n                e.preventDefault(); // disable parent scroll \n                \n                categoryItemsRef.current.scrollLeft -= categoryItemsRef.current.scrollWidth * 0.02 ;\n                // if (categoryItemsRef.current.scrollLeft <=0) {\n                //     categoryItemsRef.current.scrollLeft = 0 ;\n                // }\n                // reset if scroll left \n                state.reachRightEnd = 0 ;\n                state.previousValuesForScrollLeft0 = 0 ;\n                state.previousValuesForScrollLeft1 = 0 ;\n                state.previousValuesForScrollLeft2 = 0 ;\n\n            }\n            //if parent scrolly != equal to 0 , scroll parent first\n        } else {\n            //scroll down , scroll child first , then propagate to parent scroll\n            if (state.reachRightEnd == 0 ){ // scroll right , never can reach maximum\n                // find a signal indicating reaching the right edge.\n                e.preventDefault(); // disable parent scroll \n                categoryItemsRef.current.scrollLeft += categoryItemsRef.current.scrollWidth * 0.02;\n                \n                state.previousValuesForScrollLeft2 = state.previousValuesForScrollLeft1;\n                state.previousValuesForScrollLeft1 = state.previousValuesForScrollLeft0;\n                state.previousValuesForScrollLeft0 = categoryItemsRef.current.scrollLeft ;\n                if (state.previousValuesForScrollLeft0 == state.previousValuesForScrollLeft1 &&\n                    state.previousValuesForScrollLeft1 == state.previousValuesForScrollLeft2 \n                    ){\n                        state.reachRightEnd = 1 ;\n                    }\n            }\n        }\n\n        // console.log(categoryItemsRef.current.scrollLeft, categoryItemsRef.current.scrollWidth)\n        \n\n    }\n\n    const addEventListener2Component = (e) => {\n        categoryItemsRef.current.addEventListener('wheel', handleOnWheel)\n    }\n    \n    const removeEventListenerFromComponent = () => {\n        if (categoryItemsRef.current) {\n            categoryItemsRef.current.removeEventListener('wheel',handleOnWheel)\n        }\n    }\n\n    useEffect(\n        () => {\n            // on component mount \n            addEventListener2Component();\n\n            // document.getElementById('galleryRoot').addEventListener('wheel',handleOnWheel)\n\n            return () => {\n                // component unmount \n                removeEventListenerFromComponent();\n                // if(document.getElementById('galleryRoot')){\n                //     document.getElementById('galleryRoot').removeEventListener('wheel', handleOnWheel)\n                // }\n            }\n        },\n\n    [])\n\n\n    let items2Render ;\n    if (ItemArray) {\n        \n        items2Render = ItemArray.map(Place => (\n            <div className='categoryItem' \n                key={Place.id}\n            >\n                <img src={Place.CoverImage} />\n                <div className='categoryItemNameWrapper'>\n                    <p className='categoryItemName'> {Place.PlaceName} </p>\n                </div>\n                <div className='clickForMoreWrapper'>\n                    <Link className='clickForMore' to= {Place.Link}> MORE PHOTOS </Link>\n                </div>\n                \n            </div>  \n        ))\n    } \n    \n    return (\n        <div className='subCategoryRoot'>\n            <div className='subCategoryName'>\n                { CategoryName ? <p> {CategoryName} </p> : <p> no data receieved from server </p>}\n            </div>\n            \n             <div className='categoryItems' ref={categoryItemsRef}>\n                {items2Render}\n                    <div className='arrowForwardIconWrapper' onClick={handleOnClickForward}> \n                        <ArrowForwardIcon style={{ color: 'rgb(255,255,255)', fontSize: \"20px\" }} />\n                    </div>\n                    <div className='arrowBackIconWrapper' onClick={handleOnClickBack} > \n                        <ArrowBackIcon style={{ color: 'rgb(255,255,255)', fontSize: \"20px\" }}  />\n                    </div>\n            </div> \n            \n        </div>\n    )\n}\n\nexport default SubCategory\n","import React, {useEffect, useState} from 'react'\nimport './ImageListView.css'\nimport getSafeProperty from '../../../../utility/getSafeProperty'\n\nfunction ImageListView(props) {\n\n    const [ImageArray, setImageArray] = useState([])\n    const [PlaceName,setPlaceName] = useState()\n\n    useEffect(\n        () => {\n            // on component mount \n            if (props.location.myparams) {\n\n                const ImageArray = getSafeProperty(()=>props.location.myparams.ImageArray, 'undefined')\n                if (ImageArray  !== 'undefined') {\n                    setImageArray(ImageArray)\n                }\n                \n            }\n\n            setPlaceName(props.match.params.place)\n            \n\n            return () => {\n                // component unmount \n\n            }\n        },\n\n        [])\n\n\n\n\n    const handleOnClickOnImage = (e,id) => {\n        props.history.push({\n                                                                     \n            pathname : `/gallery/travel/taiwan/${id}`,\n            myparams: { \n                ImageArray : ImageArray,\n            }\n        })\n    }\n\n\n    return (\n        <div className='imageListViewRoot'>\n            <div className='albumName'>\n                <p> {PlaceName} </p>\n            </div>\n            <div className='imgArray'>\n                {ImageArray.map((image,index) => (\n                    <div className='album' \n                        key={index}\n                    >\n                        <img src={image} onClick={(e) => handleOnClickOnImage(e,index)} />\n                    </div>   \n                ))}\n            </div>\n        </div>\n    )\n}\n\nexport default ImageListView\n","import React, {useState,useEffect,useRef} from 'react'\nimport './ImageDetailView.css'\nimport getSafeProperty from '../../../../utility/getSafeProperty'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport MenuOpenIcon from '@material-ui/icons/MenuOpen';\n\nfunction ImageDetailView(props) {\n\n    const [ImageArray, setImageArray] = useState([])\n    const [SelectedId, setSelectedId] = useState(0)\n    const imageThumbNailsRef = useRef(null)\n    const imageDetailRef = useRef(null)\n\n\n    let state = {\n        reachRightEnd : 0 ,\n        previousValuesForScrollLeft0 : null,\n        previousValuesForScrollLeft1 : null,\n        previousValuesForScrollLeft2 : null,\n    }\n\n    useEffect(\n        () => {\n            // on component mount \n\n            addEventListener2Component();\n            addEventListener2ImgeDetail();\n            // SelectedIdRef.current = SelectedId ;\n            window.imageIdSelted = Number(0)\n\n            if (props.location.myparams) {\n\n                const ImageArray = getSafeProperty(()=>props.location.myparams.ImageArray, 'undefined')\n                if (ImageArray  !== 'undefined') {\n                    setImageArray(ImageArray)\n                }\n            }\n\n            setSelectedId(props.match.params.imageId)\n\n            return () => {\n                // component unmount \n                removeEventListenerFromComponent();\n                removeEventListener2ImgeDetail();\n            }\n        },\n\n        [])\n\n    \n    useEffect(\n        () => {\n            // console.log(SelectedId)\n\n            // SelectedIdRef.current = SelectedId ;\n            // state.imageIdSeleted = SelectedId ;\n            // window.imageIdSelted = Number(SelectedId) ;\n            // console.log(\"window.imageIdSelted, \", window.imageIdSelted)\n\n            console.log (\"ImageArray.length : \",ImageArray.length)\n\n            const imageWidth = imageThumbNailsRef.current.scrollWidth / ImageArray.length\n            const width2Set = imageWidth * SelectedId ;\n            if (width2Set + window.innerWidth < imageThumbNailsRef.current.scrollWidth) {\n                imageThumbNailsRef.current.scrollLeft =  width2Set - window.innerWidth / 2 ;\n            } else {\n                imageThumbNailsRef.current.scrollLeft = imageThumbNailsRef.current.scrollWidth - window.innerWidth ;\n            }\n\n        },\n\n    [SelectedId])\n\n    useEffect(\n        () => {\n\n\n            console.log (\"ImageArray.length : \",ImageArray.length)\n            window.ImageArrayLength = ImageArray.length ;\n\n        },\n\n    [ImageArray])\n\n    async function incrementToGlobal (b) {\n\n        var tempValue = Number(window.imageIdSelted) + Number(b) \n\n        console.log(window.ImageArrayLength)\n\n        if (window.ImageArrayLength) {     // strange bug, why ImageArray.length always returns 0 when the image list is rendered correctly\n            if (tempValue > window.ImageArrayLength-1){\n                tempValue = window.ImageArrayLength-1 \n            } else if (tempValue < 0) {\n                tempValue = 0 \n            }\n        }\n\n        console.log(tempValue)\n\n        window.imageIdSelted = Number(tempValue) ;\n        setSelectedId(window.imageIdSelted)\n\n        return window.imageIdSelted\n    }\n\n\n    const addEventListener2Component = (e) => {\n        imageThumbNailsRef.current.addEventListener('wheel', handleOnWheel)\n    }\n    \n    const removeEventListenerFromComponent = (e) => {\n        if (imageThumbNailsRef.current) {\n            imageThumbNailsRef.current.removeEventListener('wheel',handleOnWheel)\n        }\n    }\n\n    const addEventListener2ImgeDetail = (e) => {\n        imageDetailRef.current.addEventListener('wheel', handleSwitchImgOnWheel)\n    }\n    \n    const removeEventListener2ImgeDetail = (e) => {\n        if (imageDetailRef.current) {\n            imageDetailRef.current.removeEventListener('wheel',handleSwitchImgOnWheel)\n        }\n    }\n\n    const handleOnclickToSelect = (e,id) => {\n        setSelectedId(id)\n    }\n\n    const handleOnClickForward = (e) => {\n        let SelectedId_val = SelectedId + 1 ;\n        if (SelectedId_val > ImageArray.length-1) {\n            SelectedId_val = ImageArray.length-1;\n        }\n        setSelectedId(SelectedId_val )\n    }\n\n    const handleOnClickBack = (e) => {\n        let SelectedId_val = SelectedId - 1 ;\n        if (SelectedId_val < 0) {\n            SelectedId_val = 0;\n        }\n        setSelectedId(SelectedId_val )\n    }\n\n    const handleSwitchImgOnWheel = async(e) => {\n        e.preventDefault();\n\n        if (e.deltaY > 0) {\n            await incrementToGlobal(1)\n        } else {\n            await incrementToGlobal(-1)\n        }\n    }\n\n    function handleOnWheel(e){\n\n        // console.log(state.reachRightEnd, state.previousValuesForScrollLeft0,\n        //     state.previousValuesForScrollLeft1,state.previousValuesForScrollLeft2)\n\n        if (e.deltaY < 0) {\n            // scroll up \n            if(window.scrollY == 0) {\n                e.preventDefault(); // disable parent scroll \n                \n                imageThumbNailsRef.current.scrollLeft -= imageThumbNailsRef.current.scrollWidth * 0.02 ;\n                // if (imageThumbNailsRef.current.scrollLeft <=0) {\n                //     imageThumbNailsRef.current.scrollLeft = 0 ;\n                // }\n                // reset if scroll left \n                state.reachRightEnd = 0 ;\n                state.previousValuesForScrollLeft0 = 0 ;\n                state.previousValuesForScrollLeft1 = 0 ;\n                state.previousValuesForScrollLeft2 = 0 ;\n\n            }\n            //if parent scrolly != equal to 0 , scroll parent first\n        } else {\n            //scroll down , scroll child first , then propagate to parent scroll\n            if (state.reachRightEnd == 0 ){ // scroll right , never can reach maximum\n                // find a signal indicating reaching the right edge.\n                e.preventDefault(); // disable parent scroll \n                imageThumbNailsRef.current.scrollLeft += imageThumbNailsRef.current.scrollWidth * 0.02;\n                \n                state.previousValuesForScrollLeft2 = state.previousValuesForScrollLeft1;\n                state.previousValuesForScrollLeft1 = state.previousValuesForScrollLeft0;\n                state.previousValuesForScrollLeft0 = imageThumbNailsRef.current.scrollLeft ;\n                if (state.previousValuesForScrollLeft0 == state.previousValuesForScrollLeft1 &&\n                    state.previousValuesForScrollLeft1 == state.previousValuesForScrollLeft2 && \n                    state.previousValuesForScrollLeft1 >  10\n                    ){\n                        state.reachRightEnd = 1 ;\n                    }\n            }\n        }\n\n        // console.log(imageThumbNailsRef.current.scrollLeft, imageThumbNailsRef.current.scrollWidth)\n        \n\n    }\n\n    return (\n        <div className='imageDetalViewRoot'>\n            <input type='checkbox' id='imageDetalViewRootCheckbox' />\n            <div className='imageDetail' ref={imageDetailRef} >\n                <img src={ImageArray[SelectedId]} />\n                <div className='arrowForwardIconWrapper' onClick={handleOnClickForward} > \n                    <ArrowForwardIcon style={{ color: 'rgb(255,255,255)', fontSize: \"20px\" }} />\n                </div>\n                <div className='arrowBackIconWrapper' onClick={handleOnClickBack} > \n                    <ArrowBackIcon style={{ color: 'rgb(255,255,255)', fontSize: \"20px\" }}  />\n                </div>\n                <label className='icoMenuWrapper' for='imageDetalViewRootCheckbox'>\n                    <MenuOpenIcon style={{ color: 'rgb(255,255,255)', fontSize: \"30px\"}}  />\n                </label>\n            </div>\n            <div className='imageThumbNails' ref={imageThumbNailsRef}>\n                    {ImageArray.map((image,id) => (\n                        <div className='album' \n                            key={id}\n                        >\n                            <img src={ImageArray[id]} \n                                onClick={(e)=>{handleOnclickToSelect(e,id)}}     \n                                style={\n                                    (SelectedId == id)? {borderStyle: 'solid', borderWidth: '2px', borderColor:'red' } : {}\n                                }\n                            />\n                        </div>   \n                    ))}\n            </div>\n        </div>\n    )\n}\n\nexport default ImageDetailView\n","import React, {useState, useEffect} from 'react'\nimport { connect } from 'react-redux';\n\nimport './FollowMe.css'\n\n\nimport { blog_newBlog_url , hostDomain} from '../../../ipconfig';\n\n\nconst fileName = \"FollowMe.js\"\n\nfunction FollowMe(props) {\n\n    return (\n        <form className='followMeRoot' >\n            <div className=\"container\">\n                <p className=\"line\">\n                    copy following url to get the latest blog \n                </p>\n                <p className=\"line\">\n                    api_url : {hostDomain}/api/blog?action=thumbNailOfLatest\n                </p>\n                <p className=\"line\">\n                    <span> return data :  </span>\n                </p>\n                <div className=\"imageWrappers\">\n                    <img src = \"/Blog/returnData.png\" alt=\"\" />\n                </div>\n\n            </div>\n        </form>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        // loading: state.auth.loading,\n        // error: state.auth.error,\n        // data: state.auth.data,\n        // token: state.auth.token,\n        // isTokenValid: state.auth.isTokenValid\n    };\n  };\n  \n  const mapDispatchToProps = dispatch => {\n    return {\n        // createEditor: () => dispatch(eidtorCreateAction())\n    };\n  };\n\n//   const mapDispatchToProps = dispatch => {\n//     return {\n//         login: (username,password) => dispatch(authLoginAction(username,password)),\n//         loginFailed: () => dispatch(authLoginFailedAction()),\n//         clearStates: () => dispatch(authResetStateAction()),\n//         authCheckTokenVaidAction: (token) => dispatch(authCheckTokenVaidAction(token)),\n//     };\n//   };\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n) (FollowMe)\n\n","import React,{useState,useEffect} from 'react'\nimport axios from \"axios\";\nimport {subscriptionENdPoint} from '../../../ipconfig'\n\nimport './Subscription.css'\nimport handleError from '../../../utility/handleError.js'\n\nimport getSafeProperty from '../../../utility/getSafeProperty'\n\n\nconst fileName =  \"Subscription.js\"\n\nfunction Subscription(props) {\n\n    const [subscriptionUrlList,setSubscriptionUrlList] = useState([])\n    const [thumbnailTextArray,setThumbnailTextArray] = useState([])\n\n    useEffect(() => {\n\n        const functionName =  \"useEffect\"\n\n        // get<T = any, R = AxiosResponse<T>>(url: string, config?: AxiosRequestConfig): Promise<R>;\n        const config = {\n            params: {\n                action : \"getList\"\n            },\n            headers : {\n                'Content-Type': 'application/json', \n            }\n        }\n        \n        // get blog list from server, \n        axios \n            .get(subscriptionENdPoint,\n                config\n            )\n            .then(res => {\n                if (res.data.isSuccess === true) {\n                    let api_url_array = []\n                    for (let i = 0; i < res.data.querySet.length; i++) {\n                        api_url_array.push(res.data.querySet[i].api_url)\n                    }\n                    setSubscriptionUrlList(api_url_array)\n                }\n            })\n            .catch (error => {\n                handleError(error,fileName,functionName)\n            })\n            \n\n        return () => {\n            \n        }\n    }, [])\n\n\n    useEffect(() => {\n\n        if (subscriptionUrlList.length) {\n\n            let axiosGetArray = []\n            const config = {\n                params: {\n                    \n                },\n                headers: {\n                    'Content-Type': 'application/json',\n                }\n            }\n\n            for(let i = 0; i < subscriptionUrlList.length; i++){\n                const newPromise = axios({\n                    method: 'get',\n                    url: subscriptionUrlList[i], \n                    config: config\n                })\n                axiosGetArray.push(newPromise)\n            }\n\n            axios.all(\n                axiosGetArray\n            ).then(axios.spread((...response) => {\n                // Both requests are now complete\n\n                let textArray = []\n\n                for (let i = 0; i < response.length; i++) {\n                    const obj = {}\n\n                    console.log(response[i])\n\n                    if (response[i].data.isSuccess === false ){\n                        break;\n                    }\n                    obj['sSuccess'] = response[i].data.isSuccess\n                    obj['imageList']  = response[i].data.imageList\n                    obj['page_url']  = response[i].data.page_url \n                    obj['text']  = response[i].data.text \n\n                    textArray.push(obj)\n                }\n                setThumbnailTextArray(textArray)\n\n                // todo : get the text data and display it as flex box \n\n            })).catch(errors => {\n                handleError(errors,fileName,'')\n            })\n\n            return () => {\n\n            }\n        }\n\n    }, [subscriptionUrlList])\n    \n\n    /**\n     *  html file\n     * \n     *  <div className=\"subscriptionRoot\"> \n     *      <div className=\"blogWrapper\"> \n     *          <div className=\"content\">\n     *                {thumbnailTextArray[i].text}\n     *          </div>\n     *          <a className=\"readmore\" href={thumbnailTextArray[i].page_url}>\n     *              readmore\n     *          </a>\n     *      </div>\n     *  </div> \n     * \n     */\n\n    useEffect(() => {\n        \n        for (let i=0; i<thumbnailTextArray.length; ++i){\n\n            let contentDiv = document.createElement('div')\n            contentDiv.className = 'content'\n            contentDiv.innerHTML = thumbnailTextArray[i].text;\n\n            let atag = document.createElement('a')\n            atag.href = thumbnailTextArray[i].page_url;\n            atag.className = 'readmore'\n            atag.innerHTML = 'readmore'\n\n\n            let blogWrapperDiv = document.createElement('div')\n            blogWrapperDiv.className = 'blogWrapper'\n            blogWrapperDiv.appendChild(contentDiv)\n            blogWrapperDiv.appendChild(atag)\n            document.getElementsByClassName(\"subscriptionRoot\")[0].appendChild(blogWrapperDiv)\n\n        }\n\n    }, [thumbnailTextArray])\n\n\n    return (\n\n        <div className='subscriptionRoot'>\n\n        </div>\n    )\n}\n\nexport default Subscription\n","import React,{useState,useEffect} from 'react'\nimport axios from \"axios\";\nimport {subscriptionENdPoint} from '../../../ipconfig'\n\nimport './NewSubscription.css'\nimport handleError from '../../../utility/handleError.js'\n\nimport getSafeProperty from '../../../utility/getSafeProperty'\n\nconst fileName =  \"NewSubscription.js\"\n\n\nfunction NewSubscription(props) {\n\n    const [api_url,setApi_url] = useState()\n\n    const handleOnSubmitForm = (e) => {\n\n        e.preventDefault()\n\n        const functionName = \"handleOnSubmitForm\"\n\n        const token = localStorage.getItem('token')\n\n        const config = {\n            params: {\n                token: token\n            },\n            headers : {\n                'Content-Type': 'application/json', \n            }\n        }\n\n        const formDataObj = {\n            api_url : api_url,\n        }\n\n        axios \n        .post(subscriptionENdPoint,\n            JSON.stringify(formDataObj),\n            config\n        )\n        .then(res => {\n            console.log(res)\n            if (res.data.isSuccess === true) {\n                props.history.push('/subscription')\n            }\n        })\n        .catch (error => {\n            handleError(error,fileName,functionName)\n        })\n\n    }\n\n    const handleOnChange = (e) => {\n        e.preventDefault()\n        const name = e.target.name ;\n        const value = e.target.value ;\n        setApi_url(value)\n    }\n\n    return (\n        <div className='newSubscriptionRoot'>\n            <form className='form' onSubmit={handleOnSubmitForm} autoComplete=\"off\">\n\n                <div className='inputWrapper'>\n                    <input \n                        type='text' \n                        value={api_url} \n                        name='api_url' \n                        placeholder='please input the api_url'\n                        onChange = {handleOnChange}\n                    /> \n                </div>\n\n                <div className='submit'>\n                    <input type='submit' value='submit' />\n                </div>\n            </form>\n        </div>\n    )\n}\n\n\n\nexport default NewSubscription\n","import React from 'react'\nimport './ProjectRepo.css'\n\nfunction ProjectRepo(props) {\n    return (\n        <div className=\"projectRoot\">\n            <p className=\"clickBelow\">click below to visit project in github</p>\n            <a className=\"link\" href=\"https://github.com/brianwchh/decentrialized-social-networking-software-system_1\">https://github.com/brianwchh/decentrialized-social-networking-software-system_1</a>\n        </div>\n    )\n}\n\nexport default ProjectRepo\n","import React, {} from 'react'\nimport './Router.css'\n\nimport { Route, Switch } from 'react-router-dom';\nimport Home from './Home/Home'\nimport Register from './Profile/Register'\nimport Login from './Profile/Login'\nimport CourseListView from './CourseListView/CourseListView'\nimport PeersChat from './PeersChat/PeersChat'\nimport CourseDetailView from '../Content/CourseDetailView/CourseDetailView'\nimport Gallery from './Gallery/Gallery'\nimport Blog from './Blog/Blog'\nimport NewBlog from './Blog/NewBlog'\nimport SubCategory from '../Content/Gallery/SubCategory/SubCategory.js'\nimport ImageListView from '../Content/Gallery/ImageListView/ImageListView.js'\nimport ImageDetailView from '../Content/Gallery/ImageDetailView/ImageDetailView.js'\nimport FollowMe from \"./Blog/FollowMe\"\nimport Subscription from \"./Subscription/Subscription\"\nimport NewSubscription from \"./Subscription/NewSubscription\"\nimport ProjectRepo from './ProjectRepo/ProjectRepo'\n\n\nfunction Router() {\n    return (\n        <div className='routerRoot'>\n            \n                <Route>\n                    <Switch>\n\n                        <Route path='/blog' exact component={Blog}/>\n                        <Route path='/blog/newblog'  component={NewBlog}/>\n\n                        <Route path='/gallery' exact component={Gallery} />\n                        <Route path='/gallery/:category' exact component={SubCategory} />\n                        <Route path='/gallery/:category/:place' exact component={ImageListView} />\n                        <Route path='/gallery/:category/:place/:imageId'  component={ImageDetailView} /> \n\n\n                        <Route path='/blog/followme'  component={FollowMe} /> \n                        <Route path='/subscription'  component={Subscription} /> \n                        <Route path='/newsubscription'  component={NewSubscription} /> \n                        \n                        \n\n                        {/* <Route path='/peerschat' exact component= {PeersChat} /> */}\n\n                        <Route path='/course' exact  component={CourseListView} />\n                        <Route path='/course/:id'  component={CourseDetailView} />\n                        \n                        <Route path='/profile/login'  component={Login} />\n                        <Route path='/profile/register'  component={Register} /> \n\n                        <Route path='/project'  component={ProjectRepo} /> \n\n                        <Route path='/' exact  component={Home} />\n\n                    </Switch>\n                </Route>\n        </div>\n    )\n}\n\nexport default Router\n","import React, {useRef,useEffect,useState} from 'react'\nimport './App.css'\n\nimport NavigationBar from './components/NavigationBar/NavigationBar'\nimport Footer from './components/Footer/Footer'\nimport Router from './components/Content/Router'\nimport { BrowserRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport {\n    authCheckTokenVaidAction\n} from './store/auth/actions'\n\nfunction App(props) {\n\n    const [scrollDirectionUp,setScrollDirectionUp] = useState(false)\n\n    useEffect(() => {\n        window.lastScrollTop = 0 ;\n        window.addEventListener(\"scroll\", function dectectScrollDirection() {\n            const st = window.pageYOffset || document.documentElement.scrollTop \n            if (st > window.lastScrollTop){\n                // scroll down\n                setScrollDirectionUp(false)\n            } else {\n                //scroll up\n                setScrollDirectionUp(true)\n            }\n            window.lastScrollTop = st <= 0 ? 0 : st ; // for mobile or negative scrolling\n        },false)\n\n        props.authCheckTokenVaidAction()\n\n        return () => {\n            \n        }\n    }, [])\n\n    return (\n\n        <div className='appRoot'>\n            <div className='navigationNcontent'>\n\n                <BrowserRouter >\n\n                    <div className='navigationWrapper' style={{position : props.isExpandMenu == true || scrollDirectionUp == true ? \"fixed\" : \"relative\" }}>\n                        <NavigationBar />\n                    </div>\n\n                    <div className='contentWrapper' style={{paddingTop: props.isExpandMenu == true || scrollDirectionUp == true? \"50px\" : \"0px\"}}>\n                        <Router />\n                    </div>\n\n                </BrowserRouter >\n\n            </div>\n            \n            <div className='footerWrapper'>\n                <Footer />\n            </div>\n\n        </div>\n        \n    )\n}\n\n\nconst mapStateToProps = state => {\n    return {\n        isExpandMenu: state.websocket.isExpandMenu,  // 與peersChat有關的信號\n        loginStatus : state.auth.status\n    };\n};\n  \nconst mapDispatchToProps = dispatch => {\n    return {\n        authCheckTokenVaidAction : () => dispatch(authCheckTokenVaidAction())\n    };\n};\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n) (App)\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export const updateObject = (oldObject, updatedProperties) => {\n    return {\n      ...oldObject,\n      ...updatedProperties\n    };\n  };","import * as actionTypes from './actionTypes'\nimport { updateObject } from \"../utility\";\nimport { authResetStateAction } from './actions';\n\nconst initialState = {\n    status : actionTypes.LOGIN_STATUS_LOGOUT ,\n    myUserName: null,\n    userID    : null,\n    userImage : null\n}\n\nconst sharedReducer = (state,data) => {\n    return state\n}\n\nconst auth_set_login_status = (state,data) => {\n    return updateObject(state,data)\n}\n\nconst auth_set_token_status = (state,data) => {\n    return updateObject(state,data)\n}\n\nconst authSaveMyUserName = (state,data) => {\n    return updateObject(state,data)\n}\n\nconst reducer = (state = initialState, action) => {\n    switch (action.type) {\n        case actionTypes.AUTH_SET_LOGIN_STATUS : \n            console.log(`action.type = ${action.type}`)\n            console.log(action.data)\n            return auth_set_login_status(state,action.data);\n\n        case actionTypes.AUTH_SET_TOKEN_STATUS : \n            console.log(`action.type = ${action.type}`)\n            console.log(action.data)\n            return auth_set_token_status(state,action.data);\n        case actionTypes.AUTH_SAVE_MY_USERNAME : \n            return authSaveMyUserName(state, action.data);\n        // case actionTypes.AUTH_CLEAR_STATE: \n        //     return sharedReducer(state,action.data);\n        // case actionTypes.AUTH_LOGIN : \n        //     return sharedReducer(state,action.data)\n\n        default : \n            return sharedReducer(state,action.data);\n    }\n}\n\nexport default reducer ;","import * as actionTypes from './actionTypes'\nimport { updateObject } from \"../utility\";\nimport * as webSocketState from './webSocketState'\n\nconst fileName = \"websocket/reducer.js\"\n\nconst initialState = {\n    websocketConn     : null  ,\n    toggleSignal      : false ,   // indicating signal for re-render\n    selectedContact   : '',\n    selectedGroup     : '',\n    selectedChatRoom  : '',\n    isGroupChat       : false , // true : render contact chat. false : render group chat\n    isMyChatRoom      : false ,\n    isContactChat     : false ,\n    isExpandMenu      : false ,\n    newMsgReadyToggle : false ,\n\n    remoteStream_ref  : '',\n    localStream_ref   : '',\n\n    mediaCallState : webSocketState.WEBSOCKET_MEDIACALL_STATE_IDLE ,\n\n    allContactList_keyIsIpId : {},\n\n    isShowPanel : true , // used to show panel in small device view\n    \n}\n\nconst creacteWS = (state,data) => {\n\n    console.log(\"saving websocket connection to store ...\")\n    console.log(data)\n\n    return updateObject(state,data)\n}\n\nconst destroyWS = (state,data) => {\n\n    return updateObject(state,data)\n}\n\nconst sharedReducer = (state,data) => {\n\n    const toggleSignal = !state.toggleSignal ;\n\n    const newData = {...data, ...{toggleSignal: toggleSignal}}\n    \n    return updateObject(state,newData)\n\n}\n\nconst selectContact = (state, data) => {\n\n    const functionName = \"selectContact\"\n\n    // console.log(` ${fileName} ${functionName} : `)\n    // console.log(data)\n\n    let toggleSignal = false ;\n\n    if(state.toggleSignal == true) {\n        toggleSignal = false ;\n    }  else {\n        toggleSignal = true\n    }\n\n    const newData = {...data, ...{toggleSignal: toggleSignal}}\n\n    return updateObject(state,newData)\n}\n\n\nconst selectGroup = (state, data) => {\n\n    const functionName = \"selectGroup\"\n\n    // console.log(` ${fileName} ${functionName} : `)\n    // console.log(data)\n\n    let toggleSignal = false ;\n\n    if(state.toggleSignal == true) {\n        toggleSignal = false ;\n    }  else {\n        toggleSignal = true\n    }\n\n    const newData = {...data, ...{toggleSignal: toggleSignal}}\n\n    return updateObject(state,newData)\n\n}\n\nconst setIsExpandMenu = (state, data) => {\n    return updateObject(state,data)\n}\n\nconst setNewMsgToggle = (state, data) => {\n    console.log(\"********setNewMsgToggle in websocket/reducer.js*****************\")\n    console.log(state)\n    console.log(data)\n    return updateObject(state,data)\n}\n\nconst setisInMediaCall = (state,data) => {\n    return updateObject(state,data)\n}\n\nconst setIsCallAccepted = (state, data) => {\n    return updateObject(state,data)\n}\n\nconst setMediaCallState = (state, data) => {\n    return updateObject(state,data)\n}\n\nconst setStreamRef = (state,data) => {\n    return updateObject(state, data)\n}\n\nconst setContactList =(state,data) => {\n    return updateObject(state, data)\n}\n\nconst setIsShowPanel =(state,data) => {\n    return updateObject(state, data)\n}\n\nconst reducer = (state = initialState, action) => {\n    switch (action.type) {\n        case actionTypes.WEBSOCKET_CREATE : \n            return creacteWS(state,action.data);\n        case actionTypes.WEBSOCKET_DESTROY : \n            return destroyWS(state,action.data);\n        case actionTypes.WEBSOCKET_SELECT_CONTACT : \n            return selectContact(state, action.data)\n        case actionTypes.WEBSOCKET_SELECT_GROUP : \n            return selectGroup(state, action.data)\n        case actionTypes.WEBSOCKET_SET_ISEXPANDMENU : \n            return setIsExpandMenu(state,action.data)\n        case actionTypes.WEBSOCKET_NEWMESSAGE : \n            return setNewMsgToggle(state,action.data)\n        case actionTypes.WEBRTC_SET_MEDIACALLSTATE : \n            return setMediaCallState(state,action.data)\n        case actionTypes.WEBRTC_SET_STREAM_REF : \n            return setStreamRef(state,action.data) \n        case actionTypes.WEBSOCKET_SET_CONTACTLIST : \n            return setContactList(state,action.data)\n        case actionTypes.WEBSOCKET_SET_ISSHOWPANEL : \n            return setIsShowPanel(state,action.data)\n\n        default : \n            return sharedReducer(state,action.data);\n    }\n}\n\nexport default reducer ;","import { createStore, applyMiddleware, combineReducers } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport thunk from \"redux-thunk\";\n\nimport authReducer from \"./auth/reducer\";\nimport webSocketReducer from  './websocket/reducer'\n\nconst rootReducer = combineReducers({\n  auth: authReducer,\n  websocket: webSocketReducer,\n});\n\nconst store = createStore(rootReducer, applyMiddleware(thunk));\n\nexport default store ;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from \"react-redux\";\n\nimport store from './store/store'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store= {store} >\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}